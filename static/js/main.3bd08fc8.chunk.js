(this["webpackJsonp@fluidity/dev-frontend"]=this["webpackJsonp@fluidity/dev-frontend"]||[]).push([[0],[,,,,,,,,function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(121),t),i(n(80),t),i(n(207),t),i(n(208),t),i(n(209),t),i(n(210),t),i(n(211),t),i(n(212),t),i(n(213),t),i(n(214),t),i(n(215),t),i(n(216),t),i(n(217),t)},,,,,function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(156),t),i(n(122),t),i(n(257),t),i(n(258),t)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a,i=n(5),r=n(45),s=n(53),o=n(89),u=n(36),l=n(56),c=n(57),d=n(119),p=n(96),y=n(120),f=n(59),b=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t._connect=t._connectByChainId=t._connectToDeployment=t.UnsupportedNetworkError=t._usingStore=t._requireFrontendAddress=t._requireAddress=t._getProvider=t._requireSigner=t._getBlockTimestamp=t._getContracts=void 0;var m=n(66),h=n(8),v=b(n(218)),T=b(n(219)),j=b(n(220)),g=b(n(221)),x=b(n(222)),w=b(n(223)),O=b(n(224)),_=n(97),k=n(150),S=n(245),D=v.default,E=f((y(a={},w.default.chainId,w.default),y(a,x.default.chainId,x.default),y(a,g.default.chainId,g.default),y(a,T.default.chainId,T.default),y(a,j.default.chainId,j.default),y(a,O.default.chainId,O.default),a),null!==D?y({},D.chainId,D):{}),C=function(e,t,n,a,i,r){var s=i.deploymentDate,o=i.totalStabilityPoolLQTYReward,u=i.liquidityMiningLQTYRewardRate,l=p(i,["deploymentDate","totalStabilityPoolLQTYReward","liquidityMiningLQTYRewardRate"]);if(r&&void 0!==r.useStore&&!I.includes(r.useStore))throw new Error("Invalid useStore value ".concat(r.useStore));return f(f({provider:e,signer:t,_contracts:n,_multicall:a,deploymentDate:new Date(s),totalStabilityPoolLQTYReward:h.Decimal.from(o),liquidityMiningLQTYRewardRate:h.Decimal.from(u)},l),r)};t._getContracts=function(e){return e._contracts};var A=function(e){return e._multicall},L=function(e){return e.timestamp};t._getBlockTimestamp=function(e){var n,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"latest";return null!==(a=null===(n=A(e))||void 0===n?void 0:n.getCurrentBlockTimestamp({blockTag:i}).then(_.numberify))&&void 0!==a?a:t._getProvider(e).getBlock(i).then(L)};t._requireSigner=function(e){var t;return null!==(t=e.signer)&&void 0!==t?t:_.panic(new Error("Must be connected through a Signer"))};t._getProvider=function(e){return e.provider};t._requireAddress=function(e,t){var n,a;return null!==(a=null!==(n=null===t||void 0===t?void 0:t.from)&&void 0!==n?n:e.userAddress)&&void 0!==a?a:_.panic(new Error("A user address is required"))};t._requireFrontendAddress=function(e){var t;return null!==(t=e.frontendTag)&&void 0!==t?t:_.panic(new Error("A frontend address is required"))};t._usingStore=function(e){return void 0!==e.useStore};var M=function(e){l(n,e);var t=c(n);function n(e){var a;return u(this,n),(a=t.call(this,"Unsupported network (chainId = ".concat(e,")"))).name="UnsupportedNetworkError",a.chainId=e,a}return n}(d(Error));t.UnsupportedNetworkError=M;var R=function(e){var t;return[m.Signer.isSigner(e)?null!==(t=e.provider)&&void 0!==t?t:_.panic(new Error("Signer must have a Provider")):e,m.Signer.isSigner(e)?e:void 0]};t._connectToDeployment=function(e,t,n){return C.apply(void 0,o(R(t)).concat([k._connectToContracts(t,e),void 0,e,n]))};var I=["blockPolled"];function P(e,t,n,a){var i,r=null!==(i=E[n])&&void 0!==i?i:_.panic(new M(n));return C(e,t,k._connectToContracts(null!==t&&void 0!==t?t:e,r),S._connectToMulticall(null!==t&&void 0!==t?t:e,n),r,a)}t._connectByChainId=P;var U=function(){var e=s(i.mark((function e(t,n){var a,s,o,u;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=R(t),s=r(a,2),o=s[0],!(u=s[1])){e.next=12;break}if(void 0===(null===n||void 0===n?void 0:n.userAddress)){e.next=4;break}throw new Error("Can't override userAddress when connecting through Signer");case 4:return e.t0=f,e.t1=f({},n),e.t2={},e.next=9,u.getAddress();case 9:e.t3=e.sent,e.t4={userAddress:e.t3},n=(0,e.t0)(e.t1,e.t2,e.t4);case 12:return e.t5=P,e.t6=o,e.t7=u,e.next=17,o.getNetwork();case 17:return e.t8=e.sent.chainId,e.t9=n,e.abrupt("return",(0,e.t5)(e.t6,e.t7,e.t8,e.t9));case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();t._connect=U},function(e,t,n){"use strict";var a=n(45),i=n(36),r=n(39),s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Percent=t.Difference=t.Decimal=void 0;var o=s(n(90)),u=n(31),l=function(e){return p.pow(e)},c=18,d=u.BigNumber.from(1),p=u.BigNumber.from(10),y=l(c),f=/^[0-9]*(\.[0-9]*)?(e[-+]?[0-9]+)?$/,b=/0*$/,m=["","K","M","B","T"],h=function(e,t){return e.mul(t).add(v.HALF.hex).div(y)},v=function(){function e(t){if(i(this,e),t.isNegative())throw new Error("negatives not supported by Decimal");this._bigNumber=t}return r(e,[{key:"hex",get:function(){return this._bigNumber.toHexString()}},{key:"bigNumber",get:function(){return this._bigNumber.toString()}},{key:"_toStringWithAutomaticPrecision",value:function(){var e=this._bigNumber.div(y),t=this._bigNumber.mod(y);if(t.isZero())return e.toString();var n=t.toString().padStart(c,"0").replace(b,"");return e.toString()+"."+n}},{key:"_roundUp",value:function(e){var t=l(17-e).mul(5);return this._bigNumber.add(t)}},{key:"_toStringWithPrecision",value:function(e){if(e<0)throw new Error("precision must not be negative");var t=e<c?this._roundUp(e):this._bigNumber,n=t.div(y),a=t.mod(y);if(0===e)return n.toString();var i=a.toString().padStart(c,"0").substr(0,e);return n.toString()+"."+i}},{key:"toString",value:function(e){return this.infinite?"\u221e":void 0!==e?this._toStringWithPrecision(e):this._toStringWithAutomaticPrecision()}},{key:"prettify",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=this.toString(e).split("."),n=a(t,2),i=n[0],r=n[1],s=i.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");return void 0!==r?s+"."+r:s}},{key:"shorten",value:function(){var t=this.toString(0).length,n=Math.min(Math.floor((t-1)/3),m.length-1),a=Math.max(3*(n+1)-t,0);return this.div(new e(l(c+3*n))).prettify(a)+m[n]}},{key:"add",value:function(t){return new e(this._bigNumber.add(e.from(t)._bigNumber))}},{key:"sub",value:function(t){return new e(this._bigNumber.sub(e.from(t)._bigNumber))}},{key:"mul",value:function(t){return new e(this._bigNumber.mul(e.from(t)._bigNumber).div(y))}},{key:"div",value:function(t){return(t=e.from(t)).isZero?e.INFINITY:new e(this._bigNumber.mul(y).div(t._bigNumber))}},{key:"_divCeil",value:function(t){return(t=e.from(t)).isZero?e.INFINITY:new e(this._bigNumber.mul(y).add(t._bigNumber.sub(d)).div(t._bigNumber))}},{key:"mulDiv",value:function(t,n){return t=e.from(t),(n=e.from(n)).isZero?e.INFINITY:new e(this._bigNumber.mul(t._bigNumber).div(n._bigNumber))}},{key:"pow",value:function(t){if(o.default(Number.isInteger(t)),o.default(0<=t&&t<=4294967295),0===t)return e.ONE;if(1===t)return this;for(var n=this._bigNumber,a=y;t>1;t>>>=1)1&t&&(a=h(n,a)),n=h(n,n);return new e(h(n,a))}},{key:"isZero",get:function(){return this._bigNumber.isZero()}},{key:"zero",get:function(){if(this.isZero)return this}},{key:"nonZero",get:function(){if(!this.isZero)return this}},{key:"infinite",get:function(){if(this.eq(e.INFINITY))return this}},{key:"finite",get:function(){if(!this.eq(e.INFINITY))return this}},{key:"absoluteValue",get:function(){return this}},{key:"lt",value:function(t){return this._bigNumber.lt(e.from(t)._bigNumber)}},{key:"eq",value:function(t){return this._bigNumber.eq(e.from(t)._bigNumber)}},{key:"gt",value:function(t){return this._bigNumber.gt(e.from(t)._bigNumber)}},{key:"gte",value:function(t){return this._bigNumber.gte(e.from(t)._bigNumber)}},{key:"lte",value:function(t){return this._bigNumber.lte(e.from(t)._bigNumber)}}],[{key:"fromBigNumberString",value:function(t){return new e(u.BigNumber.from(t))}},{key:"_fromString",value:function(t){if(!t||!t.match(f))throw new Error('bad decimal format: "'.concat(t,'"'));if(t.includes("e")){var n=t.split("e"),i=a(n,2),r=i[0],s=i[1];return s.startsWith("-")?new e(e._fromString(r)._bigNumber.div(p.pow(u.BigNumber.from(s.substr(1))))):(s.startsWith("+")&&(s=s.substr(1)),new e(e._fromString(r)._bigNumber.mul(p.pow(u.BigNumber.from(s)))))}if(!t.includes("."))return new e(u.BigNumber.from(t).mul(y));var o=t.split("."),l=a(o,2),d=l[0],b=l[1];return b.length<c?b+="0".repeat(c-b.length):b=b.substr(0,c),new e(u.BigNumber.from(d||0).mul(y).add(b))}},{key:"from",value:function(t){switch(typeof t){case"object":if(t instanceof e)return t;throw new Error("invalid Decimalish value");case"string":return e._fromString(t);case"number":return e._fromString(t.toString());default:throw new Error("invalid Decimalish value")}}},{key:"min",value:function(t,n){return t=e.from(t),n=e.from(n),t.lt(n)?t:n}},{key:"max",value:function(t,n){return t=e.from(t),n=e.from(n),t.gt(n)?t:n}}]),e}();t.Decimal=v,v.INFINITY=v.fromBigNumberString("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),v.ZERO=v.from(0),v.HALF=v.from(.5),v.ONE=v.from(1);var T=function(){function e(t){i(this,e),this._number=t}return r(e,[{key:"toString",value:function(e){return this._number?this._number.sign+this._number.absoluteValue.toString(e):"N/A"}},{key:"prettify",value:function(e){return this._number?this._number.sign+this._number.absoluteValue.prettify(e):this.toString()}},{key:"mul",value:function(t){return new e(this._number&&{sign:this._number.sign,absoluteValue:this._number.absoluteValue.mul(t)})}},{key:"nonZero",get:function(){var e;return(null===(e=this._number)||void 0===e?void 0:e.absoluteValue.nonZero)&&this}},{key:"positive",get:function(){var e;return"+"===(null===(e=this._number)||void 0===e?void 0:e.sign)?this:void 0}},{key:"negative",get:function(){var e;return"-"===(null===(e=this._number)||void 0===e?void 0:e.sign)?this:void 0}},{key:"absoluteValue",get:function(){var e;return null===(e=this._number)||void 0===e?void 0:e.absoluteValue}},{key:"infinite",get:function(){var e;return(null===(e=this._number)||void 0===e?void 0:e.absoluteValue.infinite)&&this}},{key:"finite",get:function(){var e;return(null===(e=this._number)||void 0===e?void 0:e.absoluteValue.finite)&&this}}],[{key:"between",value:function(t,n){return void 0===t||void 0===n?new e(void 0):(t=v.from(t),n=v.from(n),t.infinite&&n.infinite?new e(void 0):t.infinite?new e({sign:"+",absoluteValue:t}):n.infinite?new e({sign:"-",absoluteValue:n}):t.gt(n)?new e({sign:"+",absoluteValue:v.from(t).sub(n)}):n.gt(t)?new e({sign:"-",absoluteValue:v.from(n).sub(t)}):new e({sign:"",absoluteValue:v.ZERO}))}}]),e}();t.Difference=T;var j=function(){function e(t){i(this,e),this._percent=t.infinite||t.mul&&t.mul(100)||t}return r(e,[{key:"nonZeroish",value:function(e){var t,n="0.".concat("0".repeat(e),"5");if(null===(t=this._percent.absoluteValue)||void 0===t?void 0:t.gte(n))return this}},{key:"toString",value:function(e){return this._percent.toString(e)+(this._percent.absoluteValue&&!this._percent.infinite?"%":"")}},{key:"prettify",value:function(){var e,t;return(null===(e=this._percent.absoluteValue)||void 0===e?void 0:e.gte("1000"))?this.toString(0):(null===(t=this._percent.absoluteValue)||void 0===t?void 0:t.gte("10"))?this.toString(1):this.toString(2)}}]),e}();t.Percent=j},,,,,,,,,,,,,,function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.UnsupportedNetworkError=t._connectByChainId=void 0;var r=n(79);Object.defineProperty(t,"_connectByChainId",{enumerable:!0,get:function(){return r._connectByChainId}}),Object.defineProperty(t,"UnsupportedNetworkError",{enumerable:!0,get:function(){return r.UnsupportedNetworkError}}),i(n(246),t),i(n(151),t),i(n(247),t),i(n(152),t),i(n(153),t),i(n(154),t),i(n(250),t)},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.promiseAllValues=t.panic=t.decimalify=t.numberify=void 0;var a=n(8);t.numberify=function(e){return e.toNumber()};t.decimalify=function(e){return a.Decimal.fromBigNumberString(e.toHexString())};t.panic=function(e){throw e};t.promiseAllValues=function(e){var t=Object.keys(e);return Promise.all(Object.values(e)).then((function(e){return Object.fromEntries(e.map((function(e,n){return[t[n],e]})))}))}},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MINIMUM_REDEMPTION_RATE=t.MAXIMUM_BORROWING_RATE=t.MINIMUM_BORROWING_RATE=t.LUSD_MINIMUM_DEBT=t.LUSD_MINIMUM_NET_DEBT=t.LUSD_LIQUIDATION_RESERVE=t.MINIMUM_COLLATERAL_RATIO=t.CRITICAL_COLLATERAL_RATIO=void 0;var a=n(80);t.CRITICAL_COLLATERAL_RATIO=a.Decimal.from(1.5),t.MINIMUM_COLLATERAL_RATIO=a.Decimal.from(1.1),t.LUSD_LIQUIDATION_RESERVE=a.Decimal.from(200),t.LUSD_MINIMUM_NET_DEBT=a.Decimal.from(1800),t.LUSD_MINIMUM_DEBT=t.LUSD_LIQUIDATION_RESERVE.add(t.LUSD_MINIMUM_NET_DEBT),t.MINIMUM_BORROWING_RATE=a.Decimal.from(.005),t.MAXIMUM_BORROWING_RATE=a.Decimal.from(.05),t.MINIMUM_REDEMPTION_RATE=a.Decimal.from(.005)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useLiquityStore=void 0;var a=n(1),i=n(156);t.useLiquityStore=function(){var e=a.useContext(i.LiquityStoreContext);if(!e)throw new Error("You must provide a LiquityStore via LiquityStoreProvider");return e}},,,,function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(184),t),i(n(145),t),i(n(149),t)},,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a=n(5),i=n(53),r=n(45),s=n(89),o=n(36),u=n(39),l=n(141),c=n(116),d=n(78),p=n(56),y=n(57);Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketAugmentedWeb3Provider=t.WebSocketAugmented=t.isWebSocketAugmentedProvider=void 0;var f=n(81),b=n(2),m=n(149),h=[];t.isWebSocketAugmentedProvider=function(e){return h.some((function(t){return e instanceof t}))};var v=function(e){return"string"===typeof e&&32===b.hexDataLength(e)},T=function(e){return new Promise((function(t){return setTimeout(t,e)}))},j=function(e){return function(t){return function(n,a){var i=a.isActive;e(n).then((function(e){null!==e&&i()&&t(e)}))}}},g=function(e){return function(t,n){e(t)}},x=function(e){return function(t,n){var a=n.removeMe;e(t),a()}};t.WebSocketAugmented=function(e){var t=function(e){p(n,e);var t=y(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments))._seenBlock=0,e._blockListenerScheduled=!1,e._blockListeners=new Map,e._blockListener=e._onBlock.bind(l(e)),e}return u(n,[{key:"openWebSocket",value:function(e,t){this._wsProvider=new m.WebSocketProvider(e,t),this._wsProvider.onClose=this._onWebSocketClose.bind(this),this._wsParams=[e,t],this._switchover()}},{key:"_onWebSocketClose",value:function(){var e=this;this.closeWebSocket(),console.warn("WebSocketProvider disconnected. Retrying in 10 seconds."),this._reconnectTimerId=setTimeout((function(){return e.openWebSocket.apply(e,s(e._wsParams))}),1e4)}},{key:"closeWebSocket",value:function(){this._wsProvider&&(this._wsProvider.onClose=null,this._wsProvider.close(1e3),this._wsProvider=void 0,this._switchover(),void 0!==this._reconnectTimerId&&(clearTimeout(this._reconnectTimerId),this._reconnectTimerId=void 0))}},{key:"_switchover",value:function(){this._blockListeners.size>0&&(this._wsProvider&&c(d(n.prototype),"off",this).call(this,"block",this._blockListener),this._startBlockEvents())}},{key:"_onBlock",value:function(e){var t=this;this._seenBlock=e,this._blockListenerScheduled||(this._blockListenerScheduled=!0,setTimeout((function(){t._blockListenerScheduled=!1,s(t._blockListeners).forEach((function(e){return(0,r(e,2)[1])(t._seenBlock)}))}),50))}},{key:"_retrySeenBlock",value:function(){var e=i(a.mark((function e(t,n){var i;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0;case 1:return e.prev=1,e.next=4,t();case 4:return i=e.sent,e.abrupt("return",i);case 9:if(e.prev=9,e.t0=e.catch(1),this._seenBlock===n&&("object"===typeof(a=e.t0)&&"string"===typeof a.message&&(a.message.includes("header not found")||a.message.includes("request is not supported because your node is running with state pruning")))){e.next=13;break}throw e.t0;case 13:return e.next=15,T(200);case 15:e.next=1;break;case 18:case"end":return e.stop()}var a}),e,this,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"call",value:function(){var e=i(a.mark((function e(t,i){var r,s,o=this;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i;case 2:return r=e.sent,s=function(){var e;return(null===(e=o._wsProvider)||void 0===e?void 0:e.isReady)?o._wsProvider.call(t,r):c(d(n.prototype),"call",o).call(o,t,r)},e.abrupt("return",r===this._seenBlock?this._retrySeenBlock(s,this._seenBlock):s());case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getBalance",value:function(){var e=i(a.mark((function e(t,i){var r,s,o=this;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i;case 2:return r=e.sent,s=function(){var e;return(null===(e=o._wsProvider)||void 0===e?void 0:e.isReady)?o._wsProvider.getBalance(t,r):c(d(n.prototype),"getBalance",o).call(o,t,r)},e.abrupt("return",r===this._seenBlock?this._retrySeenBlock(s,this._seenBlock):s());case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_startBlockEvents",value:function(){this._wsProvider?(console.log("Listening for new blocks on WebSocketProvider"),this._wsProvider.on("block",this._blockListener)):(console.log("Listening for new blocks on basic Provider"),c(d(n.prototype),"on",this).call(this,"block",this._blockListener))}},{key:"_stopBlockEvents",value:function(){this._wsProvider?this._wsProvider.off("block",this._blockListener):c(d(n.prototype),"off",this).call(this,"block",this._blockListener)}},{key:"_wrap",value:function(e,t){var n=this;return[e,function(a){return t(function(e){return function(t){setTimeout((function(){e(t)}),0)}}(e))(a,{isActive:function(){return n._blockListeners.has(e)},removeMe:function(){return n._blockListeners.delete(e)}})}]}},{key:"on",value:function(e,t){if(v(e)){var a=this._getTransactionReceiptFromLatest.bind(this,e),i=this._wrap(t,j(a)),o=r(i,2)[1];return o(void 0),this._addBlockListener(t,o)}return"block"===e?this._addBlockListener.apply(this,s(this._wrap(t,g))):c(d(n.prototype),"on",this).call(this,e,t)}},{key:"_addBlockListener",value:function(e,t){return this._blockListeners.has(e)||(this._blockListeners.set(e,t),1===this._blockListeners.size&&this._startBlockEvents()),this}},{key:"once",value:function(e,t){if(v(e)){var a=this._getTransactionReceiptFromLatest.bind(this,e),i=this._wrap(t,(u=j(a),l=x,function(e){return function(t,n){u((function(t){return l(e)(t,n)}))(t,n)}})),o=r(i,2)[1];return o(void 0),this._addBlockListener(t,o)}return"block"===e?this._addBlockListener.apply(this,s(this._wrap(t,x))):c(d(n.prototype),"once",this).call(this,e,t);var u,l}},{key:"off",value:function(e,t){return v(e)||"block"===e?this._removeBlockListener(t):c(d(n.prototype),"off",this).call(this,e,t)}},{key:"_removeBlockListener",value:function(e){return this._blockListeners.has(e)&&(this._blockListeners.delete(e),0===this._blockListeners.size&&this._stopBlockEvents()),this}},{key:"getTransaction",value:function(){var e=i(a.mark((function e(t){var i,r,o,u,l;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[c(d(n.prototype),"getTransaction",this).call(this,t)].concat(s((null===(i=this._wsProvider)||void 0===i?void 0:i.isReady)?[this._wsProvider.getTransaction(t)]:[])),e.next=3,Promise.race(o);case 3:if(null===(u=e.sent)||void 0===u){e.next=8;break}e.t1=u,e.next=11;break;case 8:return e.next=10,Promise.all(o);case 10:e.t1=e.sent.find((function(e){return null!==e}));case 11:if(e.t2=r=e.t1,e.t0=null!==e.t2,!e.t0){e.next=15;break}e.t0=void 0!==r;case 15:if(!e.t0){e.next=19;break}e.t3=r,e.next=20;break;case 19:e.t3=null;case 20:return l=e.t3,e.abrupt("return",l);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransactionReceipt",value:function(e){var t;return(null===(t=this._wsProvider)||void 0===t?void 0:t.isReady)?this._wsProvider.getTransactionReceipt(e):c(d(n.prototype),"getTransactionReceipt",this).call(this,e)}},{key:"getTransactionCount",value:function(e,t){var a;return(null===(a=this._wsProvider)||void 0===a?void 0:a.isReady)?this._wsProvider.getTransactionCount(e,t):c(d(n.prototype),"getTransactionCount",this).call(this,e,t)}},{key:"getBlock",value:function(e){var t;return(null===(t=this._wsProvider)||void 0===t?void 0:t.isReady)?this._wsProvider.getBlock(e):c(d(n.prototype),"getBlock",this).call(this,e)}},{key:"getBlockWithTransactions",value:function(e){var t;return(null===(t=this._wsProvider)||void 0===t?void 0:t.isReady)?this._wsProvider.getBlockWithTransactions(e):c(d(n.prototype),"getBlockWithTransactions",this).call(this,e)}},{key:"_blockContainsTx",value:function(){var e=i(a.mark((function e(t,n){var i;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=null;case 1:if(i){e.next=9;break}return e.next=4,T(200);case 4:return e.next=6,this.getBlock(t);case 6:i=e.sent,e.next=1;break;case 9:return e.abrupt("return",i.transactions.some((function(e){return e===n})));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getTransactionReceiptFromLatest",value:function(){var e=i(a.mark((function e(t,n){var i;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:t=e.sent,0;case 4:return e.next=6,this.getTransactionReceipt(t);case 6:if(i=e.sent,e.t1=void 0===n,e.t1){e.next=15;break}if(e.t2=null===i,!e.t2){e.next=14;break}return e.next=13,this._blockContainsTx(n,t);case 13:e.t2=!e.sent;case 14:e.t1=e.t2;case 15:if(e.t0=e.t1,e.t0){e.next=18;break}e.t0=null!==i&&i.blockNumber+i.confirmations-1>=n;case 18:if(!e.t0){e.next=21;break}return e.abrupt("return",i);case 21:return e.next=23,T(200);case 23:e.next=4;break;case 26:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"waitForTransaction",value:function(){var e=i(a.mark((function e(t,i,r){var s,o,u=this;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===r){e.next=2;break}return e.abrupt("return",c(d(n.prototype),"waitForTransaction",this).call(this,t,i,r));case 2:s=void 0;case 3:return e.next=5,this._getTransactionReceiptFromLatest(t,s);case 5:if(null===(o=e.sent)||!(void 0===i||o.confirmations>=i)){e.next=8;break}return e.abrupt("return",o);case 8:return e.next=10,new Promise((function(e){return u.once("block",e)}));case 10:s=e.sent;case 11:e.next=3;break;case 13:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()}]),n}(e);return h.push(t),t},t.WebSocketAugmentedWeb3Provider=t.WebSocketAugmented(f.Web3Provider)},,,,function(e,t,n){"use strict";var a=n(5),i=n(53),r=n(36),s=n(39),o=n(56),u=n(57);Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketProvider=void 0;var l=function(e){o(n,e);var t=u(n);function n(){return r(this,n),t.apply(this,arguments)}return s(n,[{key:"isReady",get:function(){return this._websocket.readyState===WebSocket.OPEN}},{key:"onClose",set:function(e){this._websocket.onclose=e}},{key:"close",value:function(e){this._websocket.close(e)}},{key:"detectNetwork",value:function(){var e=i(a.mark((function e(){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.network);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(n(81).WebSocketProvider);t.WebSocketProvider=l},function(e,t,n){"use strict";var a=n(45),i=n(36),r=n(39),s=n(56),o=n(57),u=n(5),l=n(59),c=n(53),d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t._connectToContracts=t._uniTokenIsMock=t._priceFeedIsTestnet=t._LiquityContract=void 0;var p=n(72),y=d(n(225)),f=d(n(226)),b=d(n(227)),m=d(n(228)),h=d(n(229)),v=d(n(230)),T=d(n(231)),j=d(n(232)),g=d(n(233)),x=d(n(234)),w=d(n(235)),O=d(n(236)),_=d(n(237)),k=d(n(238)),S=d(n(239)),D=d(n(240)),E=d(n(241)),C=d(n(242)),A=d(n(243)),L=d(n(244)),M=function(e){s(n,e);var t=o(n);function n(e,a,r){var s,o,d;return i(this,n),(s=t.call(this,e,a,r)).estimateAndPopulate=(o=s.estimateGas,d=s.populateTransaction,Object.fromEntries(Object.keys(o).map((function(e){return[e,function(){var t=c(u.mark((function t(n,a){var i,r,s,c,p=arguments;return u.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i=p.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=p[s];if(void 0!==n.gasLimit){t.next=6;break}return t.next=4,o[e].apply(o,r.concat([n]));case 4:c=t.sent,n=l(l({},n),{},{gasLimit:a(c)});case 6:return t.abrupt("return",d[e].apply(d,r.concat([n])));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()]})))),s}return r(n,[{key:"extractEvents",value:function(e,t){var n=this;return e.filter((function(e){return e.address===n.address})).map((function(e){return n.interface.parseLog(e)})).filter((function(e){return e.name===t}))}}]),n}(p.Contract);t._LiquityContract=M;t._priceFeedIsTestnet=function(e){return"setPrice"in e};t._uniTokenIsMock=function(e){return"mint"in e};t._connectToContracts=function(e,t){var n,i,r,s,o=t.addresses,u=t._priceFeedIsTestnet,l=t._uniTokenIsMock,c=(n=u,i=l,{activePool:y.default,borrowerOperations:f.default,troveManager:b.default,lusdToken:m.default,communityIssuance:v.default,defaultPool:T.default,lqtyToken:j.default,hintHelpers:g.default,lockupContractFactory:x.default,lqtyStaking:w.default,multiTroveGetter:O.default,priceFeed:n?k.default:_.default,sortedTroves:S.default,stabilityPool:D.default,gasPool:E.default,collSurplusPool:h.default,unipool:C.default,uniToken:i?L.default:A.default});return r=o,s=function(t,n){return new M(t,c[n],e)},Object.fromEntries(Object.entries(r).map((function(e){var t=a(e,2),n=t[0],i=t[1];return[n,s(i,n)]})))}},function(e,t,n){"use strict";var a=n(5),i=n(59),r=n(45),s=n(53),o=n(36),u=n(39);Object.defineProperty(t,"__esModule",{value:!0}),t.ReadableEthersLiquity=void 0;var l,c=n(8),d=n(97),p=n(79),y=n(152),f=c.Decimal.from("0.999037758833783000"),b=c.Decimal.from(2);!function(e){e[e.nonExistent=0]="nonExistent",e[e.active=1]="active",e[e.closedByOwner=2]="closedByOwner",e[e.closedByLiquidation=3]="closedByLiquidation",e[e.closedByRedemption=4]="closedByRedemption"}(l||(l={}));var m=function(e){return e===l.nonExistent?"nonExistent":e===l.active?"open":e===l.closedByOwner?"closedByOwner":e===l.closedByLiquidation?"closedByLiquidation":e===l.closedByRedemption?"closedByRedemption":d.panic(new Error("invalid backendStatus ".concat(e)))},h=function(e){return new Date(1e3*e)},v=["ascendingCollateralRatio","descendingCollateralRatio"],T=function(e,t){if(void 0!==e[t]){if(!Number.isInteger(e[t]))throw new Error("".concat(t," must be an integer"));if(e[t]<0)throw new Error("".concat(t," must not be negative"))}},j=function(){function e(t){o(this,e),this.connection=t}return u(e,[{key:"hasStore",value:function(){return!1}},{key:"getTotalRedistributed",value:function(){var e=s(a.mark((function e(t){var n,s,o,u,l,y;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p._getContracts(this.connection),s=n.troveManager,e.next=3,Promise.all([s.L_ETH(i({},t)).then(d.decimalify),s.L_LUSDDebt(i({},t)).then(d.decimalify)]);case 3:return o=e.sent,u=r(o,2),l=u[0],y=u[1],e.abrupt("return",new c.Trove(l,y));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTroveBeforeRedistribution",value:function(){var e=s(a.mark((function e(t,n){var s,o,u,y,f,b;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==t&&void 0!==t||(t=p._requireAddress(this.connection)),s=p._getContracts(this.connection),o=s.troveManager,e.next=4,Promise.all([o.Troves(t,i({},n)),o.rewardSnapshots(t,i({},n))]);case 4:if(u=e.sent,y=r(u,2),f=y[0],b=y[1],f.status!==l.active){e.next=12;break}return e.abrupt("return",new c.TroveWithPendingRedistribution(t,m(f.status),d.decimalify(f.coll),d.decimalify(f.debt),d.decimalify(f.stake),new c.Trove(d.decimalify(b.ETH),d.decimalify(b.LUSDDebt))));case 12:return e.abrupt("return",new c.TroveWithPendingRedistribution(t,m(f.status)));case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTrove",value:function(){var e=s(a.mark((function e(t,n){var i,s,o,u;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.getTroveBeforeRedistribution(t,n),this.getTotalRedistributed(n)]);case 2:return i=e.sent,s=r(i,2),o=s[0],u=s[1],e.abrupt("return",o.applyRedistribution(u));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNumberOfTroves",value:function(){var e=s(a.mark((function e(t){var n,r;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p._getContracts(this.connection),r=n.troveManager,e.next=3,r.getTroveOwnersCount(i({},t));case 3:return e.abrupt("return",e.sent.toNumber());case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPrice",value:function(e){return p._getContracts(this.connection).priceFeed.callStatic.fetchPrice(i({},e)).then(d.decimalify)}},{key:"_getActivePool",value:function(){var e=s(a.mark((function e(t){var n,s,o,u,l,y;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p._getContracts(this.connection),s=n.activePool,e.next=3,Promise.all([s.getETH(i({},t)),s.getLUSDDebt(i({},t))].map((function(e){return e.then(d.decimalify)})));case 3:return o=e.sent,u=r(o,2),l=u[0],y=u[1],e.abrupt("return",new c.Trove(l,y));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getDefaultPool",value:function(){var e=s(a.mark((function e(t){var n,s,o,u,l,y;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p._getContracts(this.connection),s=n.defaultPool,e.next=3,Promise.all([s.getETH(i({},t)),s.getLUSDDebt(i({},t))].map((function(e){return e.then(d.decimalify)})));case 3:return o=e.sent,u=r(o,2),l=u[0],y=u[1],e.abrupt("return",new c.Trove(l,y));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTotal",value:function(){var e=s(a.mark((function e(t){var n,i,s,o;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getActivePool(t),this._getDefaultPool(t)]);case 2:return n=e.sent,i=r(n,2),s=i[0],o=i[1],e.abrupt("return",s.add(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStabilityDeposit",value:function(){var e=s(a.mark((function e(t,n){var s,o,u,l,y,f,b,m,h,v;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==t&&void 0!==t||(t=p._requireAddress(this.connection)),s=p._getContracts(this.connection),o=s.stabilityPool,e.next=4,Promise.all([o.deposits(t,i({},n)),o.getCompoundedLUSDDeposit(t,i({},n)),o.getDepositorETHGain(t,i({},n)),o.getDepositorLQTYGain(t,i({},n))]);case 4:return u=e.sent,l=r(u,4),y=l[0],f=y.frontEndTag,b=y.initialValue,m=l[1],h=l[2],v=l[3],e.abrupt("return",new c.StabilityDeposit(d.decimalify(b),d.decimalify(m),d.decimalify(h),d.decimalify(v),f));case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getRemainingStabilityPoolLQTYReward",value:function(){var e=s(a.mark((function e(t){var n,r,s,o;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p._getContracts(this.connection),r=n.communityIssuance,s=this.connection.totalStabilityPoolLQTYReward,e.t0=d,e.next=5,r.totalLQTYIssued(i({},t));case 5:return e.t1=e.sent,o=e.t0.decimalify.call(e.t0,e.t1),e.abrupt("return",s.sub(o));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLUSDInStabilityPool",value:function(e){return p._getContracts(this.connection).stabilityPool.getTotalLUSDDeposits(i({},e)).then(d.decimalify)}},{key:"getLUSDBalance",value:function(e,t){return null!==e&&void 0!==e||(e=p._requireAddress(this.connection)),p._getContracts(this.connection).lusdToken.balanceOf(e,i({},t)).then(d.decimalify)}},{key:"getLQTYBalance",value:function(e,t){return null!==e&&void 0!==e||(e=p._requireAddress(this.connection)),p._getContracts(this.connection).lqtyToken.balanceOf(e,i({},t)).then(d.decimalify)}},{key:"getUniTokenBalance",value:function(e,t){return null!==e&&void 0!==e||(e=p._requireAddress(this.connection)),p._getContracts(this.connection).uniToken.balanceOf(e,i({},t)).then(d.decimalify)}},{key:"getUniTokenAllowance",value:function(e,t){null!==e&&void 0!==e||(e=p._requireAddress(this.connection));var n=p._getContracts(this.connection),a=n.uniToken,r=n.unipool;return a.allowance(e,r.address,i({},t)).then(d.decimalify)}},{key:"_getRemainingLiquidityMiningLQTYRewardCalculator",value:function(){var e=s(a.mark((function e(t){var n,s,o,u,l,c,y,f;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p._getContracts(this.connection),s=n.unipool,e.next=3,Promise.all([s.totalSupply(i({},t)),s.rewardRate(i({},t)).then(d.decimalify),s.periodFinish(i({},t)).then(d.numberify),s.lastUpdateTime(i({},t)).then(d.numberify)]);case 3:return o=e.sent,u=r(o,4),l=u[0],c=u[1],y=u[2],f=u[3],e.abrupt("return",(function(e){return c.mul(Math.max(0,y-(l.isZero()?f:e)))}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRemainingLiquidityMiningLQTYReward",value:function(){var e=s(a.mark((function e(t){var n,i,s,o;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getRemainingLiquidityMiningLQTYRewardCalculator(t),this._getBlockTimestamp(null===t||void 0===t?void 0:t.blockTag)]);case 2:return n=e.sent,i=r(n,2),s=i[0],o=i[1],e.abrupt("return",s(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLiquidityMiningStake",value:function(e,t){return null!==e&&void 0!==e||(e=p._requireAddress(this.connection)),p._getContracts(this.connection).unipool.balanceOf(e,i({},t)).then(d.decimalify)}},{key:"getTotalStakedUniTokens",value:function(e){return p._getContracts(this.connection).unipool.totalSupply(i({},e)).then(d.decimalify)}},{key:"getLiquidityMiningLQTYReward",value:function(e,t){return null!==e&&void 0!==e||(e=p._requireAddress(this.connection)),p._getContracts(this.connection).unipool.earned(e,i({},t)).then(d.decimalify)}},{key:"getCollateralSurplusBalance",value:function(e,t){return null!==e&&void 0!==e||(e=p._requireAddress(this.connection)),p._getContracts(this.connection).collSurplusPool.getCollateral(e,i({},t)).then(d.decimalify)}},{key:"getTroves",value:function(){var e=s(a.mark((function e(t,n){var s,o,u,l,c,d,y,f,b;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=p._getContracts(this.connection),l=u.multiTroveGetter,T(t,"first"),T(t,"startingAt"),v.includes(t.sortedBy)){e.next=5;break}throw new Error("sortedBy must be one of: ".concat(v.map((function(e){return'"'.concat(e,'"')})).join(", ")));case 5:return e.next=7,Promise.all([t.beforeRedistribution?void 0:this.getTotalRedistributed(i({},n)),l.getMultipleSortedTroves("descendingCollateralRatio"===t.sortedBy?null!==(s=t.startingAt)&&void 0!==s?s:0:-((null!==(o=t.startingAt)&&void 0!==o?o:0)+1),t.first,i({},n))]);case 7:if(c=e.sent,d=r(c,2),y=d[0],f=d[1],b=g(f),!y){e.next=16;break}return e.abrupt("return",b.map((function(e){return e.applyRedistribution(y)})));case 16:return e.abrupt("return",b);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getBlockTimestamp",value:function(e){return p._getBlockTimestamp(this.connection,e)}},{key:"_getFeesFactory",value:function(){var e=s(a.mark((function e(t){var n,s,o,u,l,y;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p._getContracts(this.connection),s=n.troveManager,e.next=3,Promise.all([s.lastFeeOperationTime(i({},t)),s.baseRate(i({},t)).then(d.decimalify)]);case 3:return o=e.sent,u=r(o,2),l=u[0],y=u[1],e.abrupt("return",(function(e,t){return new c.Fees(y,f,b,h(l.toNumber()),h(e),t)}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFees",value:function(){var e=s(a.mark((function e(t){var n,i,s,o,u,l;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getFeesFactory(t),this.getTotal(t),this.getPrice(t),this._getBlockTimestamp(null===t||void 0===t?void 0:t.blockTag)]);case 2:return n=e.sent,i=r(n,4),s=i[0],o=i[1],u=i[2],l=i[3],e.abrupt("return",s(l,o.collateralRatioIsBelowCritical(u)));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLQTYStake",value:function(){var e=s(a.mark((function e(t,n){var s,o,u,l,y,f,b;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==t&&void 0!==t||(t=p._requireAddress(this.connection)),s=p._getContracts(this.connection),o=s.lqtyStaking,e.next=4,Promise.all([o.stakes(t,i({},n)),o.getPendingETHGain(t,i({},n)),o.getPendingLUSDGain(t,i({},n))].map((function(e){return e.then(d.decimalify)})));case 4:return u=e.sent,l=r(u,3),y=l[0],f=l[1],b=l[2],e.abrupt("return",new c.LQTYStake(y,f,b));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTotalStakedLQTY",value:function(){var e=s(a.mark((function e(t){var n,r;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p._getContracts(this.connection),r=n.lqtyStaking,e.abrupt("return",r.totalLQTYStaked(i({},t)).then(d.decimalify));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFrontendStatus",value:function(){var e=s(a.mark((function e(t,n){var r,s,o,u,l;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==t&&void 0!==t||(t=p._requireFrontendAddress(this.connection)),r=p._getContracts(this.connection),s=r.stabilityPool,e.next=4,s.frontEnds(t,i({},n));case 4:return o=e.sent,u=o.registered,l=o.kickbackRate,e.abrupt("return",u?{status:"registered",kickbackRate:d.decimalify(l)}:{status:"unregistered"});case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_from",value:function(t){var n=new e(t);return"blockPolled"===t.useStore?new x(n):n}},{key:"connect",value:function(){var t=s(a.mark((function t(n,i){return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,p._connect(n,i);case 3:return t.t1=t.sent,t.abrupt("return",t.t0._from.call(t.t0,t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();t.ReadableEthersLiquity=j;var g=function(e){return e.map((function(e){return new c.TroveWithPendingRedistribution(e.owner,"open",d.decimalify(e.coll),d.decimalify(e.debt),d.decimalify(e.stake),new c.Trove(d.decimalify(e.snapshotETH),d.decimalify(e.snapshotLUSDDebt)))}))},x=function(){function e(t){o(this,e);var n=new y.BlockPolledLiquityStore(t);this.store=n,this.connection=t.connection,this._readable=t}return u(e,[{key:"_blockHit",value:function(e){return!e||void 0===e.blockTag||e.blockTag===this.store.state.blockTag}},{key:"_userHit",value:function(e,t){return this._blockHit(t)&&(void 0===e||e===this.store.connection.userAddress)}},{key:"_frontendHit",value:function(e,t){return this._blockHit(t)&&(void 0===e||e===this.store.connection.frontendTag)}},{key:"hasStore",value:function(e){return void 0===e||"blockPolled"===e}},{key:"getTotalRedistributed",value:function(){var e=s(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._blockHit(t)?this.store.state.totalRedistributed:this._readable.getTotalRedistributed(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTroveBeforeRedistribution",value:function(){var e=s(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._userHit(t,n)?this.store.state.troveBeforeRedistribution:this._readable.getTroveBeforeRedistribution(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTrove",value:function(){var e=s(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._userHit(t,n)?this.store.state.trove:this._readable.getTrove(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNumberOfTroves",value:function(){var e=s(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._blockHit(t)?this.store.state.numberOfTroves:this._readable.getNumberOfTroves(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPrice",value:function(){var e=s(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._blockHit(t)?this.store.state.price:this._readable.getPrice(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTotal",value:function(){var e=s(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._blockHit(t)?this.store.state.total:this._readable.getTotal(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStabilityDeposit",value:function(){var e=s(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._userHit(t,n)?this.store.state.stabilityDeposit:this._readable.getStabilityDeposit(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getRemainingStabilityPoolLQTYReward",value:function(){var e=s(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._blockHit(t)?this.store.state.remainingStabilityPoolLQTYReward:this._readable.getRemainingStabilityPoolLQTYReward(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLUSDInStabilityPool",value:function(){var e=s(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._blockHit(t)?this.store.state.lusdInStabilityPool:this._readable.getLUSDInStabilityPool(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLUSDBalance",value:function(){var e=s(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._userHit(t,n)?this.store.state.lusdBalance:this._readable.getLUSDBalance(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getLQTYBalance",value:function(){var e=s(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._userHit(t,n)?this.store.state.lqtyBalance:this._readable.getLQTYBalance(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getUniTokenBalance",value:function(){var e=s(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._userHit(t,n)?this.store.state.uniTokenBalance:this._readable.getUniTokenBalance(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getUniTokenAllowance",value:function(){var e=s(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._userHit(t,n)?this.store.state.uniTokenAllowance:this._readable.getUniTokenAllowance(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getRemainingLiquidityMiningLQTYReward",value:function(){var e=s(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._blockHit(t)?this.store.state.remainingLiquidityMiningLQTYReward:this._readable.getRemainingLiquidityMiningLQTYReward(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLiquidityMiningStake",value:function(){var e=s(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._userHit(t,n)?this.store.state.liquidityMiningStake:this._readable.getLiquidityMiningStake(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTotalStakedUniTokens",value:function(){var e=s(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._blockHit(t)?this.store.state.totalStakedUniTokens:this._readable.getTotalStakedUniTokens(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLiquidityMiningLQTYReward",value:function(){var e=s(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._userHit(t,n)?this.store.state.liquidityMiningLQTYReward:this._readable.getLiquidityMiningLQTYReward(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getCollateralSurplusBalance",value:function(){var e=s(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._userHit(t,n)?this.store.state.collateralSurplusBalance:this._readable.getCollateralSurplusBalance(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getBlockTimestamp",value:function(){var e=s(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._blockHit({blockTag:t})?this.store.state.blockTimestamp:this._readable._getBlockTimestamp(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getFeesFactory",value:function(){var e=s(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._blockHit(t)?this.store.state._feesFactory:this._readable._getFeesFactory(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFees",value:function(){var e=s(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._blockHit(t)?this.store.state.fees:this._readable.getFees(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLQTYStake",value:function(){var e=s(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._userHit(t,n)?this.store.state.lqtyStake:this._readable.getLQTYStake(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTotalStakedLQTY",value:function(){var e=s(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._blockHit(t)?this.store.state.totalStakedLQTY:this._readable.getTotalStakedLQTY(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFrontendStatus",value:function(){var e=s(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._frontendHit(t,n)?this.store.state.frontend:this._readable.getFrontendStatus(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTroves",value:function(e,t){return this._readable.getTroves(e,t)}},{key:"_getActivePool",value:function(){throw new Error("Method not implemented.")}},{key:"_getDefaultPool",value:function(){throw new Error("Method not implemented.")}},{key:"_getRemainingLiquidityMiningLQTYRewardCalculator",value:function(){throw new Error("Method not implemented.")}}]),e}()},function(e,t,n){"use strict";var a=n(89),i=n(59),r=n(96),s=n(5),o=n(53),u=n(36),l=n(39),c=n(56),d=n(57);Object.defineProperty(t,"__esModule",{value:!0}),t.BlockPolledLiquityStore=void 0;var p=n(49),y=n(8),f=n(97),b=n(79),m=function(e){c(n,e);var t=d(n);function n(e){var a;return u(this,n),(a=t.call(this)).connection=e.connection,a._readable=e,a._provider=b._getProvider(e.connection),a}return l(n,[{key:"_getRiskiestTroveBeforeRedistribution",value:function(){var e=o(s.mark((function e(t){var n;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._readable.getTroves({first:1,sortedBy:"ascendingCollateralRatio",beforeRedistribution:!0},t);case 2:if(0!==(n=e.sent).length){e.next=5;break}return e.abrupt("return",new y.TroveWithPendingRedistribution(p.AddressZero,"nonExistent"));case 5:return e.abrupt("return",n[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=o(s.mark((function e(t){var n,a,o,u,l,c,d,b;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.connection,a=n.userAddress,o=n.frontendTag,e.next=3,f.promiseAllValues(i({blockTimestamp:this._readable._getBlockTimestamp(t),_feesFactory:this._readable._getFeesFactory({blockTag:t}),calculateRemainingLQTY:this._readable._getRemainingLiquidityMiningLQTYRewardCalculator({blockTag:t}),price:this._readable.getPrice({blockTag:t}),numberOfTroves:this._readable.getNumberOfTroves({blockTag:t}),totalRedistributed:this._readable.getTotalRedistributed({blockTag:t}),total:this._readable.getTotal({blockTag:t}),lusdInStabilityPool:this._readable.getLUSDInStabilityPool({blockTag:t}),totalStakedLQTY:this._readable.getTotalStakedLQTY({blockTag:t}),_riskiestTroveBeforeRedistribution:this._getRiskiestTroveBeforeRedistribution({blockTag:t}),totalStakedUniTokens:this._readable.getTotalStakedUniTokens({blockTag:t}),remainingStabilityPoolLQTYReward:this._readable.getRemainingStabilityPoolLQTYReward({blockTag:t}),frontend:o?this._readable.getFrontendStatus(o,{blockTag:t}):{status:"unregistered"}},a?{accountBalance:this._provider.getBalance(a,t).then(f.decimalify),lusdBalance:this._readable.getLUSDBalance(a,{blockTag:t}),lqtyBalance:this._readable.getLQTYBalance(a,{blockTag:t}),uniTokenBalance:this._readable.getUniTokenBalance(a,{blockTag:t}),uniTokenAllowance:this._readable.getUniTokenAllowance(a,{blockTag:t}),liquidityMiningStake:this._readable.getLiquidityMiningStake(a,{blockTag:t}),liquidityMiningLQTYReward:this._readable.getLiquidityMiningLQTYReward(a,{blockTag:t}),collateralSurplusBalance:this._readable.getCollateralSurplusBalance(a,{blockTag:t}),troveBeforeRedistribution:this._readable.getTroveBeforeRedistribution(a,{blockTag:t}),stabilityDeposit:this._readable.getStabilityDeposit(a,{blockTag:t}),lqtyStake:this._readable.getLQTYStake(a,{blockTag:t}),ownFrontend:this._readable.getFrontendStatus(a,{blockTag:t})}:{accountBalance:y.Decimal.ZERO,lusdBalance:y.Decimal.ZERO,lqtyBalance:y.Decimal.ZERO,uniTokenBalance:y.Decimal.ZERO,uniTokenAllowance:y.Decimal.ZERO,liquidityMiningStake:y.Decimal.ZERO,liquidityMiningLQTYReward:y.Decimal.ZERO,collateralSurplusBalance:y.Decimal.ZERO,troveBeforeRedistribution:new y.TroveWithPendingRedistribution(p.AddressZero,"nonExistent"),stabilityDeposit:new y.StabilityDeposit(y.Decimal.ZERO,y.Decimal.ZERO,y.Decimal.ZERO,y.Decimal.ZERO,p.AddressZero),lqtyStake:new y.LQTYStake,ownFrontend:{status:"unregistered"}}));case 3:return u=e.sent,l=u.blockTimestamp,c=u._feesFactory,d=u.calculateRemainingLQTY,b=r(u,["blockTimestamp","_feesFactory","calculateRemainingLQTY"]),e.abrupt("return",[i(i({},b),{},{_feesInNormalMode:c(l,!1),remainingLiquidityMiningLQTYReward:d(l)}),{blockTag:t,blockTimestamp:l,_feesFactory:c}]);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_doStart",value:function(){var e=this;this._get().then((function(t){e._loaded||e._load.apply(e,a(t))}));var t=function(){var t=o(s.mark((function t(n){var i;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._get(n);case 2:i=t.sent,e._loaded?e._update.apply(e,a(i)):e._load.apply(e,a(i));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return this._provider.on("block",t),function(){e._provider.off("block",t)}}},{key:"_reduceExtra",value:function(e,t){var n,a,i;return{blockTag:null!==(n=t.blockTag)&&void 0!==n?n:e.blockTag,blockTimestamp:null!==(a=t.blockTimestamp)&&void 0!==a?a:e.blockTimestamp,_feesFactory:null!==(i=t._feesFactory)&&void 0!==i?i:e._feesFactory}}}]),n}(y.LiquityStore);t.BlockPolledLiquityStore=m},function(e,t,n){"use strict";var a=n(89),i=n(96),r=n(248),s=n(59),o=n(45),u=n(53),l=n(39),c=n(36),d=n(56),p=n(57),y=n(119),f=n(5),b=f.mark(P),m=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PopulatableEthersLiquity=t.PopulatedEthersRedemption=t.PopulatedEthersLiquityTransaction=t.SentEthersLiquityTransaction=t.EthersTransactionCancelledError=t._RawErrorReason=t._redeemMaxIterations=void 0;var h=m(n(90)),v=n(49),T=n(4),j=n(8),g=n(79),x=n(97),w=n(150),O=n(249),_=function(e,t){return(null===t||void 0===t?void 0:t.gt(e))?t:e};t._redeemMaxIterations=70;var k,S=j.Decimal.from(.005),D=j.Decimal.from(.001),E=function(){},C=function(e,t){return function(n){return e(t(n))}},A=function(e){return e},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return function(t){return t.add(1e4+1414*Math.ceil(Math.log2(e+1)))}},M=function(e){return e.add(8e4)},R=function(e){return e.add(5e4)},I=function(e){return e.add(2e4)};function P(e){var t;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:h.default(Number.isInteger(e)&&e>0);case 1:if(!e){n.next=8;break}return t=Math.min(e,2500),n.next=5,t;case 5:e-=t,n.next=1;break;case 8:case"end":return n.stop()}}),b)}!function(e){e.TRANSACTION_FAILED="transaction failed",e.TRANSACTION_CANCELLED="cancelled",e.TRANSACTION_REPLACED="replaced",e.TRANSACTION_REPRICED="repriced"}(k=t._RawErrorReason||(t._RawErrorReason={}));var U=[k.TRANSACTION_CANCELLED,k.TRANSACTION_REPLACED,k.TRANSACTION_REPRICED],F=function(e,t){return t in e},B=function(e){return F(e,"code")&&e.code===T.ErrorCode.TRANSACTION_REPLACED&&F(e,"reason")&&U.includes(e.reason)},q=function(e){d(n,e);var t=p(n);function n(e){var a;return c(this,n),h.default(e.reason!==k.TRANSACTION_REPRICED),(a=t.call(this,"Transaction ".concat(e.reason))).name="TransactionCancelledError",a.rawReplacementReceipt=e.receipt,a.rawError=e,a}return n}(y(Error));t.EthersTransactionCancelledError=q;var N=function(){function e(t,n,a){c(this,e),this.rawSentTransaction=t,this._connection=n,this._parse=a}return l(e,[{key:"_receiptFrom",value:function(e){var t=this;return e?e.status?j._successfulReceipt(e,this._parse(e),(function(){return O.logsToString(e,g._getContracts(t._connection))})):j._failedReceipt(e):j._pendingReceipt}},{key:"_waitForRawReceipt",value:function(){var e=u(f.mark((function e(t){return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.rawSentTransaction.wait(t);case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!(e.t0 instanceof Error)){e.next=17;break}if(n=e.t0,!F(n,"code")||n.code!==T.ErrorCode.CALL_EXCEPTION||!F(n,"reason")||n.reason!==k.TRANSACTION_FAILED){e.next=11;break}return e.abrupt("return",e.t0.receipt);case 11:if(!B(e.t0)){e.next=17;break}if(!e.t0.cancelled){e.next=16;break}throw new q(e.t0);case 16:return e.abrupt("return",e.t0.receipt);case 17:throw e.t0;case 18:case"end":return e.stop()}var n}),e,this,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getReceipt",value:function(){var e=u(f.mark((function e(){return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this._waitForRawReceipt(0);case 3:return e.t1=e.sent,e.abrupt("return",e.t0._receiptFrom.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"waitForReceipt",value:function(){var e=u(f.mark((function e(){var t;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this._waitForRawReceipt();case 3:return e.t1=e.sent,t=e.t0._receiptFrom.call(e.t0,e.t1),h.default("pending"!==t.status),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();t.SentEthersLiquityTransaction=N;var Y=function(e,t){var n,a;if(void 0===e)return{maxBorrowingRate:null!==(n=null===t||void 0===t?void 0:t.add(S))&&void 0!==n?n:j.Decimal.ZERO,borrowingFeeDecayToleranceMinutes:10};if("number"===typeof e||"string"===typeof e||e instanceof j.Decimal)return{maxBorrowingRate:j.Decimal.from(e),borrowingFeeDecayToleranceMinutes:10};var i=e.maxBorrowingRate,r=e.borrowingFeeDecayToleranceMinutes;return{maxBorrowingRate:void 0!==i?j.Decimal.from(i):null!==(a=null===t||void 0===t?void 0:t.add(S))&&void 0!==a?a:j.Decimal.ZERO,borrowingFeeDecayToleranceMinutes:null!==r&&void 0!==r?r:10}},Q=function(){function e(t,n,a,i){c(this,e),this.rawPopulatedTransaction=t,this._connection=n,this._parse=a,void 0!==i&&(this.gasHeadroom=i)}return l(e,[{key:"send",value:function(){var e=u(f.mark((function e(){return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=N,e.next=3,g._requireSigner(this._connection).sendTransaction(this.rawPopulatedTransaction);case 3:return e.t1=e.sent,e.t2=this._connection,e.t3=this._parse,e.abrupt("return",new e.t0(e.t1,e.t2,e.t3));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();t.PopulatedEthersLiquityTransaction=Q;var G=function(e){d(n,e);var t=p(n);function n(e,a,i,r,s){var o;c(this,n);var u=g._getContracts(a).troveManager;return(o=t.call(this,e,a,(function(e){var t=e.logs;return u.extractEvents(t,"Redemption").map((function(e){var t=e.args,n=t._ETHSent,a=t._ETHFee,i=t._actualLUSDAmount,r=t._attemptedLUSDAmount;return{attemptedLUSDAmount:x.decimalify(r),actualLUSDAmount:x.decimalify(i),collateralTaken:x.decimalify(n),fee:x.decimalify(a)}}))[0]}))).attemptedLUSDAmount=i,o.redeemableLUSDAmount=r,o.isTruncated=r.lt(i),o._increaseAmountByMinimumNetDebt=s,o}return l(n,[{key:"increaseAmountByMinimumNetDebt",value:function(e){if(!this._increaseAmountByMinimumNetDebt)throw new Error("PopulatedEthersRedemption: increaseAmountByMinimumNetDebt() can only be called when amount is truncated");return this._increaseAmountByMinimumNetDebt(e)}}]),n}(Q);t.PopulatedEthersRedemption=G;var Z=function(){function e(t){c(this,e),this._readable=t}return l(e,[{key:"_wrapSimpleTransaction",value:function(e){return new Q(e,this._readable.connection,E)}},{key:"_wrapTroveChangeWithFees",value:function(e,t,n){var a=g._getContracts(this._readable.connection).borrowerOperations;return new Q(t,this._readable.connection,(function(t){var n=t.logs,i=a.extractEvents(n,"TroveUpdated").map((function(e){var t=e.args,n=t._coll,a=t._debt;return new j.Trove(x.decimalify(n),x.decimalify(a))})),r=o(i,1)[0],s=a.extractEvents(n,"LUSDBorrowingFeePaid").map((function(e){var t=e.args._LUSDFee;return x.decimalify(t)})),u=o(s,1)[0];return{params:e,newTrove:r,fee:u}}),n)}},{key:"_wrapTroveClosure",value:function(){var e=u(f.mark((function e(t){var n,a,i;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g._getContracts(this._readable.connection),a=n.activePool,i=n.lusdToken,e.abrupt("return",new Q(t,this._readable.connection,(function(e){var t=e.logs,n=e.from,r=i.extractEvents(t,"Transfer").filter((function(e){var t=e.args,a=t.from,i=t.to;return a===n&&i===v.AddressZero})).map((function(e){var t=e.args.value;return x.decimalify(t)})),s=o(r,1)[0],u=a.extractEvents(t,"EtherSent").filter((function(e){return e.args._to===n})).map((function(e){var t=e.args._amount;return x.decimalify(t)})),l=o(u,1)[0];return{params:s.nonZero?{withdrawCollateral:l,repayLUSD:s}:{withdrawCollateral:l}}})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_wrapLiquidation",value:function(e){var t=g._getContracts(this._readable.connection).troveManager;return new Q(e,this._readable.connection,(function(e){var n=e.logs,a=t.extractEvents(n,"TroveLiquidated").map((function(e){return e.args._borrower})),i=t.extractEvents(n,"Liquidation").map((function(e){var t=e.args,n=t._LUSDGasCompensation,a=t._collGasCompensation,i=t._liquidatedColl,r=t._liquidatedDebt;return{collateralGasCompensation:x.decimalify(a),lusdGasCompensation:x.decimalify(n),totalLiquidated:new j.Trove(x.decimalify(i),x.decimalify(r))}})),r=o(i,1)[0];return s({liquidatedAddresses:a},r)}))}},{key:"_extractStabilityPoolGainsWithdrawalDetails",value:function(e){var t=g._getContracts(this._readable.connection).stabilityPool,n=t.extractEvents(e,"UserDepositChanged").map((function(e){var t=e.args._newDeposit;return x.decimalify(t)})),a=o(n,1)[0],i=t.extractEvents(e,"ETHGainWithdrawn").map((function(e){var t=e.args,n=t._ETH,a=t._LUSDLoss;return[x.decimalify(n),x.decimalify(a)]})),r=o(i,1),s=o(r[0],2),u=s[0],l=s[1],c=t.extractEvents(e,"LQTYPaidToDepositor").map((function(e){var t=e.args._LQTY;return x.decimalify(t)}));return{lusdLoss:l,newLUSDDeposit:a,collateralGain:u,lqtyReward:o(c,1)[0]}}},{key:"_wrapStabilityPoolGainsWithdrawal",value:function(e){var t=this;return new Q(e,this._readable.connection,(function(e){var n=e.logs;return t._extractStabilityPoolGainsWithdrawalDetails(n)}))}},{key:"_wrapStabilityDepositTopup",value:function(e,t){var n=this;return new Q(t,this._readable.connection,(function(t){var a=t.logs;return s(s({},n._extractStabilityPoolGainsWithdrawalDetails(a)),{},{change:e})}))}},{key:"_wrapStabilityDepositWithdrawal",value:function(){var e=u(f.mark((function e(t){var n,a,i,r=this;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g._getContracts(this._readable.connection),a=n.stabilityPool,i=n.lusdToken,e.abrupt("return",new Q(t,this._readable.connection,(function(e){var t=e.logs,n=e.from,u=r._extractStabilityPoolGainsWithdrawalDetails(t),l=i.extractEvents(t,"Transfer").filter((function(e){var t=e.args,i=t.from,r=t.to;return i===a.address&&r===n})).map((function(e){var t=e.args.value;return x.decimalify(t)})),c=o(l,1)[0];return s(s({},u),{},{change:{withdrawLUSD:c,withdrawAllLUSD:u.newLUSDDeposit.isZero}})})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_wrapCollateralGainTransfer",value:function(e){var t=this,n=g._getContracts(this._readable.connection).borrowerOperations;return new Q(e,this._readable.connection,(function(e){var a=e.logs,i=n.extractEvents(a,"TroveUpdated").map((function(e){var t=e.args,n=t._coll,a=t._debt;return new j.Trove(x.decimalify(n),x.decimalify(a))})),r=o(i,1)[0];return s(s({},t._extractStabilityPoolGainsWithdrawalDetails(a)),{},{newTrove:r})}))}},{key:"_findHintsForNominalCollateralRatio",value:function(){var e=u(f.mark((function e(t,n){var s,u,l,c,d,p,y,b,m,h,T,j,x,w,O,_,k,S;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=g._getContracts(this._readable.connection),u=s.sortedTroves,l=s.hintHelpers,e.next=3,this._readable.getNumberOfTroves();case 3:if(c=e.sent){e.next=6;break}return e.abrupt("return",[v.AddressZero,v.AddressZero]);case 6:if(!t.infinite){e.next=12;break}return e.t0=v.AddressZero,e.next=10,u.getFirst();case 10:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 12:return d=Math.ceil(10*Math.sqrt(c)),p=P(d),y=r(p),b=y[0],m=y.slice(1),h=function(e,n){var r=e.latestRandomSeed,s=e.results;return l.getApproxHint(t.hex,n,r).then((function(e){var t=e.latestRandomSeed,n=i(e,["latestRandomSeed"]);return{latestRandomSeed:t,results:[].concat(a(s),[n])}}))},e.next=17,m.reduce((function(e,t){return e.then((function(e){return h(e,t)}))}),h({latestRandomSeed:Math.floor(Math.random()*Number.MAX_SAFE_INTEGER),results:[]},b));case 17:return T=e.sent,j=T.results,x=j.reduce((function(e,t){return e.diff.lt(t.diff)?e:t})),w=x.hintAddress,e.next=22,u.findInsertPosition(t.hex,w,w);case 22:if(O=e.sent,_=o(O,2),k=_[0],S=_[1],!n){e.next=37;break}if(k!==n){e.next=33;break}return e.next=30,u.getPrev(k);case 30:k=e.sent,e.next=37;break;case 33:if(S!==n){e.next=37;break}return e.next=36,u.getNext(S);case 36:S=e.sent;case 37:return k===v.AddressZero?k=S:S===v.AddressZero&&(S=k),e.abrupt("return",[k,S]);case 39:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_findHints",value:function(){var e=u(f.mark((function e(t,n){return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof j.TroveWithPendingRedistribution)){e.next=2;break}throw new Error("Rewards must be applied to this Trove");case 2:return e.abrupt("return",this._findHintsForNominalCollateralRatio(t._nominalCollateralRatio,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_findRedemptionHints",value:function(){var e=u(f.mark((function e(n){var a,i,r,s,u,l,c,d,p,y,b;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g._getContracts(this._readable.connection),i=a.hintHelpers,e.next=3,this._readable.getPrice();case 3:return r=e.sent,e.next=6,i.getRedemptionHints(n.hex,r.hex,t._redeemMaxIterations);case 6:if(s=e.sent,u=s.firstRedemptionHint,l=s.partialRedemptionHintNICR,c=s.truncatedLUSDamount,!l.isZero()){e.next=14;break}e.t0=[v.AddressZero,v.AddressZero],e.next=17;break;case 14:return e.next=16,this._findHintsForNominalCollateralRatio(x.decimalify(l));case 16:e.t0=e.sent;case 17:return d=e.t0,p=o(d,2),y=p[0],b=p[1],e.abrupt("return",[x.decimalify(c),u,y,b,l]);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"openTrove",value:function(){var e=u(f.mark((function e(t,n,i){var r,u,l,c,d,p,y,b,m,h,v,T,x,w,O,k,S,D,E,C,A,R,I,P,U,F,B,q,N,Q,G,Z,V;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=g._getContracts(this._readable.connection),l=u.borrowerOperations,c=j._normalizeTroveCreation(t),d=c.depositCollateral,p=c.borrowLUSD,e.next=5,Promise.all([this._readable._getFeesFactory(),this._readable._getBlockTimestamp(),this._readable.getTotal(),this._readable.getPrice()]);case 5:return y=e.sent,b=o(y,4),m=b[0],h=b[1],v=b[2],T=b[3],x=v.collateralRatioIsBelowCritical(T),O=(w=function(e){return m(h+e,x).borrowingRate()})(0),k=j.Trove.create(c,O),e.next=17,this._findHints(k);case 17:if(S=e.sent,D=Y(n,O),E=D.maxBorrowingRate,C=D.borrowingFeeDecayToleranceMinutes,A=function(e){return[E.hex,e.hex].concat(a(S),[s({value:d.hex},i)])},void 0!==(null===i||void 0===i?void 0:i.gasLimit)){e.next=35;break}if(U=w(60*C),F=j.Trove.create(c,U),B=j.Trove.recreate(F,O),q=B.borrowLUSD,!F.debt.lt(j.LUSD_MINIMUM_DEBT)){e.next=26;break}throw new Error("Trove's debt might fall below ".concat(j.LUSD_MINIMUM_DEBT," ")+"within ".concat(C," minutes"));case 26:return e.next=28,Promise.all([(I=l.estimateGas).openTrove.apply(I,a(A(p))),(P=l.estimateGas).openTrove.apply(P,a(A(q)))]);case 28:N=e.sent,Q=o(N,2),G=Q[0],Z=Q[1],V=L(C)(_(M(G),Z)),R=V.sub(G).toNumber(),i=s(s({},i),{},{gasLimit:V});case 35:return e.t0=this,e.t1=c,e.next=39,(r=l.populateTransaction).openTrove.apply(r,a(A(p)));case 39:return e.t2=e.sent,e.t3=R,e.abrupt("return",e.t0._wrapTroveChangeWithFees.call(e.t0,e.t1,e.t2,e.t3));case 42:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"closeTrove",value:function(){var e=u(f.mark((function e(t){var n,a;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g._getContracts(this._readable.connection),a=n.borrowerOperations,e.t0=this,e.next=4,a.estimateAndPopulate.closeTrove(s({},t),A);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapTroveClosure.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"depositCollateral",value:function(e,t){return this.adjustTrove({depositCollateral:e},void 0,t)}},{key:"withdrawCollateral",value:function(e,t){return this.adjustTrove({withdrawCollateral:e},void 0,t)}},{key:"borrowLUSD",value:function(e,t,n){return this.adjustTrove({borrowLUSD:e},t,n)}},{key:"repayLUSD",value:function(e,t){return this.adjustTrove({repayLUSD:e},void 0,t)}},{key:"adjustTrove",value:function(){var e=u(f.mark((function e(t,n,i){var r,u,l,c,d,p,y,b,m,h,v,T,w,O,k,S,D,E,C,A,R,I,P,U,F,B,q,N,Q,G,Z,V,W;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=g._requireAddress(this._readable.connection,i),l=g._getContracts(this._readable.connection),c=l.borrowerOperations,d=j._normalizeTroveAdjustment(t),p=d.depositCollateral,y=d.withdrawCollateral,b=d.borrowLUSD,m=d.repayLUSD,e.next=6,Promise.all([this._readable.getTrove(u),b&&x.promiseAllValues({fees:this._readable._getFeesFactory(),blockTimestamp:this._readable._getBlockTimestamp(),total:this._readable.getTotal(),price:this._readable.getPrice()})]);case 6:return h=e.sent,v=o(h,2),T=v[0],w=v[1],k=(O=function(e){return null===w||void 0===w?void 0:w.fees(w.blockTimestamp+e,w.total.collateralRatioIsBelowCritical(w.price)).borrowingRate()})(0),S=T.adjust(d,k),e.next=15,this._findHints(S,u);case 15:if(D=e.sent,E=Y(n,k),C=E.maxBorrowingRate,A=E.borrowingFeeDecayToleranceMinutes,R=function(e){var t;return[C.hex,(null!==y&&void 0!==y?y:j.Decimal.ZERO).hex,(null!==(t=null!==e&&void 0!==e?e:m)&&void 0!==t?t:j.Decimal.ZERO).hex,!!e].concat(a(D),[s({value:null===p||void 0===p?void 0:p.hex},i)])},void 0!==(null===i||void 0===i?void 0:i.gasLimit)){e.next=34;break}if(F=O(60*A),B=T.adjust(d,F),q=T.adjustTo(B,k),N=q.borrowLUSD,!B.debt.lt(j.LUSD_MINIMUM_DEBT)){e.next=24;break}throw new Error("Trove's debt might fall below ".concat(j.LUSD_MINIMUM_DEBT," ")+"within ".concat(A," minutes"));case 24:return e.next=26,Promise.all([(P=c.estimateGas).adjustTrove.apply(P,a(R(b))),b&&(U=c.estimateGas).adjustTrove.apply(U,a(R(N)))]);case 26:Q=e.sent,G=o(Q,2),Z=G[0],V=G[1],W=_(M(Z),V),b&&(W=L(A)(W)),I=W.sub(Z).toNumber(),i=s(s({},i),{},{gasLimit:W});case 34:return e.t0=this,e.t1=d,e.next=38,(r=c.populateTransaction).adjustTrove.apply(r,a(R(b)));case 38:return e.t2=e.sent,e.t3=I,e.abrupt("return",e.t0._wrapTroveChangeWithFees.call(e.t0,e.t1,e.t2,e.t3));case 41:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"claimCollateralSurplus",value:function(){var e=u(f.mark((function e(t){var n,a;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g._getContracts(this._readable.connection),a=n.borrowerOperations,e.t0=this,e.next=4,a.estimateAndPopulate.claimCollateral(s({},t),A);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setPrice",value:function(){var e=u(f.mark((function e(t,n){var a,i;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=g._getContracts(this._readable.connection),i=a.priceFeed,w._priceFeedIsTestnet(i)){e.next=3;break}throw new Error("setPrice() unavailable on this deployment of Liquity");case 3:return e.t0=this,e.next=6,i.estimateAndPopulate.setPrice(s({},n),A,j.Decimal.from(t).hex);case 6:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"liquidate",value:function(){var e=u(f.mark((function e(t,n){var a,i;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=g._getContracts(this._readable.connection),i=a.troveManager,!Array.isArray(t)){e.next=9;break}return e.t0=this,e.next=5,i.estimateAndPopulate.batchLiquidateTroves(s({},n),R,t);case 5:return e.t1=e.sent,e.abrupt("return",e.t0._wrapLiquidation.call(e.t0,e.t1));case 9:return e.t2=this,e.next=12,i.estimateAndPopulate.liquidate(s({},n),R,t);case 12:return e.t3=e.sent,e.abrupt("return",e.t2._wrapLiquidation.call(e.t2,e.t3));case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"liquidateUpTo",value:function(){var e=u(f.mark((function e(t,n){var a,i;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g._getContracts(this._readable.connection),i=a.troveManager,e.t0=this,e.next=4,i.estimateAndPopulate.liquidateTroves(s({},n),R,t);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapLiquidation.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"depositLUSDInStabilityPool",value:function(){var e=u(f.mark((function e(t,n,a){var i,r,o,u;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g._getContracts(this._readable.connection),o=r.stabilityPool,u=j.Decimal.from(t),e.t0=this,e.t1={depositLUSD:u},e.next=6,o.estimateAndPopulate.provideToSP(s({},a),R,u.hex,null!==(i=null!==n&&void 0!==n?n:this._readable.connection.frontendTag)&&void 0!==i?i:v.AddressZero);case 6:return e.t2=e.sent,e.abrupt("return",e.t0._wrapStabilityDepositTopup.call(e.t0,e.t1,e.t2));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"withdrawLUSDFromStabilityPool",value:function(){var e=u(f.mark((function e(t,n){var a,i;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g._getContracts(this._readable.connection),i=a.stabilityPool,e.t0=this,e.next=4,i.estimateAndPopulate.withdrawFromSP(s({},n),R,j.Decimal.from(t).hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapStabilityDepositWithdrawal.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"withdrawGainsFromStabilityPool",value:function(){var e=u(f.mark((function e(t){var n,a;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g._getContracts(this._readable.connection),a=n.stabilityPool,e.t0=this,e.next=4,a.estimateAndPopulate.withdrawFromSP(s({},t),R,j.Decimal.ZERO.hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapStabilityPoolGainsWithdrawal.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"transferCollateralGainToTrove",value:function(){var e=u(f.mark((function e(t){var n,i,r,u,l,c,d,p,y;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=g._requireAddress(this._readable.connection,t),r=g._getContracts(this._readable.connection),u=r.stabilityPool,e.next=4,Promise.all([this._readable.getTrove(i),this._readable.getStabilityDeposit(i)]);case 4:return l=e.sent,c=o(l,2),d=c[0],p=c[1],y=d.addCollateral(p.collateralGain),e.t0=this,e.t1=(n=u.estimateAndPopulate).withdrawETHGainToTrove,e.t2=n,e.t3=[s({},t),C(M,R)],e.t4=a,e.next=16,this._findHints(y,i);case 16:return e.t5=e.sent,e.t6=(0,e.t4)(e.t5),e.t7=e.t3.concat.call(e.t3,e.t6),e.next=21,e.t1.apply.call(e.t1,e.t2,e.t7);case 21:return e.t8=e.sent,e.abrupt("return",e.t0._wrapCollateralGainTransfer.call(e.t0,e.t8));case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendLUSD",value:function(){var e=u(f.mark((function e(t,n,a){var i,r;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=g._getContracts(this._readable.connection),r=i.lusdToken,e.t0=this,e.next=4,r.estimateAndPopulate.transfer(s({},a),A,t,j.Decimal.from(n).hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"sendLQTY",value:function(){var e=u(f.mark((function e(t,n,a){var i,r;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=g._getContracts(this._readable.connection),r=i.lqtyToken,e.t0=this,e.next=4,r.estimateAndPopulate.transfer(s({},a),A,t,j.Decimal.from(n).hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"redeemLUSD",value:function(){var e=u(f.mark((function e(n,i,l){var c,d,p,y,b,m,h,T,x,w,O,_,k,S=this;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=g._getContracts(this._readable.connection),d=c.troveManager,p=j.Decimal.from(n),e.next=4,Promise.all([this._readable.getFees(),this._readable.getTotal(),this._findRedemptionHints(p)]);case 4:if(y=e.sent,b=o(y,3),m=b[0],h=b[1],T=r(b[2]),x=T[0],w=T[1],O=T.slice(2),!x.isZero){e.next=14;break}throw new Error("redeemLUSD: amount too low to redeem (try at least ".concat(j.LUSD_MINIMUM_NET_DEBT,")"));case 14:return _=function(e){return j.Decimal.min(m.redemptionRate(e.div(h.debt)).add(D),j.Decimal.ONE)},k=function(){var e=u(f.mark((function e(n,i){var r,o,u,c,p=arguments;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=p.length>2&&void 0!==p[2]?p[2]:n,u=p.length>3&&void 0!==p[3]?p[3]:[v.AddressZero,v.AddressZero,0],c=void 0!==i?j.Decimal.from(i):_(o),e.t0=G,e.next=6,(r=d.estimateAndPopulate).redeemCollateral.apply(r,[s({},l),L(),o.hex,w].concat(a(u),[t._redeemMaxIterations,c.hex]));case 6:return e.t1=e.sent,e.t2=S._readable.connection,e.t3=n,e.t4=o,e.t5=o.lt(n)?function(e){return k(o.add(j.LUSD_MINIMUM_NET_DEBT),null!==e&&void 0!==e?e:i)}:void 0,e.abrupt("return",new e.t0(e.t1,e.t2,e.t3,e.t4,e.t5));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.abrupt("return",k(p,i,x,O));case 17:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"stakeLQTY",value:function(){var e=u(f.mark((function e(t,n){var a,i;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g._getContracts(this._readable.connection),i=a.lqtyStaking,e.t0=this,e.next=4,i.estimateAndPopulate.stake(s({},n),A,j.Decimal.from(t).hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unstakeLQTY",value:function(){var e=u(f.mark((function e(t,n){var a,i;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g._getContracts(this._readable.connection),i=a.lqtyStaking,e.t0=this,e.next=4,i.estimateAndPopulate.unstake(s({},n),A,j.Decimal.from(t).hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"withdrawGainsFromStaking",value:function(e){return this.unstakeLQTY(j.Decimal.ZERO,e)}},{key:"registerFrontend",value:function(){var e=u(f.mark((function e(t,n){var a,i;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g._getContracts(this._readable.connection),i=a.stabilityPool,e.t0=this,e.next=4,i.estimateAndPopulate.registerFrontEnd(s({},n),A,j.Decimal.from(t).hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_mintUniToken",value:function(){var e=u(f.mark((function e(t,n,a){var i,r;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==n&&void 0!==n||(n=g._requireAddress(this._readable.connection,a)),i=g._getContracts(this._readable.connection),r=i.uniToken,w._uniTokenIsMock(r)){e.next=4;break}throw new Error("_mintUniToken() unavailable on this deployment of Liquity");case 4:return e.t0=this,e.next=7,r.estimateAndPopulate.mint(s({},a),A,n,j.Decimal.from(t).hex);case 7:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"approveUniTokens",value:function(){var e=u(f.mark((function e(t,n){var a,i,r;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g._getContracts(this._readable.connection),i=a.uniToken,r=a.unipool,e.t0=this,e.next=4,i.estimateAndPopulate.approve(s({},n),A,r.address,j.Decimal.from(null!==t&&void 0!==t?t:j.Decimal.INFINITY).hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stakeUniTokens",value:function(){var e=u(f.mark((function e(t,n){var a,i;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g._getContracts(this._readable.connection),i=a.unipool,e.t0=this,e.next=4,i.estimateAndPopulate.stake(s({},n),I,j.Decimal.from(t).hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unstakeUniTokens",value:function(){var e=u(f.mark((function e(t,n){var a,i;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g._getContracts(this._readable.connection),i=a.unipool,e.t0=this,e.next=4,i.estimateAndPopulate.withdraw(s({},n),I,j.Decimal.from(t).hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"withdrawLQTYRewardFromLiquidityMining",value:function(){var e=u(f.mark((function e(t){var n,a;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g._getContracts(this._readable.connection),a=n.unipool,e.t0=this,e.next=4,a.estimateAndPopulate.claimReward(s({},t),I);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"exitLiquidityMining",value:function(){var e=u(f.mark((function e(t){var n,a;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g._getContracts(this._readable.connection),a=n.unipool,e.t0=this,e.next=4,a.estimateAndPopulate.withdrawAndClaim(s({},t),I);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();t.PopulatableEthersLiquity=Z},function(e,t,n){"use strict";var a=n(5),i=n(53),r=n(36),s=n(39);Object.defineProperty(t,"__esModule",{value:!0}),t.SendableEthersLiquity=void 0;var o=function(e){return e.send()},u=function(){function e(t){r(this,e),this._populate=t}return s(e,[{key:"openTrove",value:function(){var e=i(a.mark((function e(t,n,i){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._populate.openTrove(t,n,i).then(o));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"closeTrove",value:function(e){return this._populate.closeTrove(e).then(o)}},{key:"adjustTrove",value:function(e,t,n){return this._populate.adjustTrove(e,t,n).then(o)}},{key:"depositCollateral",value:function(e,t){return this._populate.depositCollateral(e,t).then(o)}},{key:"withdrawCollateral",value:function(e,t){return this._populate.withdrawCollateral(e,t).then(o)}},{key:"borrowLUSD",value:function(e,t,n){return this._populate.borrowLUSD(e,t,n).then(o)}},{key:"repayLUSD",value:function(e,t){return this._populate.repayLUSD(e,t).then(o)}},{key:"setPrice",value:function(e,t){return this._populate.setPrice(e,t).then(o)}},{key:"liquidate",value:function(e,t){return this._populate.liquidate(e,t).then(o)}},{key:"liquidateUpTo",value:function(e,t){return this._populate.liquidateUpTo(e,t).then(o)}},{key:"depositLUSDInStabilityPool",value:function(e,t,n){return this._populate.depositLUSDInStabilityPool(e,t,n).then(o)}},{key:"withdrawLUSDFromStabilityPool",value:function(e,t){return this._populate.withdrawLUSDFromStabilityPool(e,t).then(o)}},{key:"withdrawGainsFromStabilityPool",value:function(e){return this._populate.withdrawGainsFromStabilityPool(e).then(o)}},{key:"transferCollateralGainToTrove",value:function(e){return this._populate.transferCollateralGainToTrove(e).then(o)}},{key:"sendLUSD",value:function(e,t,n){return this._populate.sendLUSD(e,t,n).then(o)}},{key:"sendLQTY",value:function(e,t,n){return this._populate.sendLQTY(e,t,n).then(o)}},{key:"redeemLUSD",value:function(e,t,n){return this._populate.redeemLUSD(e,t,n).then(o)}},{key:"claimCollateralSurplus",value:function(e){return this._populate.claimCollateralSurplus(e).then(o)}},{key:"stakeLQTY",value:function(e,t){return this._populate.stakeLQTY(e,t).then(o)}},{key:"unstakeLQTY",value:function(e,t){return this._populate.unstakeLQTY(e,t).then(o)}},{key:"withdrawGainsFromStaking",value:function(e){return this._populate.withdrawGainsFromStaking(e).then(o)}},{key:"registerFrontend",value:function(e,t){return this._populate.registerFrontend(e,t).then(o)}},{key:"_mintUniToken",value:function(e,t,n){return this._populate._mintUniToken(e,t,n).then(o)}},{key:"approveUniTokens",value:function(e,t){return this._populate.approveUniTokens(e,t).then(o)}},{key:"stakeUniTokens",value:function(e,t){return this._populate.stakeUniTokens(e,t).then(o)}},{key:"unstakeUniTokens",value:function(e,t){return this._populate.unstakeUniTokens(e,t).then(o)}},{key:"withdrawLQTYRewardFromLiquidityMining",value:function(e){return this._populate.withdrawLQTYRewardFromLiquidityMining(e).then(o)}},{key:"exitLiquidityMining",value:function(e){return this._populate.exitLiquidityMining(e).then(o)}}]),e}();t.SendableEthersLiquity=u},,function(e,t,n){"use strict";var a=n(45),i=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.LiquityStoreProvider=t.LiquityStoreContext=void 0;var o=s(n(1));t.LiquityStoreContext=o.createContext(void 0);t.LiquityStoreProvider=function(e){var n=e.store,i=e.loader,r=e.children,s=o.useState(),u=a(s,2),l=u[0],c=u[1];return o.useEffect((function(){n.onLoaded=function(){return c(n)};var e=n.start();return function(){n.onLoaded=void 0,c(void 0),e()}}),[n]),l?o.default.createElement(t.LiquityStoreContext.Provider,{value:l},r):o.default.createElement(o.default.Fragment,null,i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.equals=void 0;var a=function(e,t){var n=Object.keys(e),a=Object.keys(t);return n.length===a.length&&n.every((function(n){return function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(t,n)&&Object.is(e[n],t[n])}))},i=function(e){return null!==e&&"object"===typeof e};t.equals=function(e,t){return i(e)&&i(t)?a(e,t):Object.is(e,t)}},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){"use strict";var a=n(5),i=n(45),r=n(53),s=n(36),o=n(39),u=n(116),l=n(78),c=n(56),d=n(57);Object.defineProperty(t,"__esModule",{value:!0}),t.BatchedWebSocketAugmentedWeb3Provider=t.Batched=t.isBatchedProvider=void 0;var p=n(16),y=n(72),f=n(3),b=n(145),m={1:"0xeefBa1e63905eF1D7ACbA5a8513c70307C1cE441",3:"0x53C43764255c17BD724F74c4eF150724AC50a3ed",4:"0x42Ad527de7d4e9d9d011aC45B31D8551f8Fe9821",5:"0x77dCa2C955b15e9dE4dbBCf1246B4B85b651e50e",42:"0x2cc8688C5f75E365aaEEb4ea8D6a480405A48D2A"},h=[{type:"function",name:"aggregate",stateMutability:"nonpayable",constant:!1,payable:!1,inputs:[{components:[{name:"target",type:"address"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],outputs:[{name:"blockNumber",type:"uint256"},{name:"returnData",type:"bytes[]"}]},{type:"function",name:"getEthBalance",stateMutability:"view",constant:!0,payable:!1,inputs:[{name:"addr",type:"address"}],outputs:[{name:"balance",type:"uint256"}]}],v=function(e){return void 0===e.gasLimit&&void 0===e.gasPrice&&void 0===e.value},T=function(e,t){return e.to===t&&"string"===typeof e.data&&e.data.startsWith("0x252dba42")},j=[];t.isBatchedProvider=function(e){return j.some((function(t){return e instanceof t}))};t.Batched=function(e){var t=function(e){c(n,e);var t=d(n);function n(){var e;return s(this,n),(e=t.apply(this,arguments)).batchingDelayMs=10,e._chainId=0,e._batched={calls:[],callbacks:[]},e._numberOfBatchedCalls=0,e._numberOfActualCalls=0,e}return o(n,[{key:"chainId",get:function(){return this._chainId},set:function(e){if(this._multicall)throw new Error("can only set chainId once");(function(e){return e in m})(e)&&(this._multicall=new y.Contract(m[e],h,this)),this._chainId=e}},{key:"_dispatchCalls",value:function(){var e=r(a.mark((function e(){var t,r,s,o,c;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._batched,r=t.calls,s=t.callbacks,o=t.blockTag,this._batched={calls:[],callbacks:[]},e.prev=2,!(r.length>1)){e.next=9;break}return e.next=6,this._multicall.callStatic.aggregate(r,{blockTag:o}).then((function(e){return e.returnData}));case 6:e.t0=e.sent,e.next=13;break;case 9:return e.next=11,u(l(n.prototype),"call",this).call(this,{to:r[0].target,data:r[0].callData},o);case 11:e.t1=e.sent,e.t0=[e.t1];case 13:c=e.t0,s.forEach((function(e,t){return(0,i(e,1)[0])(c[t])})),e.next=20;break;case 17:e.prev=17,e.t2=e.catch(2),s.forEach((function(t){return(0,i(t,2)[1])(e.t2)}));case 20:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"_enqueueCall",value:function(e){var t=this;return void 0!==this._timeoutId&&clearTimeout(this._timeoutId),this._batched.calls.push(e),this._timeoutId=setTimeout((function(){return t._dispatchCalls()}),this.batchingDelayMs),new Promise((function(e,n){return t._batched.callbacks.push([e,n])}))}},{key:"_alreadyBatchedCallsConflictWith",value:function(e){var t;return 0!==this._batched.calls.length&&(null!==e&&void 0!==e?e:"latest")!==(null!==(t=this._batched.blockTag)&&void 0!==t?t:"latest")}},{key:"call",value:function(){var e=r(a.mark((function e(t,r){var s,o,c,d,p;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._multicall){e.next=4;break}return e.abrupt("return",u(l(n.prototype),"call",this).call(this,t,r));case 4:s=(new Date).getTime(),void 0===this._timeOfLastRatioCheck?this._timeOfLastRatioCheck=s:s-this._timeOfLastRatioCheck>=1e4&&this._numberOfActualCalls&&(this._numberOfBatchedCalls=0,this._numberOfActualCalls=0,this._timeOfLastRatioCheck=s);case 6:return e.next=8,Promise.all([f.resolveProperties(t),r]);case 8:if(o=e.sent,c=i(o,2),d=c[0],p=c[1],!T(d,this._multicall.address)&&v(d)&&!this._alreadyBatchedCallsConflictWith(p)){e.next=17;break}return this._numberOfActualCalls++,e.abrupt("return",u(l(n.prototype),"call",this).call(this,d,p));case 17:return this._numberOfBatchedCalls++,0===this._batched.calls.length&&(this._batched.blockTag=p),e.abrupt("return",this._enqueueCall({target:d.to,callData:d.data}));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getBalance",value:function(){var e=r(a.mark((function e(t,r){var s,o,c,d,y,f,b;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t,r]);case 2:if(s=e.sent,o=i(s,2),c=o[0],d=o[1],p.isAddress(c)&&this._multicall){e.next=8;break}return e.abrupt("return",u(l(n.prototype),"getBalance",this).call(this,c,r));case 8:return e.next=10,this._multicall.functions.getEthBalance(c,{blockTag:d});case 10:return y=e.sent,f=i(y,1),b=f[0],e.abrupt("return",b);case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(e);return j.push(t),t},t.BatchedWebSocketAugmentedWeb3Provider=t.Batched(b.WebSocketAugmentedWeb3Provider)},,,,,,,function(e,t){},,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a=n(116),i=n(78),r=n(56),s=n(57),o=n(36),u=n(39),l=n(59),c=n(45),d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TroveWithPendingRedistribution=t.UserTrove=t._emptyTrove=t.Trove=t._normalizeTroveAdjustment=t._normalizeTroveCreation=void 0;var p=d(n(90)),y=n(80),f=n(121),b=function(e,t){return{type:"invalidCreation",invalidTrove:e,error:t}},m=function(e){return{type:"creation",params:e}},h=function(e){return{type:"closure",params:e}},v=function(e,t){return{type:"adjustment",params:e,setToZero:t}},T=function(e){return void 0!==e[1]},j=["depositCollateral","borrowLUSD"];var g=function(e){var t=c(e,2),n=t[0],a=t[1];return[n,y.Decimal.from(a)]},x=function(e){return!c(e,2)[1].isZero};t._normalizeTroveCreation=function(e){var t=Object.entries(e).filter(T);return function(e){var t=e.filter((function(e){var t=c(e,1)[0];return!j.includes(t)})).map((function(e){var t=c(e,1)[0];return"'".concat(t,"'")}));if(t.length>0)throw new Error("TroveCreationParams: property ".concat(t.join(", ")," not allowed"))}(t),function(e){var t=Object.fromEntries(e),n=j.filter((function(e){return!(e in t)})).map((function(e){return"'".concat(e,"'")}));if(n.length>0)throw new Error("TroveCreationParams: property ".concat(n.join(", ")," missing"));return t}(t.map(g))};var w=["depositCollateral","withdrawCollateral","borrowLUSD","repayLUSD"];var O=function(e){var t=Object.fromEntries(e),n=function(e){var t=e.depositCollateral,n=e.withdrawCollateral;if(void 0!==t&&void 0!==n)throw new Error("TroveAdjustmentParams: 'depositCollateral' and 'withdrawCollateral' can't be present at the same time");return void 0!==t?{depositCollateral:t}:void 0!==n?{withdrawCollateral:n}:void 0}(t),a=function(e){var t=e.borrowLUSD,n=e.repayLUSD;if(void 0!==t&&void 0!==n)throw new Error("TroveAdjustmentParams: 'borrowLUSD' and 'repayLUSD' can't be present at the same time");return void 0!==t?{borrowLUSD:t}:void 0!==n?{repayLUSD:n}:void 0}(t);if(void 0!==n&&void 0!==a)return l(l({},n),a);if(void 0!==n)return n;if(void 0!==a)return a;throw new Error("TroveAdjustmentParams: must include at least one non-zero parameter")};t._normalizeTroveAdjustment=function(e){var t=Object.entries(e).filter(T);!function(e){var t=e.filter((function(e){var t=c(e,1)[0];return!w.includes(t)})).map((function(e){var t=c(e,1)[0];return"'".concat(t,"'")}));if(t.length>0)throw new Error("TroveAdjustmentParams: property ".concat(t.join(", ")," not allowed"))}(t);var n=t.map(g).filter(x);return O(n)};var _=function(e,t){return t.mul(y.Decimal.ONE.add(e))},k=function(e,t){return t._divCeil(y.Decimal.ONE.add(e))},S=y.Decimal.from(100),D=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.Decimal.ZERO,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.Decimal.ZERO;o(this,e),this.collateral=t,this.debt=n}return u(e,[{key:"isEmpty",get:function(){return this.collateral.isZero&&this.debt.isZero}},{key:"netDebt",get:function(){if(this.debt.lt(f.LUSD_LIQUIDATION_RESERVE))throw new Error("netDebt should not be used when debt < ".concat(f.LUSD_LIQUIDATION_RESERVE));return this.debt.sub(f.LUSD_LIQUIDATION_RESERVE)}},{key:"_nominalCollateralRatio",get:function(){return this.collateral.mulDiv(S,this.debt)}},{key:"collateralRatio",value:function(e){return this.collateral.mulDiv(e,this.debt)}},{key:"collateralRatioIsBelowMinimum",value:function(e){return this.collateralRatio(e).lt(f.MINIMUM_COLLATERAL_RATIO)}},{key:"collateralRatioIsBelowCritical",value:function(e){return this.collateralRatio(e).lt(f.CRITICAL_COLLATERAL_RATIO)}},{key:"liquidationPrice",value:function(){return this.debt.mulDiv(f.MINIMUM_COLLATERAL_RATIO,this.collateral)}},{key:"isOpenableInRecoveryMode",value:function(e){return this.collateralRatio(e).gte(f.CRITICAL_COLLATERAL_RATIO)}},{key:"toString",value:function(){return"{ collateral: ".concat(this.collateral,", debt: ").concat(this.debt," }")}},{key:"equals",value:function(e){return this.collateral.eq(e.collateral)&&this.debt.eq(e.debt)}},{key:"add",value:function(t){return new e(this.collateral.add(t.collateral),this.debt.add(t.debt))}},{key:"addCollateral",value:function(t){return new e(this.collateral.add(t),this.debt)}},{key:"addDebt",value:function(t){return new e(this.collateral,this.debt.add(t))}},{key:"subtract",value:function(t){var n=t.collateral,a=t.debt;return new e(this.collateral.gt(n)?this.collateral.sub(n):y.Decimal.ZERO,this.debt.gt(a)?this.debt.sub(a):y.Decimal.ZERO)}},{key:"subtractCollateral",value:function(t){return new e(this.collateral.gt(t)?this.collateral.sub(t):y.Decimal.ZERO,this.debt)}},{key:"subtractDebt",value:function(t){return new e(this.collateral,this.debt.gt(t)?this.debt.sub(t):y.Decimal.ZERO)}},{key:"multiply",value:function(t){return new e(this.collateral.mul(t),this.debt.mul(t))}},{key:"setCollateral",value:function(t){return new e(y.Decimal.from(t),this.debt)}},{key:"setDebt",value:function(t){return new e(this.collateral,y.Decimal.from(t))}},{key:"_debtChange",value:function(e,t){var n=e.debt;return n.gt(this.debt)?{borrowLUSD:k(t,n.sub(this.debt))}:{repayLUSD:this.debt.sub(n)}}},{key:"_collateralChange",value:function(e){var t=e.collateral;return t.gt(this.collateral)?{depositCollateral:t.sub(this.collateral)}:{withdrawCollateral:this.collateral.sub(t)}}},{key:"whatChanged",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.MINIMUM_BORROWING_RATE;if(!this.collateral.eq(e.collateral)||!this.debt.eq(e.debt))return this.isEmpty?e.debt.lt(f.LUSD_LIQUIDATION_RESERVE)?b(e,"missingLiquidationReserve"):m({depositCollateral:e.collateral,borrowLUSD:k(n,e.netDebt)}):e.isEmpty?h(this.netDebt.nonZero?{withdrawCollateral:this.collateral,repayLUSD:this.netDebt}:{withdrawCollateral:this.collateral}):this.collateral.eq(e.collateral)?v(this._debtChange(e,n),e.debt.zero&&"debt"):this.debt.eq(e.debt)?v(this._collateralChange(e),e.collateral.zero&&"collateral"):v(l(l({},this._debtChange(e,n)),this._collateralChange(e)),null!==(t=e.debt.zero&&"debt")&&void 0!==t?t:e.collateral.zero&&"collateral")}},{key:"apply",value:function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.MINIMUM_BORROWING_RATE;if(!n)return this;switch(n.type){case"invalidCreation":if(!this.isEmpty)throw new Error("Can't create onto existing Trove");return n.invalidTrove;case"creation":if(!this.isEmpty)throw new Error("Can't create onto existing Trove");var i=n.params,r=i.depositCollateral,s=i.borrowLUSD;return new e(r,f.LUSD_LIQUIDATION_RESERVE.add(_(a,s)));case"closure":if(this.isEmpty)throw new Error("Can't close empty Trove");return t._emptyTrove;case"adjustment":var o=n.setToZero,u=n.params,l=u.depositCollateral,c=u.withdrawCollateral,d=u.borrowLUSD,p=u.repayLUSD,b=null!==c&&void 0!==c?c:y.Decimal.ZERO,m=null!==l&&void 0!==l?l:y.Decimal.ZERO,h=null!==p&&void 0!==p?p:y.Decimal.ZERO,v=d?_(a,d):y.Decimal.ZERO;return"collateral"===o?this.setCollateral(y.Decimal.ZERO).addDebt(v).subtractDebt(h):"debt"===o?this.setDebt(y.Decimal.ZERO).addCollateral(m).subtractCollateral(b):this.add(new e(m,v)).subtract(new e(b,h))}}},{key:"adjust",value:function(e,n){return this.apply(v(t._normalizeTroveAdjustment(e)),n)}},{key:"adjustTo",value:function(e,t){var n=this.whatChanged(e,t);return p.default("adjustment"===(null===n||void 0===n?void 0:n.type)),n.params}}],[{key:"create",value:function(e,n){return t._emptyTrove.apply(m(t._normalizeTroveCreation(e)),n)}},{key:"recreate",value:function(e,n){var a=t._emptyTrove.whatChanged(e,n);return p.default("creation"===(null===a||void 0===a?void 0:a.type)),a.params}}]),e}();t.Trove=D,t._emptyTrove=new D;var E=function(e){r(n,e);var t=s(n);function n(e,a,i,r){var s;return o(this,n),(s=t.call(this,i,r)).ownerAddress=e,s.status=a,s}return u(n,[{key:"equals",value:function(e){return a(i(n.prototype),"equals",this).call(this,e)&&this.ownerAddress===e.ownerAddress&&this.status===e.status}},{key:"toString",value:function(){return'{ ownerAddress: "'.concat(this.ownerAddress,'"')+", collateral: ".concat(this.collateral)+", debt: ".concat(this.debt)+', status: "'.concat(this.status,'" }')}}]),n}(D);t.UserTrove=E;var C=function(e){r(l,e);var n=s(l);function l(e,a,i,r){var s,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:y.Decimal.ZERO,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t._emptyTrove;return o(this,l),(s=n.call(this,e,a,i,r)).stake=u,s.snapshotOfTotalRedistributed=c,s}return u(l,[{key:"applyRedistribution",value:function(e){var t=this.add(e.subtract(this.snapshotOfTotalRedistributed).multiply(this.stake));return new E(this.ownerAddress,this.status,t.collateral,t.debt)}},{key:"equals",value:function(e){return a(i(l.prototype),"equals",this).call(this,e)&&this.stake.eq(e.stake)&&this.snapshotOfTotalRedistributed.equals(e.snapshotOfTotalRedistributed)}}]),l}(E);t.TroveWithPendingRedistribution=C},function(e,t,n){"use strict";var a=n(36),i=n(39);Object.defineProperty(t,"__esModule",{value:!0}),t.StabilityDeposit=void 0;var r=n(80),s=function(){function e(t,n,i,r,s){if(a(this,e),this.initialLUSD=t,this.currentLUSD=n,this.collateralGain=i,this.lqtyReward=r,this.frontendTag=s,this.currentLUSD.gt(this.initialLUSD))throw new Error("currentLUSD can't be greater than initialLUSD")}return i(e,[{key:"isEmpty",get:function(){return this.initialLUSD.isZero&&this.currentLUSD.isZero&&this.collateralGain.isZero&&this.lqtyReward.isZero}},{key:"toString",value:function(){return"{ initialLUSD: ".concat(this.initialLUSD)+", currentLUSD: ".concat(this.currentLUSD)+", collateralGain: ".concat(this.collateralGain)+", lqtyReward: ".concat(this.lqtyReward)+', frontendTag: "'.concat(this.frontendTag,'" }')}},{key:"equals",value:function(e){return this.initialLUSD.eq(e.initialLUSD)&&this.currentLUSD.eq(e.currentLUSD)&&this.collateralGain.eq(e.collateralGain)&&this.lqtyReward.eq(e.lqtyReward)&&this.frontendTag===e.frontendTag}},{key:"whatChanged",value:function(e){return(e=r.Decimal.from(e)).lt(this.currentLUSD)?{withdrawLUSD:this.currentLUSD.sub(e),withdrawAllLUSD:e.isZero}:e.gt(this.currentLUSD)?{depositLUSD:e.sub(this.currentLUSD)}:void 0}},{key:"apply",value:function(e){return e?void 0!==e.withdrawLUSD?e.withdrawAllLUSD||this.currentLUSD.lte(e.withdrawLUSD)?r.Decimal.ZERO:this.currentLUSD.sub(e.withdrawLUSD):this.currentLUSD.add(e.depositLUSD):this.currentLUSD}}]),e}();t.StabilityDeposit=s},function(e,t,n){"use strict";var a=n(36),i=n(39);Object.defineProperty(t,"__esModule",{value:!0}),t.LQTYStake=void 0;var r=n(80),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.Decimal.ZERO,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.Decimal.ZERO,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.Decimal.ZERO;a(this,e),this.stakedLQTY=t,this.collateralGain=n,this.lusdGain=i}return i(e,[{key:"isEmpty",get:function(){return this.stakedLQTY.isZero&&this.collateralGain.isZero&&this.lusdGain.isZero}},{key:"toString",value:function(){return"{ stakedLQTY: ".concat(this.stakedLQTY)+", collateralGain: ".concat(this.collateralGain)+", lusdGain: ".concat(this.lusdGain," }")}},{key:"equals",value:function(e){return this.stakedLQTY.eq(e.stakedLQTY)&&this.collateralGain.eq(e.collateralGain)&&this.lusdGain.eq(e.lusdGain)}},{key:"whatChanged",value:function(e){return(e=r.Decimal.from(e)).lt(this.stakedLQTY)?{unstakeLQTY:this.stakedLQTY.sub(e),unstakeAllLQTY:e.isZero}:e.gt(this.stakedLQTY)?{stakeLQTY:e.sub(this.stakedLQTY)}:void 0}},{key:"apply",value:function(e){return e?void 0!==e.unstakeLQTY?e.unstakeAllLQTY||this.stakedLQTY.lte(e.unstakeLQTY)?r.Decimal.ZERO:this.stakedLQTY.sub(e.unstakeLQTY):this.stakedLQTY.add(e.stakeLQTY):this.stakedLQTY}}]),e}();t.LQTYStake=s},function(e,t,n){"use strict";var a=n(36),i=n(39),r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Fees=void 0;var s=r(n(90)),o=n(80),u=n(121),l=function(){function e(t,n,i,r,u,l){a(this,e),this._baseRateWithoutDecay=o.Decimal.from(t),this._minuteDecayFactor=o.Decimal.from(n),this._beta=o.Decimal.from(i),this._lastFeeOperation=r,this._timeOfLatestBlock=u,this._recoveryMode=l,s.default(this._minuteDecayFactor.lt(1))}return i(e,[{key:"_setRecoveryMode",value:function(t){return new e(this._baseRateWithoutDecay,this._minuteDecayFactor,this._beta,this._lastFeeOperation,this._timeOfLatestBlock,t)}},{key:"equals",value:function(e){return this._baseRateWithoutDecay.eq(e._baseRateWithoutDecay)&&this._minuteDecayFactor.eq(e._minuteDecayFactor)&&this._beta.eq(e._beta)&&this._lastFeeOperation.getTime()===e._lastFeeOperation.getTime()&&this._timeOfLatestBlock.getTime()===e._timeOfLatestBlock.getTime()&&this._recoveryMode===e._recoveryMode}},{key:"toString",value:function(){return"{ baseRateWithoutDecay: ".concat(this._baseRateWithoutDecay)+', lastFeeOperation: "'.concat(this._lastFeeOperation.toLocaleString(),'"')+", recoveryMode: ".concat(this._recoveryMode," } ")}},{key:"baseRate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._timeOfLatestBlock,t=Math.max(e.getTime()-this._lastFeeOperation.getTime(),0),n=Math.floor(t/6e4);return this._minuteDecayFactor.pow(n).mul(this._baseRateWithoutDecay)}},{key:"borrowingRate",value:function(e){return this._recoveryMode?o.Decimal.ZERO:o.Decimal.min(u.MINIMUM_BORROWING_RATE.add(this.baseRate(e)),u.MAXIMUM_BORROWING_RATE)}},{key:"redemptionRate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.Decimal.ZERO,t=arguments.length>1?arguments[1]:void 0;e=o.Decimal.from(e);var n=this.baseRate(t);return e.nonZero&&(n=e.div(this._beta).add(n)),o.Decimal.min(u.MINIMUM_REDEMPTION_RATE.add(n),o.Decimal.ONE)}}]),e}();t.Fees=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var a=n(36),i=n(56),r=n(57),s=n(119);Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionFailedError=void 0;var o=function(e){i(n,e);var t=r(n);function n(e,i,r){var s;return a(this,n),(s=t.call(this,i)).name=e,s.failedReceipt=r,s}return n}(s(Error));t.TransactionFailedError=o},function(e,t,n){"use strict";var a=n(59);Object.defineProperty(t,"__esModule",{value:!0}),t._successfulReceipt=t._failedReceipt=t._pendingReceipt=void 0,t._pendingReceipt={status:"pending"};t._failedReceipt=function(e){return{status:"failed",rawReceipt:e}};t._successfulReceipt=function(e,t,n){return a({status:"succeeded",rawReceipt:e,details:t},n?{toString:n}:{})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var a=n(89),i=n(36),r=n(39),s=n(45),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LiquityStore=void 0;var u=o(n(90)),l=function(e,t){return e===t},c=function(e,t){return e.eq(t)},d=function(e,t){return e.equals(t)},p=function(e,t){return"unregistered"===e.status?"unregistered"===t.status:"registered"===t.status&&e.kickbackRate.eq(t.kickbackRate)},y=function(e){return"unregistered"===e.status?'{ status: "unregistered" }':'{ status: "registered", kickbackRate: '.concat(e.kickbackRate," }")},f=function(){function e(){i(this,e),this.logging=!1,this._loaded=!1,this._listeners=new Set}return r(e,[{key:"state",get:function(){return Object.assign({},this._baseState,this._derivedState,this._extraState)}},{key:"start",value:function(){var e=this,t=this._doStart();return function(){t(),e._cancelUpdateIfScheduled()}}},{key:"_cancelUpdateIfScheduled",value:function(){void 0!==this._updateTimeoutId&&clearTimeout(this._updateTimeoutId)}},{key:"_scheduleUpdate",value:function(){var e=this;this._cancelUpdateIfScheduled(),this._updateTimeoutId=setTimeout((function(){e._updateTimeoutId=void 0,e._update()}),3e4)}},{key:"_logUpdate",value:function(e,t,n){return this.logging&&console.log("".concat(e," updated to ").concat(n?n(t):t)),t}},{key:"_updateIfChanged",value:function(e,t,n,a,i){return void 0===a||e(n,a)?n:this._logUpdate(t,a,i)}},{key:"_silentlyUpdateIfChanged",value:function(e,t,n){return void 0===n||e(t,n)?t:n}},{key:"_updateFees",value:function(e,t,n){return n&&!n.equals(t)?("".concat(n)!=="".concat(t)&&this._logUpdate(e,n),n):t}},{key:"_reduce",value:function(e,t){return{frontend:this._updateIfChanged(p,"frontend",e.frontend,t.frontend,y),ownFrontend:this._updateIfChanged(p,"ownFrontend",e.ownFrontend,t.ownFrontend,y),numberOfTroves:this._updateIfChanged(l,"numberOfTroves",e.numberOfTroves,t.numberOfTroves),accountBalance:this._updateIfChanged(c,"accountBalance",e.accountBalance,t.accountBalance),lusdBalance:this._updateIfChanged(c,"lusdBalance",e.lusdBalance,t.lusdBalance),lqtyBalance:this._updateIfChanged(c,"lqtyBalance",e.lqtyBalance,t.lqtyBalance),uniTokenBalance:this._updateIfChanged(c,"uniTokenBalance",e.uniTokenBalance,t.uniTokenBalance),uniTokenAllowance:this._updateIfChanged(c,"uniTokenAllowance",e.uniTokenAllowance,t.uniTokenAllowance),remainingLiquidityMiningLQTYReward:this._silentlyUpdateIfChanged(c,e.remainingLiquidityMiningLQTYReward,t.remainingLiquidityMiningLQTYReward),liquidityMiningStake:this._updateIfChanged(c,"liquidityMiningStake",e.liquidityMiningStake,t.liquidityMiningStake),totalStakedUniTokens:this._updateIfChanged(c,"totalStakedUniTokens",e.totalStakedUniTokens,t.totalStakedUniTokens),liquidityMiningLQTYReward:this._silentlyUpdateIfChanged(c,e.liquidityMiningLQTYReward,t.liquidityMiningLQTYReward),collateralSurplusBalance:this._updateIfChanged(c,"collateralSurplusBalance",e.collateralSurplusBalance,t.collateralSurplusBalance),price:this._updateIfChanged(c,"price",e.price,t.price),lusdInStabilityPool:this._updateIfChanged(c,"lusdInStabilityPool",e.lusdInStabilityPool,t.lusdInStabilityPool),total:this._updateIfChanged(d,"total",e.total,t.total),totalRedistributed:this._updateIfChanged(d,"totalRedistributed",e.totalRedistributed,t.totalRedistributed),troveBeforeRedistribution:this._updateIfChanged(d,"troveBeforeRedistribution",e.troveBeforeRedistribution,t.troveBeforeRedistribution),stabilityDeposit:this._updateIfChanged(d,"stabilityDeposit",e.stabilityDeposit,t.stabilityDeposit),remainingStabilityPoolLQTYReward:this._silentlyUpdateIfChanged(c,e.remainingStabilityPoolLQTYReward,t.remainingStabilityPoolLQTYReward),_feesInNormalMode:this._silentlyUpdateIfChanged(d,e._feesInNormalMode,t._feesInNormalMode),lqtyStake:this._updateIfChanged(d,"lqtyStake",e.lqtyStake,t.lqtyStake),totalStakedLQTY:this._updateIfChanged(c,"totalStakedLQTY",e.totalStakedLQTY,t.totalStakedLQTY),_riskiestTroveBeforeRedistribution:this._silentlyUpdateIfChanged(d,e._riskiestTroveBeforeRedistribution,t._riskiestTroveBeforeRedistribution)}}},{key:"_derive",value:function(e){var t=e.troveBeforeRedistribution,n=e.totalRedistributed,a=e._feesInNormalMode,i=e.total,r=e.price,s=e._riskiestTroveBeforeRedistribution,o=a._setRecoveryMode(i.collateralRatioIsBelowCritical(r));return{trove:t.applyRedistribution(n),fees:o,borrowingRate:o.borrowingRate(),redemptionRate:o.redemptionRate(),haveUndercollateralizedTroves:s.applyRedistribution(n).collateralRatioIsBelowMinimum(r)}}},{key:"_reduceDerived",value:function(e,t){return{fees:this._updateFees("fees",e.fees,t.fees),trove:this._updateIfChanged(d,"trove",e.trove,t.trove),borrowingRate:this._silentlyUpdateIfChanged(c,e.borrowingRate,t.borrowingRate),redemptionRate:this._silentlyUpdateIfChanged(c,e.redemptionRate,t.redemptionRate),haveUndercollateralizedTroves:this._updateIfChanged(l,"haveUndercollateralizedTroves",e.haveUndercollateralizedTroves,t.haveUndercollateralizedTroves)}}},{key:"_notify",value:function(e){var t=this;a(this._listeners).forEach((function(n){t._listeners.has(n)&&n(e)}))}},{key:"subscribe",value:function(e){var t,n=this,a=(t=e,function(){return t.apply(void 0,arguments)});return this._listeners.add(a),function(){n._listeners.delete(a)}}},{key:"_load",value:function(e,t){u.default(!this._loaded),this._baseState=e,this._derivedState=this._derive(e),this._extraState=t,this._loaded=!0,this._scheduleUpdate(),this.onLoaded&&this.onLoaded()}},{key:"_update",value:function(e,t){u.default(this._baseState&&this._derivedState);var n,a,i=this.state;e&&(this._baseState=this._reduce(this._baseState,e)),this._derivedState=this._reduceDerived(this._derivedState,this._derive(this._baseState)),t&&(u.default(this._extraState),this._extraState=this._reduceExtra(this._extraState,t)),this._scheduleUpdate(),this._notify({newState:this.state,oldState:i,stateChange:(n=this.state,a=i,Object.fromEntries(Object.entries(n).filter((function(e){var t=s(e,2),n=t[0];return t[1]!==a[n]}))))})}}]),e}();t.LiquityStore=f},function(e,t,n){"use strict";var a=n(59),i=n(96),r=n(45),s=n(5),o=n(53),u=n(36),l=n(39);Object.defineProperty(t,"__esModule",{value:!0}),t._CachedReadableLiquity=void 0;var c=function(){function e(t,n){u(this,e),this._readable=t,this._cache=n}return l(e,[{key:"getTotalRedistributed",value:function(){var e=o(s.mark((function e(){var t,n,a,i=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getTotalRedistributed.apply(t,i))&&void 0!==a?a:(n=this._readable).getTotalRedistributed.apply(n,i));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTroveBeforeRedistribution",value:function(){var e=o(s.mark((function e(t){var n,a,i,r,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=l[u];return e.abrupt("return",null!==(i=(n=this._cache).getTroveBeforeRedistribution.apply(n,[t].concat(o)))&&void 0!==i?i:(a=this._readable).getTroveBeforeRedistribution.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTrove",value:function(){var e=o(s.mark((function e(t){var n,a,i,o,u,l,c,d=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=d.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=d[i];return e.next=3,Promise.all([this.getTroveBeforeRedistribution.apply(this,[t].concat(a)),this.getTotalRedistributed.apply(this,a)]);case 3:return o=e.sent,u=r(o,2),l=u[0],c=u[1],e.abrupt("return",l.applyRedistribution(c));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getNumberOfTroves",value:function(){var e=o(s.mark((function e(){var t,n,a,i=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getNumberOfTroves.apply(t,i))&&void 0!==a?a:(n=this._readable).getNumberOfTroves.apply(n,i));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPrice",value:function(){var e=o(s.mark((function e(){var t,n,a,i=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getPrice.apply(t,i))&&void 0!==a?a:(n=this._readable).getPrice.apply(n,i));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTotal",value:function(){var e=o(s.mark((function e(){var t,n,a,i=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getTotal.apply(t,i))&&void 0!==a?a:(n=this._readable).getTotal.apply(n,i));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getStabilityDeposit",value:function(){var e=o(s.mark((function e(t){var n,a,i,r,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=l[u];return e.abrupt("return",null!==(i=(n=this._cache).getStabilityDeposit.apply(n,[t].concat(o)))&&void 0!==i?i:(a=this._readable).getStabilityDeposit.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRemainingStabilityPoolLQTYReward",value:function(){var e=o(s.mark((function e(){var t,n,a,i=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getRemainingStabilityPoolLQTYReward.apply(t,i))&&void 0!==a?a:(n=this._readable).getRemainingStabilityPoolLQTYReward.apply(n,i));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getLUSDInStabilityPool",value:function(){var e=o(s.mark((function e(){var t,n,a,i=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getLUSDInStabilityPool.apply(t,i))&&void 0!==a?a:(n=this._readable).getLUSDInStabilityPool.apply(n,i));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getLUSDBalance",value:function(){var e=o(s.mark((function e(t){var n,a,i,r,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=l[u];return e.abrupt("return",null!==(i=(n=this._cache).getLUSDBalance.apply(n,[t].concat(o)))&&void 0!==i?i:(a=this._readable).getLUSDBalance.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLQTYBalance",value:function(){var e=o(s.mark((function e(t){var n,a,i,r,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=l[u];return e.abrupt("return",null!==(i=(n=this._cache).getLQTYBalance.apply(n,[t].concat(o)))&&void 0!==i?i:(a=this._readable).getLQTYBalance.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUniTokenBalance",value:function(){var e=o(s.mark((function e(t){var n,a,i,r,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=l[u];return e.abrupt("return",null!==(i=(n=this._cache).getUniTokenBalance.apply(n,[t].concat(o)))&&void 0!==i?i:(a=this._readable).getUniTokenBalance.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUniTokenAllowance",value:function(){var e=o(s.mark((function e(t){var n,a,i,r,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=l[u];return e.abrupt("return",null!==(i=(n=this._cache).getUniTokenAllowance.apply(n,[t].concat(o)))&&void 0!==i?i:(a=this._readable).getUniTokenAllowance.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRemainingLiquidityMiningLQTYReward",value:function(){var e=o(s.mark((function e(){var t,n,a,i=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getRemainingLiquidityMiningLQTYReward.apply(t,i))&&void 0!==a?a:(n=this._readable).getRemainingLiquidityMiningLQTYReward.apply(n,i));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getLiquidityMiningStake",value:function(){var e=o(s.mark((function e(t){var n,a,i,r,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=l[u];return e.abrupt("return",null!==(i=(n=this._cache).getLiquidityMiningStake.apply(n,[t].concat(o)))&&void 0!==i?i:(a=this._readable).getLiquidityMiningStake.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTotalStakedUniTokens",value:function(){var e=o(s.mark((function e(){var t,n,a,i=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getTotalStakedUniTokens.apply(t,i))&&void 0!==a?a:(n=this._readable).getTotalStakedUniTokens.apply(n,i));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getLiquidityMiningLQTYReward",value:function(){var e=o(s.mark((function e(t){var n,a,i,r,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=l[u];return e.abrupt("return",null!==(i=(n=this._cache).getLiquidityMiningLQTYReward.apply(n,[t].concat(o)))&&void 0!==i?i:(a=this._readable).getLiquidityMiningLQTYReward.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCollateralSurplusBalance",value:function(){var e=o(s.mark((function e(t){var n,a,i,r,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=l[u];return e.abrupt("return",null!==(i=(n=this._cache).getCollateralSurplusBalance.apply(n,[t].concat(o)))&&void 0!==i?i:(a=this._readable).getCollateralSurplusBalance.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTroves",value:function(){var e=o(s.mark((function e(t){var n,o,u,l,c,d,p,y,f,b,m,h,v=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(l=t.beforeRedistribution,c=i(t,["beforeRedistribution"]),d=v.length,p=new Array(d>1?d-1:0),y=1;y<d;y++)p[y-1]=v[y];return e.next=4,Promise.all([l?void 0:this.getTotalRedistributed.apply(this,p),null!==(u=(n=this._cache).getTroves.apply(n,[a({beforeRedistribution:!0},c)].concat(p)))&&void 0!==u?u:(o=this._readable).getTroves.apply(o,[a({beforeRedistribution:!0},c)].concat(p))]);case 4:if(f=e.sent,b=r(f,2),m=b[0],h=b[1],!m){e.next=12;break}return e.abrupt("return",h.map((function(e){return e.applyRedistribution(m)})));case 12:return e.abrupt("return",h);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFees",value:function(){var e=o(s.mark((function e(){var t,n,a,i=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getFees.apply(t,i))&&void 0!==a?a:(n=this._readable).getFees.apply(n,i));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getLQTYStake",value:function(){var e=o(s.mark((function e(t){var n,a,i,r,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=l[u];return e.abrupt("return",null!==(i=(n=this._cache).getLQTYStake.apply(n,[t].concat(o)))&&void 0!==i?i:(a=this._readable).getLQTYStake.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTotalStakedLQTY",value:function(){var e=o(s.mark((function e(){var t,n,a,i=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getTotalStakedLQTY.apply(t,i))&&void 0!==a?a:(n=this._readable).getTotalStakedLQTY.apply(n,i));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFrontendStatus",value:function(){var e=o(s.mark((function e(t){var n,a,i,r,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=l[u];return e.abrupt("return",null!==(i=(n=this._cache).getFrontendStatus.apply(n,[t].concat(o)))&&void 0!==i?i:(a=this._readable).getFrontendStatus.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();t._CachedReadableLiquity=c},function(e){e.exports=JSON.parse("null")},function(e){e.exports=JSON.parse('{"chainId":5,"version":"5174ecd0da4842157aba989499200d690b7e374f","deploymentDate":1617356502000,"bootstrapPeriod":1209600,"totalStabilityPoolLQTYReward":"32000000","liquidityMiningLQTYRewardRate":"0.257201646090534979","_priceFeedIsTestnet":true,"_uniTokenIsMock":false,"_isDev":false,"startBlock":4547952,"addresses":{"activePool":"0x5948018DEeC14642E6127c5a3AC4081798bB73d8","borrowerOperations":"0xa36bA16411AF139737E8E345Cd9422a47856bECa","troveManager":"0x964Ef77E870db852BAc7928D860dA44c2B36e753","collSurplusPool":"0x31b517f122Db8e8bC95D2666dF4818622187aFC8","communityIssuance":"0xba8B1775f2f75D195A0d6F987E519FeA8A972421","defaultPool":"0x9aC8F88bB2C10DBF05848b0a7C62A216356135Fd","hintHelpers":"0x404d59b7ac711E7921106D948b55E4a61f1Ba545","lockupContractFactory":"0x7F46B93795f15118b1049201922fe04b41acA160","lqtyStaking":"0x25589D63a3a9835Af5E00ADeeEB415a4f5B5fe9C","priceFeed":"0x7620B306164bc5d5491b99b8ACd515a06b15f29B","sortedTroves":"0xBf7022bae995A8690A14e59284c48F7dF6b9F6F2","stabilityPool":"0xC3809338e11f64B6a0b04c06AB3aC180bD781520","gasPool":"0x9440CD7990b122099A8eF59F74668206C660eED5","unipool":"0xf195b1B4E8F74C91a4D3013626752eB108D7Ed9B","lusdToken":"0xfBf329Bd38D57e0db8777915d4835341b97052A9","lqtyToken":"0x88c7446d72F60471F298629dCB7F28EE7E0E5C3f","multiTroveGetter":"0x251ce26Bc4604Cd2471f7D7F7bDedd2973211d17","uniToken":"0xc693D2CC6e5f9251594F132Ba6CA9DB106eF845b"}}')},function(e){e.exports=JSON.parse('{"chainId":42,"version":"5174ecd0da4842157aba989499200d690b7e374f","deploymentDate":1617374516000,"bootstrapPeriod":1209600,"totalStabilityPoolLQTYReward":"32000000","liquidityMiningLQTYRewardRate":"0.257201646090534979","_priceFeedIsTestnet":false,"_uniTokenIsMock":false,"_isDev":false,"startBlock":24134777,"addresses":{"activePool":"0x2FEB8CC8eD32117D1F39168543f29c30fdf10105","borrowerOperations":"0xA289111CC4b306E3F5F15c654D4c318B3dA51813","troveManager":"0x5EBeC1ecc36a760A54E35d474F889EfB9E7eD2aD","collSurplusPool":"0x1Ce340cC663BDbda54ccb6055da4064C0B7f68cd","communityIssuance":"0x7baD384C67302df52Ee78Acc3581c9d9c51F9527","defaultPool":"0x706431F2252ba2e5A9a6F7EEFE5CB4902acc23E7","hintHelpers":"0xEEBfA9A488E9d83cd1a49b838c14D9231F5F2fCb","lockupContractFactory":"0xc34B9083Bf5b5794eFD202A8c3B51A5577e087c1","lqtyStaking":"0x82b7384e360DD3f16ed23D15921BB7a878a08b87","priceFeed":"0xbA49275F8F890E7296F64b3e81F1Ada656030150","sortedTroves":"0x91656701b33eca6425A239930FccAA842D0E2031","stabilityPool":"0x04d630Bff6dea193Fd644dEcfC460db249854a02","gasPool":"0xd97E194C0659F0d7b051EdF3E317BF4F7A675770","unipool":"0xeed1782CaD8bad6eD2072C85e4c5821e67cCf1E1","lusdToken":"0x0b02b94638daa719290b5214825dA625af08A02F","lqtyToken":"0xd8FABEa5752D52Ee0dEbF6c90948F5446694EE7c","multiTroveGetter":"0x9c5977268592E964784EFF50043BFFC035B6b0C7","uniToken":"0x6E14b68E16e4211C06bcc8527D6b92A43AA47806"}}')},function(e){e.exports=JSON.parse('{"chainId":4,"version":"5174ecd0da4842157aba989499200d690b7e374f","deploymentDate":1617355618000,"bootstrapPeriod":1209600,"totalStabilityPoolLQTYReward":"32000000","liquidityMiningLQTYRewardRate":"0.257201646090534979","_priceFeedIsTestnet":false,"_uniTokenIsMock":false,"_isDev":false,"startBlock":8341450,"addresses":{"activePool":"0xbA49275F8F890E7296F64b3e81F1Ada656030150","borrowerOperations":"0x91656701b33eca6425A239930FccAA842D0E2031","troveManager":"0x04d630Bff6dea193Fd644dEcfC460db249854a02","collSurplusPool":"0xd97E194C0659F0d7b051EdF3E317BF4F7A675770","communityIssuance":"0xeed1782CaD8bad6eD2072C85e4c5821e67cCf1E1","defaultPool":"0x0b02b94638daa719290b5214825dA625af08A02F","hintHelpers":"0xd8FABEa5752D52Ee0dEbF6c90948F5446694EE7c","lockupContractFactory":"0x9c5977268592E964784EFF50043BFFC035B6b0C7","lqtyStaking":"0x988749E04e5B0863Da4E0Fdb1EaD85C1FA59fCe3","priceFeed":"0x692Cd2D9Df7EFD91Ccd17F9eEFD72BAEE0584DB9","sortedTroves":"0xac064890c6343F67450ba7aB97df6De38A8D7da8","stabilityPool":"0xB8eb11f9eFF55378dfB692296C32DF020f5CC7fF","gasPool":"0xbbb26b40c1B32ba1F342DAbC65234516dd29BB44","unipool":"0x866b252Acff4c45d6978032865aFb9923D11992A","lusdToken":"0x9C5AE6852622ddE455B6Fca4C1551FC0352531a3","lqtyToken":"0xF74dcAbeA0954AeB6903c8a71d41e468a6B77357","multiTroveGetter":"0x1bE036A6A82b4b774757a48a1bb79653f89eD9fD","uniToken":"0x36A5ec67B9C25D765186FBAd2735f1746bd894D8"}}')},function(e){e.exports=JSON.parse('{"chainId":3,"version":"5174ecd0da4842157aba989499200d690b7e374f","deploymentDate":1617356113000,"bootstrapPeriod":1209600,"totalStabilityPoolLQTYReward":"32000000","liquidityMiningLQTYRewardRate":"0.257201646090534979","_priceFeedIsTestnet":true,"_uniTokenIsMock":false,"_isDev":false,"startBlock":9961294,"addresses":{"activePool":"0x8bE79B54Bff7754B57294077c2B5017AF9f57dC2","borrowerOperations":"0xfe9049E677C5773dd72ac7E19c38c68aB0891744","troveManager":"0xcd89b25a565Ad0895c551DAe040c2b5F9Eb11D64","collSurplusPool":"0x7426EFda9B17992B3F7cE3680D5D128E1F876C05","communityIssuance":"0x94f0835Aa7cEe67fF122419BeE52b82Abe637a16","defaultPool":"0x6412c93AB383B87Af7c5E673fb3a295c8977A3Ed","hintHelpers":"0x82869137C51e0DC1Bf3aeE5bc1f0B73EADfEBB25","lockupContractFactory":"0x65188ae9dDE4A59b73796Eb26AE33a3D5fe9b84d","lqtyStaking":"0x63a7c03b921f5A59D9f583A34585bC6eFc832b59","priceFeed":"0x7151f3828948B8824C677DA8daf7BD13014c1187","sortedTroves":"0xA401f217DB7d84432C98272F637E9d450c6D16f2","stabilityPool":"0x02dD2a33d0bBF40343CD09941F275978b1cd4ab9","gasPool":"0x8c2706b7bF86576F16Db7C099F5a62E7Ce8F0661","unipool":"0x8C2C33247A691a98d05B60c2D7448687b6C56a86","lusdToken":"0x99Fda92878c1d2f1e0971D1937C50CC578A33E3D","lqtyToken":"0x25fE5Ed43aD2370f31414AC9De11E028A699a40e","multiTroveGetter":"0xDA7Aa96fC750B456a63af90D894063009e26f6ba","uniToken":"0x14E87Db22A5a402a0A1461FAE94fade1976AAaF7"}}')},function(e){e.exports=JSON.parse('{"chainId":1,"version":"5174ecd0da4842157aba989499200d690b7e374f","deploymentDate":1617611590000,"bootstrapPeriod":1209600,"totalStabilityPoolLQTYReward":"32000000","liquidityMiningLQTYRewardRate":"0.367430922986478542","_priceFeedIsTestnet":false,"_uniTokenIsMock":false,"_isDev":false,"startBlock":12178551,"addresses":{"activePool":"0xDf9Eb223bAFBE5c5271415C75aeCD68C21fE3D7F","borrowerOperations":"0x24179CD81c9e782A4096035f7eC97fB8B783e007","troveManager":"0xA39739EF8b0231DbFA0DcdA07d7e29faAbCf4bb2","collSurplusPool":"0x3D32e8b97Ed5881324241Cf03b2DA5E2EBcE5521","communityIssuance":"0xD8c9D9071123a059C6E0A945cF0e0c82b508d816","defaultPool":"0x896a3F03176f05CFbb4f006BfCd8723F2B0D741C","hintHelpers":"0xE84251b93D9524E0d2e621Ba7dc7cb3579F997C0","lockupContractFactory":"0x2eBeF24dA09489218Ba2BECb01867F6DaAeDcD4B","lqtyStaking":"0x4f9Fbb3f1E99B56e0Fe2892e623Ed36A76Fc605d","priceFeed":"0x4c517D4e2C851CA76d7eC94B805269Df0f2201De","sortedTroves":"0x8FdD3fbFEb32b28fb73555518f8b361bCeA741A6","stabilityPool":"0x66017D22b0f8556afDd19FC67041899Eb65a21bb","gasPool":"0x9555b042F969E561855e5F28cB1230819149A8d9","unipool":"0xd37a77E71ddF3373a79BE2eBB76B6c4808bDF0d5","lusdToken":"0x5f98805A4E8be255a32880FDeC7F6728C6568bA0","lqtyToken":"0x6DEA81C8171D0bA574754EF6F8b412F2Ed88c54D","multiTroveGetter":"0xFc92d0E9Fa35df17E3A6d9F40716ca2cE749922B","uniToken":"0xF20EF17b889b437C151eB5bA15A47bFc62bfF469"}}')},function(e){e.exports=JSON.parse('{"chainId":444900,"version":"43b14b458053d942a2c70454a7b60de3ebb48031","deploymentDate":1646833508000,"bootstrapPeriod":1209600,"totalStabilityPoolLQTYReward":"32000000","liquidityMiningLQTYRewardRate":"0.257201646090534979","_priceFeedIsTestnet":true,"_uniTokenIsMock":true,"_isDev":false,"startBlock":5401261,"addresses":{"activePool":"0x6bD06C0b65A2D2a0596e6E9eB985Deae39631ab7","borrowerOperations":"0x466fBDC0D26320b97E72C9B159A5F911c527f2B0","troveManager":"0xd6590b5025ACd70b1e75A5771921aa33488ef475","collSurplusPool":"0x66603df5Db8cb199af004B2dcCCCa60C0FA7C130","communityIssuance":"0xd43ce8457FcEA21621A4Fc39A383D7Dd3b8DCd9F","defaultPool":"0xF93FD0EF8851b1Fb0720F11f20583807c42e2381","hintHelpers":"0x16737398E843A3c30aC838965fD58f243146869E","lockupContractFactory":"0x2cB1e2AA2773A26E3CBe9a84618D7dbB605A94fc","lqtyStaking":"0x7d196274DA039728DA627Ac286b3b851707255a7","priceFeed":"0x23D6DE9C6d8e603C239B56fB0C9C852d5428D078","sortedTroves":"0xF585890a246B021B088EdA1CA389199210F71f1B","stabilityPool":"0x2C1A33138775C472A427900F7f8c777B34FBb849","gasPool":"0x7C37B38D086ffA6450927582Af89ed38de52413F","unipool":"0xC6eDb16FaDE679235982cddb0350F9aaED45aC7a","lusdToken":"0xe148eD55e192C14a44584593cFb0b153cF196902","lqtyToken":"0x3987D82148f3720b8401BbbfB69629e460252e12","multiTroveGetter":"0x9c667928F668A2d7D2e02576A300D1bB7745720E","uniToken":"0x5504803fa7D13eC8B7F94Aeb7809DE29273fEe0a"}}')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newActivePoolAddress","type":"address"}],"name":"ActivePoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_ETH","type":"uint256"}],"name":"ActivePoolETHBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_LUSDDebt","type":"uint256"}],"name":"ActivePoolLUSDDebtUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newBorrowerOperationsAddress","type":"address"}],"name":"BorrowerOperationsAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newDefaultPoolAddress","type":"address"}],"name":"DefaultPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_newBalance","type":"uint256"}],"name":"ETHBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_to","type":"address"},{"indexed":false,"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"EtherSent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_newBalance","type":"uint256"}],"name":"LUSDBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newStabilityPoolAddress","type":"address"}],"name":"StabilityPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newTroveManagerAddress","type":"address"}],"name":"TroveManagerAddressChanged","type":"event"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"borrowerOperationsAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"decreaseLUSDDebt","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"defaultPoolAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getETH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getLUSDDebt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"increaseLUSDDebt","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"sendETH","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_borrowerOperationsAddress","type":"address"},{"internalType":"address","name":"_troveManagerAddress","type":"address"},{"internalType":"address","name":"_stabilityPoolAddress","type":"address"},{"internalType":"address","name":"_defaultPoolAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"stabilityPoolAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"troveManagerAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"stateMutability":"payable","type":"receive"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_activePoolAddress","type":"address"}],"name":"ActivePoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_collSurplusPoolAddress","type":"address"}],"name":"CollSurplusPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_defaultPoolAddress","type":"address"}],"name":"DefaultPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_gasPoolAddress","type":"address"}],"name":"GasPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_lqtyStakingAddress","type":"address"}],"name":"LQTYStakingAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_borrower","type":"address"},{"indexed":false,"internalType":"uint256","name":"_LUSDFee","type":"uint256"}],"name":"LUSDBorrowingFeePaid","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_lusdTokenAddress","type":"address"}],"name":"LUSDTokenAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newPriceFeedAddress","type":"address"}],"name":"PriceFeedAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_sortedTrovesAddress","type":"address"}],"name":"SortedTrovesAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_stabilityPoolAddress","type":"address"}],"name":"StabilityPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_borrower","type":"address"},{"indexed":false,"internalType":"uint256","name":"arrayIndex","type":"uint256"}],"name":"TroveCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newTroveManagerAddress","type":"address"}],"name":"TroveManagerAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_borrower","type":"address"},{"indexed":false,"internalType":"uint256","name":"_debt","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_coll","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"stake","type":"uint256"},{"indexed":false,"internalType":"enum BorrowerOperations.BorrowerOperation","name":"operation","type":"uint8"}],"name":"TroveUpdated","type":"event"},{"inputs":[],"name":"BORROWING_FEE_FLOOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"CCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"DECIMAL_PRECISION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"LUSD_GAS_COMPENSATION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MIN_NET_DEBT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PERCENT_DIVISOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_100pct","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"activePool","outputs":[{"internalType":"contract IActivePool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_upperHint","type":"address"},{"internalType":"address","name":"_lowerHint","type":"address"}],"name":"addColl","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_maxFeePercentage","type":"uint256"},{"internalType":"uint256","name":"_collWithdrawal","type":"uint256"},{"internalType":"uint256","name":"_LUSDChange","type":"uint256"},{"internalType":"bool","name":"_isDebtIncrease","type":"bool"},{"internalType":"address","name":"_upperHint","type":"address"},{"internalType":"address","name":"_lowerHint","type":"address"}],"name":"adjustTrove","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"claimCollateral","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"closeTrove","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"defaultPool","outputs":[{"internalType":"contract IDefaultPool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_debt","type":"uint256"}],"name":"getCompositeDebt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"getEntireSystemColl","outputs":[{"internalType":"uint256","name":"entireSystemColl","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntireSystemDebt","outputs":[{"internalType":"uint256","name":"entireSystemDebt","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lqtyStaking","outputs":[{"internalType":"contract ILQTYStaking","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lqtyStakingAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lusdToken","outputs":[{"internalType":"contract ILUSDToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"},{"internalType":"address","name":"_upperHint","type":"address"},{"internalType":"address","name":"_lowerHint","type":"address"}],"name":"moveETHGainToTrove","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_maxFeePercentage","type":"uint256"},{"internalType":"uint256","name":"_LUSDAmount","type":"uint256"},{"internalType":"address","name":"_upperHint","type":"address"},{"internalType":"address","name":"_lowerHint","type":"address"}],"name":"openTrove","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"priceFeed","outputs":[{"internalType":"contract IPriceFeed","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_LUSDAmount","type":"uint256"},{"internalType":"address","name":"_upperHint","type":"address"},{"internalType":"address","name":"_lowerHint","type":"address"}],"name":"repayLUSD","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_troveManagerAddress","type":"address"},{"internalType":"address","name":"_activePoolAddress","type":"address"},{"internalType":"address","name":"_defaultPoolAddress","type":"address"},{"internalType":"address","name":"_stabilityPoolAddress","type":"address"},{"internalType":"address","name":"_gasPoolAddress","type":"address"},{"internalType":"address","name":"_collSurplusPoolAddress","type":"address"},{"internalType":"address","name":"_priceFeedAddress","type":"address"},{"internalType":"address","name":"_sortedTrovesAddress","type":"address"},{"internalType":"address","name":"_lusdTokenAddress","type":"address"},{"internalType":"address","name":"_lqtyStakingAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"sortedTroves","outputs":[{"internalType":"contract ISortedTroves","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"troveManager","outputs":[{"internalType":"contract ITroveManager","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_collWithdrawal","type":"uint256"},{"internalType":"address","name":"_upperHint","type":"address"},{"internalType":"address","name":"_lowerHint","type":"address"}],"name":"withdrawColl","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_maxFeePercentage","type":"uint256"},{"internalType":"uint256","name":"_LUSDAmount","type":"uint256"},{"internalType":"address","name":"_upperHint","type":"address"},{"internalType":"address","name":"_lowerHint","type":"address"}],"name":"withdrawLUSD","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_activePoolAddress","type":"address"}],"name":"ActivePoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_baseRate","type":"uint256"}],"name":"BaseRateUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newBorrowerOperationsAddress","type":"address"}],"name":"BorrowerOperationsAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_collSurplusPoolAddress","type":"address"}],"name":"CollSurplusPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_defaultPoolAddress","type":"address"}],"name":"DefaultPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_gasPoolAddress","type":"address"}],"name":"GasPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_lqtyStakingAddress","type":"address"}],"name":"LQTYStakingAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_lqtyTokenAddress","type":"address"}],"name":"LQTYTokenAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_L_ETH","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_L_LUSDDebt","type":"uint256"}],"name":"LTermsUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newLUSDTokenAddress","type":"address"}],"name":"LUSDTokenAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_lastFeeOpTime","type":"uint256"}],"name":"LastFeeOpTimeUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_liquidatedDebt","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_liquidatedColl","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_collGasCompensation","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_LUSDGasCompensation","type":"uint256"}],"name":"Liquidation","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newPriceFeedAddress","type":"address"}],"name":"PriceFeedAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_attemptedLUSDAmount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_actualLUSDAmount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_ETHSent","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_ETHFee","type":"uint256"}],"name":"Redemption","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_sortedTrovesAddress","type":"address"}],"name":"SortedTrovesAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_stabilityPoolAddress","type":"address"}],"name":"StabilityPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_totalStakesSnapshot","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_totalCollateralSnapshot","type":"uint256"}],"name":"SystemSnapshotsUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_newTotalStakes","type":"uint256"}],"name":"TotalStakesUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_borrower","type":"address"},{"indexed":false,"internalType":"uint256","name":"_newIndex","type":"uint256"}],"name":"TroveIndexUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_borrower","type":"address"},{"indexed":false,"internalType":"uint256","name":"_debt","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_coll","type":"uint256"},{"indexed":false,"internalType":"enum TroveManager.TroveManagerOperation","name":"_operation","type":"uint8"}],"name":"TroveLiquidated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_L_ETH","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_L_LUSDDebt","type":"uint256"}],"name":"TroveSnapshotsUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_borrower","type":"address"},{"indexed":false,"internalType":"uint256","name":"_debt","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_coll","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_stake","type":"uint256"},{"indexed":false,"internalType":"enum TroveManager.TroveManagerOperation","name":"_operation","type":"uint8"}],"name":"TroveUpdated","type":"event"},{"inputs":[],"name":"BETA","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"BOOTSTRAP_PERIOD","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"BORROWING_FEE_FLOOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"CCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"DECIMAL_PRECISION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"LUSD_GAS_COMPENSATION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"L_ETH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"L_LUSDDebt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_BORROWING_FEE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MINUTE_DECAY_FACTOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MIN_NET_DEBT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PERCENT_DIVISOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"REDEMPTION_FEE_FLOOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"SECONDS_IN_ONE_MINUTE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"TroveOwners","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"Troves","outputs":[{"internalType":"uint256","name":"debt","type":"uint256"},{"internalType":"uint256","name":"coll","type":"uint256"},{"internalType":"uint256","name":"stake","type":"uint256"},{"internalType":"enum TroveManager.Status","name":"status","type":"uint8"},{"internalType":"uint128","name":"arrayIndex","type":"uint128"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_100pct","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"activePool","outputs":[{"internalType":"contract IActivePool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"addTroveOwnerToArray","outputs":[{"internalType":"uint256","name":"index","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"applyPendingRewards","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"baseRate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address[]","name":"_troveArray","type":"address[]"}],"name":"batchLiquidateTroves","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"borrowerOperationsAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"checkRecoveryMode","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"closeTrove","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"decayBaseRateFromBorrowing","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"},{"internalType":"uint256","name":"_collDecrease","type":"uint256"}],"name":"decreaseTroveColl","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"},{"internalType":"uint256","name":"_debtDecrease","type":"uint256"}],"name":"decreaseTroveDebt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"defaultPool","outputs":[{"internalType":"contract IDefaultPool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_LUSDDebt","type":"uint256"}],"name":"getBorrowingFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_LUSDDebt","type":"uint256"}],"name":"getBorrowingFeeWithDecay","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getBorrowingRate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getBorrowingRateWithDecay","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"},{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"getCurrentICR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"getEntireDebtAndColl","outputs":[{"internalType":"uint256","name":"debt","type":"uint256"},{"internalType":"uint256","name":"coll","type":"uint256"},{"internalType":"uint256","name":"pendingLUSDDebtReward","type":"uint256"},{"internalType":"uint256","name":"pendingETHReward","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntireSystemColl","outputs":[{"internalType":"uint256","name":"entireSystemColl","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntireSystemDebt","outputs":[{"internalType":"uint256","name":"entireSystemDebt","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"getNominalICR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"getPendingETHReward","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"getPendingLUSDDebtReward","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_ETHDrawn","type":"uint256"}],"name":"getRedemptionFeeWithDecay","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getRedemptionRate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getRedemptionRateWithDecay","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"getTCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"getTroveColl","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"getTroveDebt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"}],"name":"getTroveFromTroveOwnersArray","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTroveOwnersCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"getTroveStake","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"getTroveStatus","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"hasPendingRewards","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"},{"internalType":"uint256","name":"_collIncrease","type":"uint256"}],"name":"increaseTroveColl","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"},{"internalType":"uint256","name":"_debtIncrease","type":"uint256"}],"name":"increaseTroveDebt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastETHError_Redistribution","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastFeeOperationTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastLUSDDebtError_Redistribution","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"liquidate","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_n","type":"uint256"}],"name":"liquidateTroves","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"lqtyStaking","outputs":[{"internalType":"contract ILQTYStaking","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lqtyToken","outputs":[{"internalType":"contract ILQTYToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lusdToken","outputs":[{"internalType":"contract ILUSDToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"priceFeed","outputs":[{"internalType":"contract IPriceFeed","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_LUSDamount","type":"uint256"},{"internalType":"address","name":"_firstRedemptionHint","type":"address"},{"internalType":"address","name":"_upperPartialRedemptionHint","type":"address"},{"internalType":"address","name":"_lowerPartialRedemptionHint","type":"address"},{"internalType":"uint256","name":"_partialRedemptionHintNICR","type":"uint256"},{"internalType":"uint256","name":"_maxIterations","type":"uint256"},{"internalType":"uint256","name":"_maxFeePercentage","type":"uint256"}],"name":"redeemCollateral","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"removeStake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"rewardSnapshots","outputs":[{"internalType":"uint256","name":"ETH","type":"uint256"},{"internalType":"uint256","name":"LUSDDebt","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrowerOperationsAddress","type":"address"},{"internalType":"address","name":"_activePoolAddress","type":"address"},{"internalType":"address","name":"_defaultPoolAddress","type":"address"},{"internalType":"address","name":"_stabilityPoolAddress","type":"address"},{"internalType":"address","name":"_gasPoolAddress","type":"address"},{"internalType":"address","name":"_collSurplusPoolAddress","type":"address"},{"internalType":"address","name":"_priceFeedAddress","type":"address"},{"internalType":"address","name":"_lusdTokenAddress","type":"address"},{"internalType":"address","name":"_sortedTrovesAddress","type":"address"},{"internalType":"address","name":"_lqtyTokenAddress","type":"address"},{"internalType":"address","name":"_lqtyStakingAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"},{"internalType":"uint256","name":"_num","type":"uint256"}],"name":"setTroveStatus","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"sortedTroves","outputs":[{"internalType":"contract ISortedTroves","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"stabilityPool","outputs":[{"internalType":"contract IStabilityPool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalCollateralSnapshot","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalStakes","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalStakesSnapshot","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"updateStakeAndTotalStakes","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"updateTroveRewardSnapshots","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"_troveManagerAddress","type":"address"},{"internalType":"address","name":"_stabilityPoolAddress","type":"address"},{"internalType":"address","name":"_borrowerOperationsAddress","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newBorrowerOperationsAddress","type":"address"}],"name":"BorrowerOperationsAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_user","type":"address"},{"indexed":false,"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"LUSDTokenBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newStabilityPoolAddress","type":"address"}],"name":"StabilityPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_troveManagerAddress","type":"address"}],"name":"TroveManagerAddressChanged","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"borrowerOperationsAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"domainSeparator","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"nonces","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"deadline","type":"uint256"},{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"permit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"permitTypeHash","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_poolAddress","type":"address"},{"internalType":"address","name":"_receiver","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"returnFromPool","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_sender","type":"address"},{"internalType":"address","name":"_poolAddress","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"sendToPool","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"stabilityPoolAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"troveManagerAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"version","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newActivePoolAddress","type":"address"}],"name":"ActivePoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newBorrowerOperationsAddress","type":"address"}],"name":"BorrowerOperationsAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_account","type":"address"},{"indexed":false,"internalType":"uint256","name":"_newBalance","type":"uint256"}],"name":"CollBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_to","type":"address"},{"indexed":false,"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"EtherSent","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newTroveManagerAddress","type":"address"}],"name":"TroveManagerAddressChanged","type":"event"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"accountSurplus","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"activePoolAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"borrowerOperationsAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"}],"name":"claimColl","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"}],"name":"getCollateral","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getETH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrowerOperationsAddress","type":"address"},{"internalType":"address","name":"_troveManagerAddress","type":"address"},{"internalType":"address","name":"_activePoolAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"troveManagerAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"stateMutability":"payable","type":"receive"}]')},function(e){e.exports=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_lqtyTokenAddress","type":"address"}],"name":"LQTYTokenAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_stabilityPoolAddress","type":"address"}],"name":"StabilityPoolAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_totalLQTYIssued","type":"uint256"}],"name":"TotalLQTYIssuedUpdated","type":"event"},{"inputs":[],"name":"DECIMAL_PRECISION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ISSUANCE_FACTOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"LQTYSupplyCap","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"SECONDS_IN_ONE_MINUTE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"deploymentTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"issueLQTY","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"lqtyToken","outputs":[{"internalType":"contract ILQTYToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"uint256","name":"_LQTYamount","type":"uint256"}],"name":"sendLQTY","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_lqtyTokenAddress","type":"address"},{"internalType":"address","name":"_stabilityPoolAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"stabilityPoolAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalLQTYIssued","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newActivePoolAddress","type":"address"}],"name":"ActivePoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newDefaultPoolAddress","type":"address"}],"name":"DefaultPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_ETH","type":"uint256"}],"name":"DefaultPoolETHBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_LUSDDebt","type":"uint256"}],"name":"DefaultPoolLUSDDebtUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_newBalance","type":"uint256"}],"name":"ETHBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_to","type":"address"},{"indexed":false,"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"EtherSent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_newBalance","type":"uint256"}],"name":"LUSDBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newStabilityPoolAddress","type":"address"}],"name":"StabilityPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newTroveManagerAddress","type":"address"}],"name":"TroveManagerAddressChanged","type":"event"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"activePoolAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"decreaseLUSDDebt","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getETH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getLUSDDebt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"increaseLUSDDebt","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"sendETHToActivePool","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_troveManagerAddress","type":"address"},{"internalType":"address","name":"_activePoolAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"troveManagerAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"stateMutability":"payable","type":"receive"}]')},function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"_communityIssuanceAddress","type":"address"},{"internalType":"address","name":"_lqtyStakingAddress","type":"address"},{"internalType":"address","name":"_lockupFactoryAddress","type":"address"},{"internalType":"address","name":"_bountyAddress","type":"address"},{"internalType":"address","name":"_lpRewardsAddress","type":"address"},{"internalType":"address","name":"_multisigAddress","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_communityIssuanceAddress","type":"address"}],"name":"CommunityIssuanceAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_lqtyStakingAddress","type":"address"}],"name":"LQTYStakingAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_lockupContractFactoryAddress","type":"address"}],"name":"LockupContractFactoryAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"ONE_YEAR_IN_SECONDS","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"communityIssuanceAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"domainSeparator","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getDeploymentStartTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getLpRewardsEntitlement","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"lockupContractFactory","outputs":[{"internalType":"contract ILockupContractFactory","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lqtyStakingAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"multisigAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"nonces","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"deadline","type":"uint256"},{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"permit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"permitTypeHash","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_sender","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"sendToLQTYStaking","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"version","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_sortedTrovesAddress","type":"address"}],"name":"SortedTrovesAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_troveManagerAddress","type":"address"}],"name":"TroveManagerAddressChanged","type":"event"},{"inputs":[],"name":"BORROWING_FEE_FLOOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"CCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"DECIMAL_PRECISION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"LUSD_GAS_COMPENSATION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MIN_NET_DEBT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PERCENT_DIVISOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_100pct","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"activePool","outputs":[{"internalType":"contract IActivePool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_coll","type":"uint256"},{"internalType":"uint256","name":"_debt","type":"uint256"},{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"computeCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"uint256","name":"_coll","type":"uint256"},{"internalType":"uint256","name":"_debt","type":"uint256"}],"name":"computeNominalCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"defaultPool","outputs":[{"internalType":"contract IDefaultPool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_CR","type":"uint256"},{"internalType":"uint256","name":"_numTrials","type":"uint256"},{"internalType":"uint256","name":"_inputRandomSeed","type":"uint256"}],"name":"getApproxHint","outputs":[{"internalType":"address","name":"hintAddress","type":"address"},{"internalType":"uint256","name":"diff","type":"uint256"},{"internalType":"uint256","name":"latestRandomSeed","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntireSystemColl","outputs":[{"internalType":"uint256","name":"entireSystemColl","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntireSystemDebt","outputs":[{"internalType":"uint256","name":"entireSystemDebt","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_LUSDamount","type":"uint256"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_maxIterations","type":"uint256"}],"name":"getRedemptionHints","outputs":[{"internalType":"address","name":"firstRedemptionHint","type":"address"},{"internalType":"uint256","name":"partialRedemptionHintNICR","type":"uint256"},{"internalType":"uint256","name":"truncatedLUSDamount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"priceFeed","outputs":[{"internalType":"contract IPriceFeed","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_sortedTrovesAddress","type":"address"},{"internalType":"address","name":"_troveManagerAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"sortedTroves","outputs":[{"internalType":"contract ISortedTroves","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"troveManager","outputs":[{"internalType":"contract ITroveManager","name":"","type":"address"}],"stateMutability":"view","type":"function"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_lqtyTokenAddress","type":"address"}],"name":"LQTYTokenAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_lockupContractAddress","type":"address"},{"indexed":false,"internalType":"address","name":"_beneficiary","type":"address"},{"indexed":false,"internalType":"uint256","name":"_unlockTime","type":"uint256"},{"indexed":false,"internalType":"address","name":"_deployer","type":"address"}],"name":"LockupContractDeployedThroughFactory","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"SECONDS_IN_ONE_YEAR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_beneficiary","type":"address"},{"internalType":"uint256","name":"_unlockTime","type":"uint256"}],"name":"deployLockupContract","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_contractAddress","type":"address"}],"name":"isRegisteredLockup","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"lockupContractToDeployer","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lqtyTokenAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_lqtyTokenAddress","type":"address"}],"name":"setLQTYTokenAddress","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_activePoolAddress","type":"address"}],"name":"ActivePoolAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_borrowerOperationsAddress","type":"address"}],"name":"BorrowerOperationsAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_account","type":"address"},{"indexed":false,"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"EtherSent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_F_ETH","type":"uint256"}],"name":"F_ETHUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_F_LUSD","type":"uint256"}],"name":"F_LUSDUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_lqtyTokenAddress","type":"address"}],"name":"LQTYTokenAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_lusdTokenAddress","type":"address"}],"name":"LUSDTokenAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"staker","type":"address"},{"indexed":false,"internalType":"uint256","name":"newStake","type":"uint256"}],"name":"StakeChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_staker","type":"address"},{"indexed":false,"internalType":"uint256","name":"_F_ETH","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_F_LUSD","type":"uint256"}],"name":"StakerSnapshotsUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"staker","type":"address"},{"indexed":false,"internalType":"uint256","name":"LUSDGain","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"ETHGain","type":"uint256"}],"name":"StakingGainsWithdrawn","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_totalLQTYStaked","type":"uint256"}],"name":"TotalLQTYStakedUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_troveManager","type":"address"}],"name":"TroveManagerAddressSet","type":"event"},{"inputs":[],"name":"DECIMAL_PRECISION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"F_ETH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"F_LUSD","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"activePoolAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"borrowerOperationsAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"}],"name":"getPendingETHGain","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"}],"name":"getPendingLUSDGain","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_ETHFee","type":"uint256"}],"name":"increaseF_ETH","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_LUSDFee","type":"uint256"}],"name":"increaseF_LUSD","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lqtyToken","outputs":[{"internalType":"contract ILQTYToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lusdToken","outputs":[{"internalType":"contract ILUSDToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_lqtyTokenAddress","type":"address"},{"internalType":"address","name":"_lusdTokenAddress","type":"address"},{"internalType":"address","name":"_troveManagerAddress","type":"address"},{"internalType":"address","name":"_borrowerOperationsAddress","type":"address"},{"internalType":"address","name":"_activePoolAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"snapshots","outputs":[{"internalType":"uint256","name":"F_ETH_Snapshot","type":"uint256"},{"internalType":"uint256","name":"F_LUSD_Snapshot","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_LQTYamount","type":"uint256"}],"name":"stake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"stakes","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalLQTYStaked","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"troveManagerAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_LQTYamount","type":"uint256"}],"name":"unstake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"stateMutability":"payable","type":"receive"}]')},function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"contract TroveManager","name":"_troveManager","type":"address"},{"internalType":"contract ISortedTroves","name":"_sortedTroves","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"int256","name":"_startIdx","type":"int256"},{"internalType":"uint256","name":"_count","type":"uint256"}],"name":"getMultipleSortedTroves","outputs":[{"components":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"debt","type":"uint256"},{"internalType":"uint256","name":"coll","type":"uint256"},{"internalType":"uint256","name":"stake","type":"uint256"},{"internalType":"uint256","name":"snapshotETH","type":"uint256"},{"internalType":"uint256","name":"snapshotLUSDDebt","type":"uint256"}],"internalType":"struct MultiTroveGetter.CombinedTroveData[]","name":"_troves","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"sortedTroves","outputs":[{"internalType":"contract ISortedTroves","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"troveManager","outputs":[{"internalType":"contract TroveManager","name":"","type":"address"}],"stateMutability":"view","type":"function"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_lastGoodPrice","type":"uint256"}],"name":"LastGoodPriceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"enum PriceFeed.Status","name":"newStatus","type":"uint8"}],"name":"PriceFeedStatusChanged","type":"event"},{"inputs":[],"name":"DECIMAL_PRECISION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ETHUSD_TELLOR_REQ_ID","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_PRICE_DEVIATION_FROM_PREVIOUS_ROUND","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_PRICE_DIFFERENCE_BETWEEN_ORACLES","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"TARGET_DIGITS","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"TELLOR_DIGITS","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"TIMEOUT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"fetchPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastGoodPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"priceAggregator","outputs":[{"internalType":"contract AggregatorV3Interface","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_priceAggregatorAddress","type":"address"},{"internalType":"address","name":"_tellorCallerAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"status","outputs":[{"internalType":"enum PriceFeed.Status","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"tellorCaller","outputs":[{"internalType":"contract ITellorCaller","name":"","type":"address"}],"stateMutability":"view","type":"function"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_lastGoodPrice","type":"uint256"}],"name":"LastGoodPriceUpdated","type":"event"},{"inputs":[],"name":"fetchPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"price","type":"uint256"}],"name":"setPrice","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_borrowerOperationsAddress","type":"address"}],"name":"BorrowerOperationsAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_id","type":"address"},{"indexed":false,"internalType":"uint256","name":"_NICR","type":"uint256"}],"name":"NodeAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_id","type":"address"}],"name":"NodeRemoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_sortedDoublyLLAddress","type":"address"}],"name":"SortedTrovesAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_troveManagerAddress","type":"address"}],"name":"TroveManagerAddressChanged","type":"event"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"borrowerOperationsAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_id","type":"address"}],"name":"contains","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"data","outputs":[{"internalType":"address","name":"head","type":"address"},{"internalType":"address","name":"tail","type":"address"},{"internalType":"uint256","name":"maxSize","type":"uint256"},{"internalType":"uint256","name":"size","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_NICR","type":"uint256"},{"internalType":"address","name":"_prevId","type":"address"},{"internalType":"address","name":"_nextId","type":"address"}],"name":"findInsertPosition","outputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getFirst","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getLast","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getMaxSize","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_id","type":"address"}],"name":"getNext","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_id","type":"address"}],"name":"getPrev","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getSize","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_id","type":"address"},{"internalType":"uint256","name":"_NICR","type":"uint256"},{"internalType":"address","name":"_prevId","type":"address"},{"internalType":"address","name":"_nextId","type":"address"}],"name":"insert","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"isEmpty","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isFull","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_id","type":"address"},{"internalType":"uint256","name":"_newNICR","type":"uint256"},{"internalType":"address","name":"_prevId","type":"address"},{"internalType":"address","name":"_nextId","type":"address"}],"name":"reInsert","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_id","type":"address"}],"name":"remove","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_size","type":"uint256"},{"internalType":"address","name":"_troveManagerAddress","type":"address"},{"internalType":"address","name":"_borrowerOperationsAddress","type":"address"}],"name":"setParams","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"troveManager","outputs":[{"internalType":"contract ITroveManager","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_NICR","type":"uint256"},{"internalType":"address","name":"_prevId","type":"address"},{"internalType":"address","name":"_nextId","type":"address"}],"name":"validInsertPosition","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newActivePoolAddress","type":"address"}],"name":"ActivePoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newBorrowerOperationsAddress","type":"address"}],"name":"BorrowerOperationsAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newCommunityIssuanceAddress","type":"address"}],"name":"CommunityIssuanceAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newDefaultPoolAddress","type":"address"}],"name":"DefaultPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_depositor","type":"address"},{"indexed":false,"internalType":"uint256","name":"_P","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_S","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_G","type":"uint256"}],"name":"DepositSnapshotUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_depositor","type":"address"},{"indexed":false,"internalType":"uint256","name":"_ETH","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_LUSDLoss","type":"uint256"}],"name":"ETHGainWithdrawn","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint128","name":"_currentEpoch","type":"uint128"}],"name":"EpochUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_to","type":"address"},{"indexed":false,"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"EtherSent","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_frontEnd","type":"address"},{"indexed":false,"internalType":"uint256","name":"_kickbackRate","type":"uint256"}],"name":"FrontEndRegistered","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_frontEnd","type":"address"},{"indexed":false,"internalType":"uint256","name":"_P","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_G","type":"uint256"}],"name":"FrontEndSnapshotUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_frontEnd","type":"address"},{"indexed":false,"internalType":"uint256","name":"_newFrontEndStake","type":"uint256"},{"indexed":false,"internalType":"address","name":"_depositor","type":"address"}],"name":"FrontEndStakeChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_depositor","type":"address"},{"indexed":true,"internalType":"address","name":"_frontEnd","type":"address"}],"name":"FrontEndTagSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_G","type":"uint256"},{"indexed":false,"internalType":"uint128","name":"_epoch","type":"uint128"},{"indexed":false,"internalType":"uint128","name":"_scale","type":"uint128"}],"name":"G_Updated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_depositor","type":"address"},{"indexed":false,"internalType":"uint256","name":"_LQTY","type":"uint256"}],"name":"LQTYPaidToDepositor","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_frontEnd","type":"address"},{"indexed":false,"internalType":"uint256","name":"_LQTY","type":"uint256"}],"name":"LQTYPaidToFrontEnd","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newLUSDTokenAddress","type":"address"}],"name":"LUSDTokenAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_P","type":"uint256"}],"name":"P_Updated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newPriceFeedAddress","type":"address"}],"name":"PriceFeedAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_S","type":"uint256"},{"indexed":false,"internalType":"uint128","name":"_epoch","type":"uint128"},{"indexed":false,"internalType":"uint128","name":"_scale","type":"uint128"}],"name":"S_Updated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint128","name":"_currentScale","type":"uint128"}],"name":"ScaleUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newSortedTrovesAddress","type":"address"}],"name":"SortedTrovesAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_newBalance","type":"uint256"}],"name":"StabilityPoolETHBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_newBalance","type":"uint256"}],"name":"StabilityPoolLUSDBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newTroveManagerAddress","type":"address"}],"name":"TroveManagerAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_depositor","type":"address"},{"indexed":false,"internalType":"uint256","name":"_newDeposit","type":"uint256"}],"name":"UserDepositChanged","type":"event"},{"inputs":[],"name":"BORROWING_FEE_FLOOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"CCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"DECIMAL_PRECISION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"LUSD_GAS_COMPENSATION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MIN_NET_DEBT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"P","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PERCENT_DIVISOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"SCALE_FACTOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_100pct","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"activePool","outputs":[{"internalType":"contract IActivePool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"borrowerOperations","outputs":[{"internalType":"contract IBorrowerOperations","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"communityIssuance","outputs":[{"internalType":"contract ICommunityIssuance","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"currentEpoch","outputs":[{"internalType":"uint128","name":"","type":"uint128"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"currentScale","outputs":[{"internalType":"uint128","name":"","type":"uint128"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"defaultPool","outputs":[{"internalType":"contract IDefaultPool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"depositSnapshots","outputs":[{"internalType":"uint256","name":"S","type":"uint256"},{"internalType":"uint256","name":"P","type":"uint256"},{"internalType":"uint256","name":"G","type":"uint256"},{"internalType":"uint128","name":"scale","type":"uint128"},{"internalType":"uint128","name":"epoch","type":"uint128"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"deposits","outputs":[{"internalType":"uint256","name":"initialValue","type":"uint256"},{"internalType":"address","name":"frontEndTag","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint128","name":"","type":"uint128"},{"internalType":"uint128","name":"","type":"uint128"}],"name":"epochToScaleToG","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint128","name":"","type":"uint128"},{"internalType":"uint128","name":"","type":"uint128"}],"name":"epochToScaleToSum","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"frontEndSnapshots","outputs":[{"internalType":"uint256","name":"S","type":"uint256"},{"internalType":"uint256","name":"P","type":"uint256"},{"internalType":"uint256","name":"G","type":"uint256"},{"internalType":"uint128","name":"scale","type":"uint128"},{"internalType":"uint128","name":"epoch","type":"uint128"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"frontEndStakes","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"frontEnds","outputs":[{"internalType":"uint256","name":"kickbackRate","type":"uint256"},{"internalType":"bool","name":"registered","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_frontEnd","type":"address"}],"name":"getCompoundedFrontEndStake","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_depositor","type":"address"}],"name":"getCompoundedLUSDDeposit","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_depositor","type":"address"}],"name":"getDepositorETHGain","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_depositor","type":"address"}],"name":"getDepositorLQTYGain","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getETH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntireSystemColl","outputs":[{"internalType":"uint256","name":"entireSystemColl","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntireSystemDebt","outputs":[{"internalType":"uint256","name":"entireSystemDebt","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_frontEnd","type":"address"}],"name":"getFrontEndLQTYGain","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTotalLUSDDeposits","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastETHError_Offset","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastLQTYError","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastLUSDLossError_Offset","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lusdToken","outputs":[{"internalType":"contract ILUSDToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_debtToOffset","type":"uint256"},{"internalType":"uint256","name":"_collToAdd","type":"uint256"}],"name":"offset","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"priceFeed","outputs":[{"internalType":"contract IPriceFeed","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"},{"internalType":"address","name":"_frontEndTag","type":"address"}],"name":"provideToSP","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_kickbackRate","type":"uint256"}],"name":"registerFrontEnd","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_borrowerOperationsAddress","type":"address"},{"internalType":"address","name":"_troveManagerAddress","type":"address"},{"internalType":"address","name":"_activePoolAddress","type":"address"},{"internalType":"address","name":"_lusdTokenAddress","type":"address"},{"internalType":"address","name":"_sortedTrovesAddress","type":"address"},{"internalType":"address","name":"_priceFeedAddress","type":"address"},{"internalType":"address","name":"_communityIssuanceAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"sortedTroves","outputs":[{"internalType":"contract ISortedTroves","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"troveManager","outputs":[{"internalType":"contract ITroveManager","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_upperHint","type":"address"},{"internalType":"address","name":"_lowerHint","type":"address"}],"name":"withdrawETHGainToTrove","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"withdrawFromSP","outputs":[],"stateMutability":"nonpayable","type":"function"},{"stateMutability":"payable","type":"receive"}]')},function(e){e.exports=JSON.parse("[]")},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_lqtyTokenAddress","type":"address"}],"name":"LQTYTokenAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"reward","type":"uint256"}],"name":"RewardAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"reward","type":"uint256"}],"name":"RewardPaid","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Staked","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_uniTokenAddress","type":"address"}],"name":"UniTokenAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Withdrawn","type":"event"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"claimReward","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"duration","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"earned","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastTimeRewardApplicable","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastUpdateTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lqtyToken","outputs":[{"internalType":"contract ILQTYToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"periodFinish","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"rewardPerToken","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"rewardPerTokenStored","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"rewardRate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"rewards","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_lqtyTokenAddress","type":"address"},{"internalType":"address","name":"_uniTokenAddress","type":"address"},{"internalType":"uint256","name":"_duration","type":"uint256"}],"name":"setParams","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"stake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"uniToken","outputs":[{"internalType":"contract IERC20","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"userRewardPerTokenPaid","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdrawAndClaim","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]')},function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"symbol","type":"string"},{"internalType":"address","name":"initialAccount","type":"address"},{"internalType":"uint256","name":"initialBalance","type":"uint256"}],"stateMutability":"payable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"approveInternal","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"transferInternal","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._connectToMulticall=void 0;var a=n(72),i=[{constant:!0,inputs:[],name:"getCurrentBlockTimestamp",outputs:[{name:"timestamp",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],r={1:"0xeefba1e63905ef1d7acba5a8513c70307c1ce441",3:"0x53c43764255c17bd724f74c4ef150724ac50a3ed",4:"0x42ad527de7d4e9d9d011ac45b31d8551f8fe9821",5:"0x77dca2c955b15e9de4dbbcf1246b4b85b651e50e",42:"0x2cc8688c5f75e365aaeeb4ea8d6a480405a48d2a"};t._connectToMulticall=function(e,t){return function(e){return e in r}(t)?new a.Contract(r[t],i,e):void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var a=n(36),i=n(39);Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableEthersLiquity=void 0;var r=n(79),s=function(e){var t=void 0,n=0;return function(){var a,i=(a=arguments.length-1)<0||arguments.length<=a?void 0:arguments[a];void 0!==i.blockNumber&&i.blockNumber>n&&(n=i.blockNumber),void 0!==t&&clearTimeout(t),t=setTimeout((function(){e(n),t=void 0}),50)}},o=function(){function e(t){a(this,e),this._readable=t}return i(e,[{key:"watchTotalRedistributed",value:function(e){var t=this,n=r._getContracts(this._readable.connection),a=n.activePool,i=n.defaultPool,o=a.filters.EtherSent(),u=s((function(n){t._readable.getTotalRedistributed({blockTag:n}).then(e)})),l=function(e,t,n){e===i.address&&u(n)};return a.on(o,l),function(){a.removeListener(o,l)}}},{key:"watchTroveWithoutRewards",value:function(e,t){var n=this;null!==t&&void 0!==t||(t=r._requireAddress(this._readable.connection));var a=r._getContracts(this._readable.connection),i=a.troveManager,o=a.borrowerOperations,u=i.filters.TroveUpdated(t),l=o.filters.TroveUpdated(t),c=s((function(a){n._readable.getTroveBeforeRedistribution(t,{blockTag:a}).then(e)}));return i.on(u,c),o.on(l,c),function(){i.removeListener(u,c),o.removeListener(l,c)}}},{key:"watchNumberOfTroves",value:function(e){var t=this,n=r._getContracts(this._readable.connection).troveManager,a=(0,n.filters.TroveUpdated)(),i=s((function(n){t._readable.getNumberOfTroves({blockTag:n}).then(e)}));return n.on(a,i),function(){n.removeListener(a,i)}}},{key:"watchPrice",value:function(e){throw new Error("Method not implemented.")}},{key:"watchTotal",value:function(e){var t=this,n=r._getContracts(this._readable.connection).troveManager,a=(0,n.filters.TroveUpdated)(),i=s((function(n){t._readable.getTotal({blockTag:n}).then(e)}));return n.on(a,i),function(){n.removeListener(a,i)}}},{key:"watchStabilityDeposit",value:function(e,t){var n=this;null!==t&&void 0!==t||(t=r._requireAddress(this._readable.connection));var a=r._getContracts(this._readable.connection),i=a.activePool,o=a.stabilityPool,u=o.filters.UserDepositChanged,l=i.filters.EtherSent,c=u(t),d=l(),p=s((function(a){n._readable.getStabilityDeposit(t,{blockTag:a}).then(e)})),y=function(e,t,n){e===o.address&&p(n)};return o.on(c,p),i.on(d,y),function(){o.removeListener(c,p),i.removeListener(d,y)}}},{key:"watchLUSDInStabilityPool",value:function(e){var t=this,n=r._getContracts(this._readable.connection),a=n.lusdToken,i=n.stabilityPool,o=a.filters.Transfer,u=[o(i.address),o(null,i.address)],l=s((function(n){t._readable.getLUSDInStabilityPool({blockTag:n}).then(e)}));return u.forEach((function(e){return a.on(e,l)})),function(){return u.forEach((function(e){return a.removeListener(e,l)}))}}},{key:"watchLUSDBalance",value:function(e,t){var n=this;null!==t&&void 0!==t||(t=r._requireAddress(this._readable.connection));var a=r._getContracts(this._readable.connection).lusdToken,i=a.filters.Transfer,o=[i(t),i(null,t)],u=s((function(a){n._readable.getLUSDBalance(t,{blockTag:a}).then(e)}));return o.forEach((function(e){return a.on(e,u)})),function(){return o.forEach((function(e){return a.removeListener(e,u)}))}}}]),e}();t.ObservableEthersLiquity=o},,function(e,t,n){"use strict";var a=n(120),i=n(59),r=n(45);Object.defineProperty(t,"__esModule",{value:!0}),t.logsToString=void 0;var s=n(31),o=n(49),u=n(8),l=function(e,t){var n=[],a=[];return e.forEach((function(e){var i=function(e,t){var n=e.address;if(n in t)try{return{address:n,logDescription:t[n].parseLog(e)}}catch(a){console.warn("Failed to parse log:"),console.warn(e),console.warn("Caught:"),console.warn(a)}}(e,t);i?n.push(i):a.push(e)})),[n,a]},c=s.BigNumber.from(10).pow(9),d=function(e,t){var n=Object.entries(e.args).filter((function(e){return!r(e,1)[0].match(/^[0-9]/)})).map((function(e){var n=r(e,2),a=n[0],i=n[1];return"".concat(a,": ").concat(function(e,t){return s.BigNumber.isBigNumber(e)?e.gte(c)?"".concat(u.Decimal.fromBigNumberString(e.toHexString()),"e18"):e.toString():"string"===typeof e?e===o.AddressZero?"address(0)":t&&e in t?t[e]:e:String(e)}(i,t))}));return"".concat(e.name,"({ ").concat(n.join(", ")," })")};t.logsToString=function(e,t){var n=t,s=function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=r(e,2)[1];return[t.address,t.interface]})))}(n),o=function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=r(e,2),n=t[0];return[t[1].address,n]})))}(n),u=i(a({},e.from,"user"),o),c=l(e.logs,s),p=r(c,2),y=p[0],f=p[1];return f.length>0&&(console.warn("Warning: not all logs were parsed. Unparsed logs:"),console.warn(f)),y.length>0?"Logs of tx ".concat(e.transactionHash,":\n")+y.map((function(e){var t=e.address,n=e.logDescription;return"  ".concat(o[t],".").concat(d(n,u))})).join("\n"):"No logs were parsed in tx ".concat(e.transactionHash)}},function(e,t,n){"use strict";var a=n(39),i=n(5),r=n(53),s=n(36),o=n(56),u=n(57);Object.defineProperty(t,"__esModule",{value:!0}),t.EthersLiquity=t.EthersTransactionFailedError=void 0;var l=n(8),c=n(79),d=n(153),p=n(151),y=n(154),f=function(e){o(n,e);var t=u(n);function n(e,a){return s(this,n),t.call(this,"EthersTransactionFailedError",e,a)}return n}(l.TransactionFailedError);t.EthersTransactionFailedError=f;var b=function(){var e=r(i.mark((function e(t){var n;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.waitForReceipt();case 2:if("succeeded"===(n=e.sent).status){e.next=5;break}throw new f("Transaction failed",n);case 5:return e.abrupt("return",n.details);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){function e(t){s(this,e),this._readable=t,this.connection=t.connection,this.populate=new d.PopulatableEthersLiquity(t),this.send=new y.SendableEthersLiquity(this.populate)}return a(e,[{key:"hasStore",value:function(){return!1}},{key:"getTotalRedistributed",value:function(e){return this._readable.getTotalRedistributed(e)}},{key:"getTroveBeforeRedistribution",value:function(e,t){return this._readable.getTroveBeforeRedistribution(e,t)}},{key:"getTrove",value:function(e,t){return this._readable.getTrove(e,t)}},{key:"getNumberOfTroves",value:function(e){return this._readable.getNumberOfTroves(e)}},{key:"getPrice",value:function(e){return this._readable.getPrice(e)}},{key:"_getActivePool",value:function(e){return this._readable._getActivePool(e)}},{key:"_getDefaultPool",value:function(e){return this._readable._getDefaultPool(e)}},{key:"getTotal",value:function(e){return this._readable.getTotal(e)}},{key:"getStabilityDeposit",value:function(e,t){return this._readable.getStabilityDeposit(e,t)}},{key:"getRemainingStabilityPoolLQTYReward",value:function(e){return this._readable.getRemainingStabilityPoolLQTYReward(e)}},{key:"getLUSDInStabilityPool",value:function(e){return this._readable.getLUSDInStabilityPool(e)}},{key:"getLUSDBalance",value:function(e,t){return this._readable.getLUSDBalance(e,t)}},{key:"getLQTYBalance",value:function(e,t){return this._readable.getLQTYBalance(e,t)}},{key:"getUniTokenBalance",value:function(e,t){return this._readable.getUniTokenBalance(e,t)}},{key:"getUniTokenAllowance",value:function(e,t){return this._readable.getUniTokenAllowance(e,t)}},{key:"_getRemainingLiquidityMiningLQTYRewardCalculator",value:function(e){return this._readable._getRemainingLiquidityMiningLQTYRewardCalculator(e)}},{key:"getRemainingLiquidityMiningLQTYReward",value:function(e){return this._readable.getRemainingLiquidityMiningLQTYReward(e)}},{key:"getLiquidityMiningStake",value:function(e,t){return this._readable.getLiquidityMiningStake(e,t)}},{key:"getTotalStakedUniTokens",value:function(e){return this._readable.getTotalStakedUniTokens(e)}},{key:"getLiquidityMiningLQTYReward",value:function(e,t){return this._readable.getLiquidityMiningLQTYReward(e,t)}},{key:"getCollateralSurplusBalance",value:function(e,t){return this._readable.getCollateralSurplusBalance(e,t)}},{key:"getTroves",value:function(e,t){return this._readable.getTroves(e,t)}},{key:"_getBlockTimestamp",value:function(e){return this._readable._getBlockTimestamp(e)}},{key:"_getFeesFactory",value:function(e){return this._readable._getFeesFactory(e)}},{key:"getFees",value:function(e){return this._readable.getFees(e)}},{key:"getLQTYStake",value:function(e,t){return this._readable.getLQTYStake(e,t)}},{key:"getTotalStakedLQTY",value:function(e){return this._readable.getTotalStakedLQTY(e)}},{key:"getFrontendStatus",value:function(e,t){return this._readable.getFrontendStatus(e,t)}},{key:"openTrove",value:function(e,t,n){return this.send.openTrove(e,t,n).then(b)}},{key:"closeTrove",value:function(e){return this.send.closeTrove(e).then(b)}},{key:"adjustTrove",value:function(e,t,n){return this.send.adjustTrove(e,t,n).then(b)}},{key:"depositCollateral",value:function(e,t){return this.send.depositCollateral(e,t).then(b)}},{key:"withdrawCollateral",value:function(e,t){return this.send.withdrawCollateral(e,t).then(b)}},{key:"borrowLUSD",value:function(e,t,n){return this.send.borrowLUSD(e,t,n).then(b)}},{key:"repayLUSD",value:function(e,t){return this.send.repayLUSD(e,t).then(b)}},{key:"setPrice",value:function(e,t){return this.send.setPrice(e,t).then(b)}},{key:"liquidate",value:function(e,t){return this.send.liquidate(e,t).then(b)}},{key:"liquidateUpTo",value:function(e,t){return this.send.liquidateUpTo(e,t).then(b)}},{key:"depositLUSDInStabilityPool",value:function(e,t,n){return this.send.depositLUSDInStabilityPool(e,t,n).then(b)}},{key:"withdrawLUSDFromStabilityPool",value:function(e,t){return this.send.withdrawLUSDFromStabilityPool(e,t).then(b)}},{key:"withdrawGainsFromStabilityPool",value:function(e){return this.send.withdrawGainsFromStabilityPool(e).then(b)}},{key:"transferCollateralGainToTrove",value:function(e){return this.send.transferCollateralGainToTrove(e).then(b)}},{key:"sendLUSD",value:function(e,t,n){return this.send.sendLUSD(e,t,n).then(b)}},{key:"sendLQTY",value:function(e,t,n){return this.send.sendLQTY(e,t,n).then(b)}},{key:"redeemLUSD",value:function(e,t,n){return this.send.redeemLUSD(e,t,n).then(b)}},{key:"claimCollateralSurplus",value:function(e){return this.send.claimCollateralSurplus(e).then(b)}},{key:"stakeLQTY",value:function(e,t){return this.send.stakeLQTY(e,t).then(b)}},{key:"unstakeLQTY",value:function(e,t){return this.send.unstakeLQTY(e,t).then(b)}},{key:"withdrawGainsFromStaking",value:function(e){return this.send.withdrawGainsFromStaking(e).then(b)}},{key:"registerFrontend",value:function(e,t){return this.send.registerFrontend(e,t).then(b)}},{key:"_mintUniToken",value:function(e,t,n){return this.send._mintUniToken(e,t,n).then(b)}},{key:"approveUniTokens",value:function(e,t){return this.send.approveUniTokens(e,t).then(b)}},{key:"stakeUniTokens",value:function(e,t){return this.send.stakeUniTokens(e,t).then(b)}},{key:"unstakeUniTokens",value:function(e,t){return this.send.unstakeUniTokens(e,t).then(b)}},{key:"withdrawLQTYRewardFromLiquidityMining",value:function(e){return this.send.withdrawLQTYRewardFromLiquidityMining(e).then(b)}},{key:"exitLiquidityMining",value:function(e){return this.send.exitLiquidityMining(e).then(b)}}],[{key:"_from",value:function(t){return c._usingStore(t)?new h(p.ReadableEthersLiquity._from(t)):new e(p.ReadableEthersLiquity._from(t))}},{key:"connect",value:function(){var t=r(i.mark((function t(n,a){return i.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,c._connect(n,a);case 3:return t.t1=t.sent,t.abrupt("return",t.t0._from.call(t.t0,t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();t.EthersLiquity=m;var h=function(e){o(n,e);var t=u(n);function n(e){var a;return s(this,n),(a=t.call(this,e)).store=e.store,a}return a(n,[{key:"hasStore",value:function(e){return void 0===e||e===this.connection.useStore}}]),n}(m)},,,,,,,function(e,t,n){"use strict";var a=n(59),i=n(45);Object.defineProperty(t,"__esModule",{value:!0}),t.useLiquityReducer=void 0;var r=n(1),s=n(157),o=n(122);t.useLiquityReducer=function(e,t){var n=o.useLiquityStore(),u=r.useRef(n),l=r.useRef(t(n.state)),c=r.useReducer((function(){return{}}),{}),d=i(c,2)[1],p=r.useCallback((function(t){var n=e(l.current,t);s.equals(n,l.current)||(l.current=n,d())}),[e]);return r.useEffect((function(){return n.subscribe((function(e){return p(a({type:"updateStore"},e))}))}),[n,p]),u.current!==n&&(l.current=t(n.state),u.current=n),[l.current,p]}},function(e,t,n){"use strict";var a=n(45);Object.defineProperty(t,"__esModule",{value:!0}),t.useLiquitySelector=void 0;var i=n(1),r=n(157),s=n(122);t.useLiquitySelector=function(e){var t=s.useLiquityStore(),n=i.useReducer((function(){return{}}),{}),o=a(n,2)[1];return i.useEffect((function(){return t.subscribe((function(t){var n=t.newState,a=t.oldState;r.equals(e(n),e(a))||o()}))}),[t,e]),e(t.state)}},,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),r=n(98),s=n.n(r),o=(n(182),n(158)),u=n(48),l=n(280),c=n(282),d=n(12),p=n(159),y=n(7),f=n(9),b=n(11),m=n(10),h=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"pause",value:function(){this.active&&this.providers[this.currentChainId].stop()}},{key:"resume",value:function(){this.active&&this.providers[this.currentChainId].start()}}]),n}(n(161).a),v=new p.a({supportedChainIds:[17,444900]}),T=new h({urls:{444900:"https://rpc1.bakerloo.autonity.network:8545"},pollingInterval:1e4});function j(){var e=Object(u.d)(),t=Object(u.d)("NETWORK");return e.active?e:t}var g=n(0);function x(e){var t=e.children,n=e.fallback,i=Object(u.d)().active,r=Object(u.d)("NETWORK"),s=r.active,o=r.error,l=r.activate,c=function(){var e=Object(u.d)(),t=e.activate,n=e.active,i=Object(a.useState)(!1),r=Object(d.a)(i,2),s=r[0],o=r[1];return Object(a.useEffect)((function(){v.isAuthorized().then((function(e){e?t(v,void 0,!0).catch((function(){o(!0)})):o(!0)}))}),[t]),Object(a.useEffect)((function(){n&&o(!0)}),[n]),s}();Object(a.useEffect)((function(){!c||s||o||i||l(T)}),[c,s,o,l,i]),function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(u.d)(),n=t.active,i=t.error,r=t.activate;Object(a.useEffect)((function(){var t=window.ethereum;if(t&&t.on&&!n&&!i&&!e){var a=function(){r(v,void 0,!0).catch((function(){}))},s=function(e){e.length>0&&r(v,void 0,!0).catch((function(){}))};return t.on("networkChanged",a),t.on("accountsChanged",s),function(){t.removeListener("networkChanged",a),t.removeListener("accountsChanged",s)}}return function(){}}),[n,i,e,r])}(!c);var p=Object(a.useState)(!1),y=Object(d.a)(p,2),f=y[0],b=y[1];return Object(a.useEffect)((function(){var e=setTimeout((function(){b(!0)}),600);return function(){clearTimeout(e)}}),[]),c?!i&&o?n():i||s?t:f?Object(g.jsx)("p",{children:"Spinner"}):null:null}var w=n(133),O=n(95),_=n(74),k=n(126),S=n(94),D=n(5),E=n.n(D),C=n(33),A=n(6),L=n(148),M=n(16),R={frontendTag:L.a};function I(e,t){return t in e}var P=function(e){var t=Object(A.a)({},R);if("object"===typeof e&&null!==e){if(I(e,"frontendTag")&&""!==e.frontendTag){var n=e.frontendTag;"string"===typeof n&&Object(M.isAddress)(n)?t.frontendTag=Object(M.getAddress)(n):(console.error("Malformed frontendTag:"),console.log(n))}if(I(e,"infuraApiKey")&&""!==e.infuraApiKey){var a=e.infuraApiKey;"string"===typeof a?t.infuraApiKey=a:(console.error("Malformed infuraApiKey:"),console.log(a))}if(I(e,"testnetOnly")){var i=e.testnetOnly;"boolean"===typeof i?t.testnetOnly=i:(console.error("Malformed testnetOnly:"),console.log(i))}}else console.error("Malformed config:"),console.log(e);return t},U=void 0,F=function(){var e=Object(C.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("config.json");case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Failed to fetch config.json (status ".concat(t.status,")"));case 6:return e.t0=P,e.next=9,t.json();case 9:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 13:return e.prev=13,e.t2=e.catch(0),console.error(e.t2),e.abrupt("return",Object(A.a)({},R));case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),B=function(){return U||(U=F()),U},q=Object(a.createContext)(void 0),N={bakerloo:{chainId:444900,name:"bakerloo"}},Y=[""],Q=["bakerloo"],G=function(e){var t=e.children,n=e.loader,i=e.unsupportedNetworkFallback,r=e.unsupportedMainnetFallback,s=j(),o=s.library,u=s.account,l=s.chainId,c=Object(a.useState)(),p=Object(d.a)(c,2),y=p[0],f=p[1];console.log({provider:o,account:u,chainId:l});var b=Object(a.useMemo)((function(){if(y&&o&&l){var e=u||"0x0000000000000000000000000000000000000000";try{return Object(S._connectByChainId)(o,o.getSigner(e),l,{userAddress:e,frontendTag:y.frontendTag,useStore:"blockPolled"})}catch(t){}}}),[y,o,u,l]);if(Object(a.useEffect)((function(){B().then(f)}),[]),Object(a.useEffect)((function(){if(y&&b){var e=b.provider,t=b.chainId;if(Object(k.isBatchedProvider)(e)&&e.chainId!==t&&(e.chainId=t),Object(k.isWebSocketAugmentedProvider)(e)){var n=function(e){if("number"===typeof e){var t=Object.values(N).find((function(t){return t.chainId===e}));if(t)return{name:t.name,chainId:t.chainId,ensAddress:t.ensAddress||void 0,_defaultProvider:t._defaultProvider||void 0}}if("string"===typeof e){var n=N[e];if(n)return{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress||void 0,_defaultProvider:n._defaultProvider||void 0}}return Object(_.a)(e)}(t);return n.name&&Y.includes(n.name)&&y.infuraApiKey?e.openWebSocket.apply(e,Object(O.a)(function(e,t){return["wss://".concat("homestead"===e?"mainnet":e,".infura.io/ws/v3/").concat(t),e]}(n.name,y.infuraApiKey))):Q.includes(n.name)?e.openWebSocket("wss://rpc1.bakerloo.autonity.network:8546",t):b._isDev&&e.openWebSocket("ws://".concat(window.location.hostname,":8546"),t),function(){e.closeWebSocket()}}}}),[y,b]),!y||!o||!l)return Object(g.jsx)(g.Fragment,{children:n});if(y.testnetOnly&&1===l)return Object(g.jsx)(g.Fragment,{children:r});if(!b)return i?Object(g.jsx)(g.Fragment,{children:i(l)}):null;var m=S.EthersLiquity._from(b);return m.store.logging=!0,Object(g.jsx)(q.Provider,{value:{config:y,account:u,provider:o,liquity:m},children:t})},Z=function(){var e=Object(a.useContext)(q);if(!e)throw new Error("You must provide a LiquityContext via LiquityProvider");return e},V=n(2),W=n(171),H=n(110),z=(n(251),n(70)),J=n(75),K=n(25),$=n(128),X=n(164);J.b.add(K.k,K.g,K.h,K.t,K.o,K.x,K.y,K.f,K.w,K.s,K.i,K.j,$.a,K.l,K.z,K.A,K.p,K.m,K.v,K.n,K.d,K.b,K.c,K.a,K.u,K.q,K.r,K.e,$.b);var ee=function(e){switch(e){case"clipboard":return["far","clipboard"];case"question-circle":return["far","question-circle"];default:return e}},te=function(e){var t=e.name,n=e.style,a=Object(z.a)(e,["name","style"]);return Object(g.jsx)(X.a,Object(A.a)({style:n,icon:ee(t)},a))},ne=n(283);function ae(e){var t=e.children,n=e.message,r=e.placement,s=void 0===r?"top":r,o=Object(a.useRef)(),u=Object(a.useState)(!1),c=Object(d.a)(u,2),p=c[0],y=c[1],f=Object(a.useState)(),b=Object(d.a)(f,2),m=b[0],h=b[1],v=Object(a.useState)(),T=Object(d.a)(v,2),j=T[0],x=T[1],w=Object(ne.a)(m,j,{placement:s}),O=w.styles,_=w.attributes;return Object(g.jsxs)(g.Fragment,{children:[i.a.cloneElement(i.a.Children.only(t),{onMouseOver:function(){o.current="over",p||y(!0)},onMouseOut:function(){o.current="out",setTimeout((function(){"out"===o.current&&y(!1)}),0)},ref:h}),p&&Object(g.jsx)(l.d,Object(A.a)(Object(A.a)({variant:"tooltip",ref:x,style:O.popper},_.popper),{},{children:n}))]})}var ie={strokeLinecap:"butt",pathColor:"white",trailColor:"rgba(255, 255, 255, 0.33)"},re={strokeWidth:10,styles:Object(H.b)(Object(A.a)(Object(A.a)({},ie),{},{pathTransitionDuration:30}))},se={strokeWidth:10,styles:Object(H.b)(Object(A.a)(Object(A.a)({},ie),{},{pathTransitionDuration:.75}))},oe=i.a.createContext(void 0),ue=function(e){var t=e.children,n=Object(a.useState)({type:"idle"});return Object(g.jsx)(oe.Provider,{value:n,children:t})},le=function(){var e=Object(a.useContext)(oe);if(!e)throw new Error("You must provide a TransactionContext via TransactionProvider");return e},ce=function(e){var t=le(),n=Object(d.a)(t,1)[0];return"idle"!==n.type&&("string"===typeof e?n.id===e:n.id.match(e))?n:{type:"idle"}},de=function(e,t){var n=le(),i=Object(d.a)(n,2),r=i[0],s=i[1];return[Object(a.useCallback)(Object(C.a)(E.a.mark((function n(){var a;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s({type:"waitingForApproval",id:e}),n.prev=1,n.next=4,t();case 4:a=n.sent,s({type:"waitingForConfirmation",id:e,tx:a}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),"object"===typeof(i=n.t0)&&null!==i&&"message"in i&&"string"===typeof i.message&&n.t0.message.includes("User denied transaction signature")?s({type:"cancelled",id:e}):(console.error(n.t0),s({type:"failed",id:e,error:new Error("Failed to send transaction (try again)")}));case 11:case"end":return n.stop()}var i}),n,null,[[1,8]])}))),[t,e,s]),r]};function pe(e){var t,n=e.id,a=e.tooltip,r=e.tooltipPlacement,s=e.showFailure,o=e.requires,u=e.send,l=e.children,c=de(n,u),p=Object(d.a)(c,2),y=p[0],f=p[1],b=i.a.Children.only(l),m=(o||[]).filter((function(e){return!Object(d.a)(e,1)[0]})).map((function(e){return Object(d.a)(e,2)[1]}));"waitingForApproval"!==f.type&&"waitingForConfirmation"!==f.type||m.push("You must wait for confirmation");var h="asChildText"===(s=m.length>0?null!==(t=s)&&void 0!==t?t:a?"asTooltip":"asChildText":void 0)?i.a.cloneElement(b,{disabled:!0,variant:"danger"},m[0]):"asTooltip"===s?i.a.cloneElement(b,{disabled:!0}):i.a.cloneElement(b,{onClick:y});return"asTooltip"===s&&(a=m[0]),a?Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(ae,{message:a,placement:r||"right",children:h})}):h}var ye=function(){var e=Object(C.a)(E.a.mark((function e(t,n){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.call(n,n.blockNumber);case 3:if(a=e.sent,Object(V.hexDataLength)(a)%32!==4||"0x08c379a0"!==Object(V.hexDataSlice)(a,0,4)){e.next=6;break}return e.abrupt("return",W.b.decode(["string"],Object(V.hexDataSlice)(a,4))[0]);case 6:e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",void 0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),fe=i.a.memo(H.a,(function(e,t){return e.value===t.value})),be=function(e){var t=e.state,n=Object(a.useState)(0),i=Object(d.a)(n,2),r=i[0],s=i[1];return Object(a.useEffect)((function(){"confirmed"===t?setTimeout((function(){return s(1)}),40):setTimeout((function(){return s(.67)}),20)}),[t]),"confirmed"===t?Object(g.jsx)(fe,Object(A.a)(Object(A.a)({},Object(A.a)({value:r,maxValue:1},se)),{},{children:Object(g.jsx)(te,{name:"check",color:"white",size:"lg"})})):"failed"===t||"cancelled"===t?Object(g.jsx)(fe,Object(A.a)(Object(A.a)({value:0},Object(A.a)({maxValue:1},se)),{},{children:Object(g.jsx)(te,{name:"times",color:"white",size:"lg"})})):Object(g.jsx)(fe,Object(A.a)(Object(A.a)({},Object(A.a)({value:r,maxValue:1},re)),{},{children:Object(g.jsx)(te,{name:"cog",color:"white",size:"lg",spin:!0})}))},me=function(){var e=Z().provider,t=le(),n=Object(d.a)(t,2),i=n[0],r=n[1],s="idle"!==i.type?i.id:void 0,o="waitingForConfirmation"===i.type?i.tx:void 0;return Object(a.useEffect)((function(){if(s&&o){var t=!1,n=!1,a=o.rawSentTransaction.hash,i=function(){var i=Object(C.a)(E.a.mark((function i(){var u,l,c,d;return E.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,o.waitForReceipt();case 3:if(u=i.sent,!t){i.next=6;break}return i.abrupt("return");case 6:if(l=u.rawReceipt.confirmations,c=u.rawReceipt.blockNumber+l-1,console.log("Block #".concat(c," ").concat(l,"-confirms tx ").concat(a)),console.log("Finish monitoring tx ".concat(a)),n=!0,"succeeded"!==u.status){i.next=16;break}console.log("".concat(u)),r({type:"confirmedOneShot",id:s}),i.next=24;break;case 16:return i.next=18,ye(e,u.rawReceipt);case 18:if(d=i.sent,!t){i.next=21;break}return i.abrupt("return");case 21:console.error("Tx ".concat(a," failed")),d&&console.error("Revert reason: ".concat(d)),r({type:"failed",id:s,error:new Error(d?"Reverted: ".concat(d):"Failed")});case 24:i.next=32;break;case 26:if(i.prev=26,i.t0=i.catch(0),!t){i.next=30;break}return i.abrupt("return");case 30:n=!0,i.t0 instanceof S.EthersTransactionCancelledError?(console.log("Cancelled tx ".concat(a)),r({type:"cancelled",id:s})):(console.error("Failed to get receipt for tx ".concat(a)),console.error(i.t0),r({type:"failed",id:s,error:new Error("Failed")}));case 32:case"end":return i.stop()}}),i,null,[[0,26]])})));return function(){return i.apply(this,arguments)}}();return console.log("Start monitoring tx ".concat(a)),i(),function(){n||(r({type:"idle"}),console.log("Cancel monitoring tx ".concat(a)),t=!0)}}}),[e,s,o,r]),Object(a.useEffect)((function(){if("confirmedOneShot"===i.type&&s)r({type:"confirmed",id:s});else if("confirmed"===i.type||"failed"===i.type||"cancelled"===i.type){var e=!1;return setTimeout((function(){e||r({type:"idle"})}),5e3),function(){e=!0}}}),[i.type,r,s]),"idle"===i.type||"waitingForApproval"===i.type?null:Object(g.jsxs)(l.f,{sx:{alignItems:"center",bg:"confirmed"===i.type?"success":"cancelled"===i.type?"warning":"failed"===i.type?"danger":"primary",p:3,pl:4,position:"fixed",width:"100vw",bottom:0,overflow:"hidden"},children:[Object(g.jsx)(l.b,{sx:{mr:3,width:"40px",height:"40px"},children:Object(g.jsx)(be,{state:i.type})}),Object(g.jsx)(l.o,{sx:{fontSize:3,color:"white"},children:"waitingForConfirmation"===i.type?"Waiting for confirmation":"cancelled"===i.type?"Cancelled":"failed"===i.type?i.error.message:"Confirmed"})]})},he="#6378EF",ve={primary:he,secondary:"#723FC6",accent:he,success:"#5beab7",warning:"#FFC145",danger:"#FF6B6C",dangerHover:"#FF6B6C",info:he,invalid:"pink",text:"#293147",background:"#F8F8F8",muted:"#eaebed"},Te={border:0,borderRadius:16,p:1,px:2,fontSize:1,fontWeight:"body"},je={display:"flex",alignItems:"center",justifyContent:"center",":enabled":{cursor:"pointer"}},ge=Object(A.a)(Object(A.a)({},je),{},{px:"32px",py:"12px",color:"white",border:1,borderRadius:16,fontWeight:"bold",":disabled":{opacity:.5}}),xe=function(e,t){return{color:e,borderColor:e,background:"none",":enabled:hover":{color:"background",bg:t,borderColor:t}}},we=Object(A.a)(Object(A.a)({},je),{},{padding:0,width:"40px",height:"40px",background:"none",":disabled":{color:"text",opacity:.25}}),Oe=18.7167,_e=[0,3,4],ke={position:"relative",mt:3,mb:3,borderColor:"background",borderRadius:16,boxShadow:"0px 4px 8px #723fc61a"},Se=Object(A.a)(Object(A.a)({},ke),{},{padding:3,boxShadow:"0px 4px 5px #F2F4FF",backgroundColor:"#F2F4FF",h2:{mb:2,fontSize:Oe}}),De={display:"block",width:"auto",flexShrink:0,padding:2,fontSize:3},Ee=Object(A.a)(Object(A.a)({},De),{},{bg:"background",border:1,borderColor:"muted",borderRadius:16}),Ce={position:"fixed",left:0,top:0,height:"100vh"},Ae={breakpoints:["48em","52em","64em"],space:[0,4,8,16,32,64,128,256,512],fonts:{body:"Visby CF",heading:"inherit",monospace:"Menlo, monospace"},fontSizes:[12,14,16,20,24,32,48,64,96],fontWeights:{body:400,heading:600,light:200,medium:400,bold:600},lineHeights:{body:1.5,heading:1.25},colors:ve,borders:[0,"1px solid","2px solid"],shadows:["0","0px 4px 8px rgba(41, 49, 71, 0.1)","0px 8px 16px rgba(41, 49, 71, 0.1)"],text:{address:{fontFamily:"monospace",fontSize:1}},badges:{muted:Object(A.a)(Object(A.a)({},Te),{},{backgroundColor:"muted",color:"text"}),colors:Object(A.a)(Object(A.a)({},Te),{},{color:"white",backgroundColor:"#414c6b",background:"linear-gradient(135deg, #6378EF 0%, #723FC6 85%)"}),outline:Object(A.a)(Object(A.a)({},Te),{},{border:2,color:"accent",backgroundColor:"transparent"})},buttons:{primary:Object(A.a)(Object(A.a)({},ge),{},{bg:"primary",borderColor:"primary",":enabled:hover":{bg:"secondary",borderColor:"secondary"}}),outline:Object(A.a)(Object(A.a)({},ge),xe("primary","secondary")),outlineAccent:Object(A.a)(Object(A.a)({},ge),xe("accent","secondary")),cancel:Object(A.a)(Object(A.a)(Object(A.a)({},ge),xe("text","text")),{},{opacity:.8}),danger:Object(A.a)(Object(A.a)({},ge),{},{bg:"danger",borderColor:"danger",":enabled:hover":{bg:"dangerHover",borderColor:"dangerHover"}}),token:Object(A.a)(Object(A.a)({},ge),xe("accent","accent")),icon:Object(A.a)(Object(A.a)({},we),{},{color:"primary",":enabled:hover":{color:"accent"}}),dangerIcon:Object(A.a)(Object(A.a)({},we),{},{color:"danger",":enabled:hover":{color:"dangerHover"}}),titleIcon:Object(A.a)(Object(A.a)({},we),{},{color:"text",":enabled:hover":{color:"success"}}),connect:Object(A.a)(Object(A.a)({},ge),{},{color:"white",backgroundColor:"secondary",transition:"border 200ms",":enabled:hover":{border:1,borderColor:"accent"}}),colors:Object(A.a)(Object(A.a)({},ge),{},{color:"white",backgroundColor:"#414c6b",background:"linear-gradient(135deg, #6378EF 0%, #723FC6 85%)",transition:"border 200ms",":enabled:hover":{border:1,borderColor:"accent"}})},cards:{primary:Object(A.a)(Object(A.a)({},ke),{},{padding:0,borderColor:"muted",bg:"white","> h2":{display:"flex",justifyContent:"space-between",alignItems:"center",height:"56px",pl:3,py:2,pr:2,fontSize:Oe}}),info:Object(A.a)(Object(A.a)({},Se),{},{border:1,color:"accent"}),infoPopup:Object(A.a)(Object(A.a)({},Se),{},{position:"fixed",top:0,right:3,left:3,mt:"72px",height:"80%",overflowY:"scroll"}),tooltip:{padding:2,border:1,borderColor:"muted",borderRadius:"4px",bg:"background",boxShadow:1,fontSize:1,color:"text",fontWeight:"body",zIndex:1},tooltipInfo:{padding:2,borderRadius:"12px",boxShadow:1,bg:"#F2F4FF",color:"accent",zIndex:1},userAccountModal:Object(A.a)(Object(A.a)({},ke),{},{mt:0,padding:3,bg:"white",border:2})},forms:{label:Object(A.a)({},De),unit:Object(A.a)(Object(A.a)({},Ee),{},{textAlign:"center",border:0,bg:"none"}),input:Object(A.a)(Object(A.a)({},Ee),{},{flex:1}),editor:{}},layout:{header:{display:"flex",justifyContent:"space-between",alignItems:"stretch",position:["fixed","relative"],top:0,zIndex:1,px:[2,"12px","12px",5],py:[2,"12px","12px"]},footer:{display:"flex",alignItems:"center",justifyContent:"center",mt:3,px:3,minHeight:"72px",bg:"muted"},main:{width:"100%",maxWidth:"912px",mx:"auto",mt:["40px","20px"],mb:["40px","40px"],px:_e},columns:{display:"flex",flexWrap:"wrap",justifyItems:"center",p:[2,0]},single:{width:["100%","56%"]},left:{pr:_e,width:["100%","58%"]},right:{width:["100%","42%"]},actions:{justifyContent:"flex-end",mt:2,button:{ml:2}},disabledOverlay:Object(A.a)(Object(A.a)({},{position:"absolute",left:0,top:0,width:"100%",height:"100%"}),{},{bg:"rgba(255, 255, 255, 0.5)"}),userOverlay:Object(A.a)(Object(A.a)({},Ce),{},{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center",p:[2,0]}),blurFilter:{position:"fixed",left:0,top:0,zIndex:1,width:"100%",height:"100%",background:"rgba(250, 250, 250, 0.6)",backdropFilter:"blur(3px)",pointerEvents:"none"},modal:{padding:3,width:["100%","40em"]},infoOverlay:Object(A.a)(Object(A.a)({},Ce),{},{display:["block","none"],bg:"rgba(255, 255, 255, 0.8)"}),infoMessage:{display:"flex",justifyContent:"center",m:3,alignItems:"center",minWidth:"128px"},sidenav:{display:["flex","none"],flexDirection:"column",p:0,m:0,borderColor:"muted",mr:"0",height:"100%"}},styles:{root:{fontFamily:"body",lineHeight:"body",fontWeight:"body",height:"100%","#root":{height:"100%"}},a:{color:"primary",":hover":{color:"accent"},textDecoration:"none",fontWeight:"bold"}},links:{nav:{px:2,py:1,fontWeight:"medium",fontSize:2,textTransform:"uppercase",letterSpacing:"2px",width:["100%","auto"],mt:[3,"auto"]}}},Le=n(170),Me=function(e){var t=e.children;return Object(g.jsx)(l.b,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-around",mb:[2,3],p:3,border:1,borderRadius:16,borderColor:"warning",boxShadow:1},children:Object(g.jsxs)(l.f,{sx:{alignItems:"center"},children:[Object(g.jsx)(te,{name:"exclamation-triangle",size:"lg"}),Object(g.jsx)(l.o,{sx:{ml:2},children:t})]})})},Re=n(107),Ie=n(32),Pe=n(73),Ue=n(8),Fe=n(13),Be=function(e){var t=e.height,n=Object(z.a)(e,["height"]);return Object(g.jsx)(l.b,Object(A.a)(Object(A.a)({sx:{lineHeight:0}},n),{},{children:Object(g.jsx)(l.h,{src:"./opal-logo-h.png",sx:{height:t}})}))},qe=function(e){return Object(g.jsx)(Re.b,Object(A.a)({exact:!0},e))},Ne=function(e){return Object(g.jsx)(l.l,Object(A.a)(Object(A.a)({},e),{},{as:qe}))},Ye=function(){return Object(g.jsx)(l.b,{as:"nav",sx:{display:["none","flex"],alignItems:"center",justifyContent:"center",flex:1},children:Object(g.jsxs)(l.f,{sx:{justifyContent:"flex-center"},children:[Object(g.jsx)(Ne,{to:"/",children:"Borrow"}),Object(g.jsx)(Ne,{to:"/farm",children:"Farm"}),Object(g.jsx)(Ne,{to:"/liquidate",children:"Liquidate"})]})})},Qe=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],i=t[1],r=Object(a.useRef)(null),s=function(){return Object(g.jsx)(l.c,{sx:{display:["flex","none"]},variant:"icon",onClick:function(){return i(!0)},children:Object(g.jsx)(te,{name:"bars",size:"lg"})})},o=function(){return Object(g.jsxs)(l.f,{variant:"layout.sidenav",children:[Object(g.jsx)(l.c,{sx:{position:"fixed",right:0,m:2,zIndex:99},variant:"icon",onClick:function(){return i(!1)},children:Object(g.jsx)(te,{name:"times",size:"2x"})}),Object(g.jsx)(Be,{height:"40px",p:2,sx:{width:"80%",zIndex:99}}),Object(g.jsxs)(l.b,{as:"nav",sx:{m:3,mt:1,p:0,zIndex:99,textAlign:"center"},onClick:function(){return i(!1)},children:[Object(g.jsx)(Ne,{to:"/",children:"Dashboard"}),Object(g.jsx)(Ne,{to:"/farm",children:"Farm"}),Object(g.jsx)(Ne,{to:"/liquidate",children:"Liquidate"})]})]})};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(s,{}),n&&Object(g.jsxs)(l.e,{variant:"infoOverlay",ref:r,onClick:function(e){e.target===r.current&&i(!1)},children:[Object(g.jsx)(o,{}),Object(g.jsx)(l.e,{variant:"blurFilter"})]})]})},Ge=function(){var e=Object(C.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{null===(n=window.ethereum)||void 0===n||n.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:t.address,symbol:t.symbol,decimals:18}}})}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ze=function(){var e=Z().liquity.connection.addresses,t=[{symbol:"OUSD",address:e.lusdToken},{symbol:"OPAL",address:e.lqtyToken}];return Object(g.jsx)(l.f,{sx:{justifyContent:"center",flexDirection:"column",alignItems:"centeer",gap:1},children:Object(g.jsx)(l.f,{sx:{alignItems:"center",justifyContent:"center"},children:t.map((function(e){return Object(g.jsx)(l.c,{variant:"token",onClick:function(){Ge(e)},sx:{py:1,px:2,mx:2,fontSize:1,border:2},children:e.symbol})}))})})},Ve=function(e){return{accountBalance:e.accountBalance,lusdBalance:e.lusdBalance,lqtyBalance:e.lqtyBalance}},We=function(){var e=Object(Fe.useLiquitySelector)(Ve),t=[{symbol:"AUT",balance:e.accountBalance},{symbol:"OUSD",balance:e.lusdBalance},{symbol:"OPAL",balance:e.lqtyBalance}];return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(l.f,{sx:{justifyContent:"center",mt:3,mb:1,p:2,borderRadius:16,border:1,borderColor:"muted",flexDirection:"column"},children:[Object(g.jsx)(l.o,{sx:{fontSize:2},children:"Available"}),t.map((function(e,t){return Object(g.jsxs)(l.f,{sx:{alignItems:"center",justifyContent:"space-between",my:1},children:[Object(g.jsx)(l.o,{sx:{fontSize:2,fontWeight:"bold"},children:e.symbol}),Object(g.jsx)(l.o,{sx:{fontSize:2},children:e.balance.prettify()})]},t)}))]})})},He=function(){var e=Z().account;return Object(g.jsx)(l.f,{sx:{justifyContent:"center",mx:3,my:3},children:Object(g.jsx)(l.a,{variant:"outline",sx:{px:3,py:2,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Object(g.jsx)(l.o,{children:e})})})},ze=function(e){return{stabilityDeposit:e.stabilityDeposit,lqtyStake:e.lqtyStake}},Je=function(){var e=Object(Fe.useLiquitySelector)(ze),t=e.stabilityDeposit,n=e.lqtyStake;return Object(g.jsxs)(l.f,{sx:{justifyContent:"center",mt:3,mb:1,p:2,borderRadius:16,border:1,borderColor:"muted",flexDirection:"column"},children:[Object(g.jsx)(l.o,{sx:{fontSize:2},children:"Staked"}),Object(g.jsxs)(l.f,{sx:{alignItems:"center",justifyContent:"space-between",my:1},children:[Object(g.jsx)(l.o,{sx:{fontSize:2,fontWeight:"bold"},children:"OUSD"}),Object(g.jsx)(l.o,{children:t.currentLUSD.prettify()})]}),Object(g.jsxs)(l.f,{sx:{alignItems:"center",justifyContent:"space-between",my:1},children:[Object(g.jsx)(l.o,{sx:{fontSize:2,fontWeight:"bold"},children:"OPAL"}),Object(g.jsx)(l.o,{children:n.stakedLQTY.prettify()})]})]})},Ke=function(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(l.d,{variant:"userAccountModal",sx:{justifyContent:"center",borderColor:"muted"},children:[Object(g.jsx)(l.g,{sx:{fontSize:2},children:"Account"}),Object(g.jsx)(He,{}),Object(g.jsx)(Ze,{}),Object(g.jsx)(We,{}),Object(g.jsx)(Je,{})]})})},$e=function(e){return e.substr(0,6)+"..."+e.substr(-4)},Xe=n(109),et=function(e){var t=e.placement,n=void 0===t?"right":t,a=e.tooltip,i=e.size,r=void 0===i?"1x":i;return Object(g.jsx)(Xe.a,{interactive:!0,placement:n,content:a,maxWidth:"268px",children:Object(g.jsxs)("span",{children:["\xa0",Object(g.jsx)(te,{name:"question-circle",size:r})]})})},tt=function(e){return e.price},nt=function(){var e=Z().liquity,t=e.send,n=e.connection._priceFeedIsTestnet,i=Object(Fe.useLiquitySelector)(tt),r=Object(a.useState)(i.toString(2)),s=Object(d.a)(r,2),o=s[0],u=s[1];return Object(a.useEffect)((function(){u(i.toString(2))}),[i]),n?Object(g.jsxs)(l.d,{sx:{border:1,borderStyle:"dashed",borderColor:"accent",bg:"#F2F4FF"},children:[Object(g.jsxs)(l.f,{sx:{mt:3,mx:3,alignItems:"center"},children:[Object(g.jsx)(l.g,{sx:{fontSize:2},children:"Price Manager"}),Object(g.jsx)(et,{size:"sm",tooltip:Object(g.jsx)(l.d,{variant:"tooltip",children:"Only available when priceFeed is mocked for testing"})})]}),Object(g.jsx)(l.b,{sx:{p:[2,3]},children:Object(g.jsxs)(l.f,{sx:{alignItems:"stretch"},children:[Object(g.jsx)(l.j,{children:"AUT"}),Object(g.jsx)(l.j,{children:"="}),Object(g.jsx)(l.j,{variant:"unit",children:"$"}),Object(g.jsx)(l.i,{type:n?"number":"text",step:"any",value:o,onChange:function(e){return u(e.target.value)},disabled:!n}),Object(g.jsx)(l.f,{sx:{ml:2,alignItems:"center"},children:Object(g.jsx)(pe,{id:"set-price",tooltip:"Set",tooltipPlacement:"bottom",send:function(e){if(!o)throw new Error("Invalid price");return t.setPrice(Ue.Decimal.from(o),e)},children:Object(g.jsx)(l.c,{variant:"outlineAccent",children:"Set"})})})]})})]}):Object(g.jsx)(g.Fragment,{})},at="OUSD",it="OPAL",rt="UNI LP",st=(n(262),function(e){var t=e.variant,n=void 0===t?"info":t,a=e.name,i=e.tooltip,r=e.children;return Object(g.jsx)(Xe.a,{delay:1e3,interactive:!0,placement:"bottom",animation:"scale",arrow:!0,content:Object(g.jsx)(l.d,{variant:"tooltipInfo",children:i}),maxWidth:"268px",children:Object(g.jsxs)(l.d,{variant:n,sx:{m:0,flex:["1 0 40%","1 0 30%"]},children:[Object(g.jsx)(l.o,{sx:{display:"flex",justifyContent:"center"},children:a}),Object(g.jsx)(l.o,{sx:{fontSize:"x-large",fontWeight:"bold",display:"flex",justifyContent:"center",alignItems:"center"},children:r})]})})}),ot=function(e){return{numberOfTroves:e.numberOfTroves,price:e.price,total:e.total,lusdInStabilityPool:e.lusdInStabilityPool,borrowingRate:e.borrowingRate,redemptionRate:e.redemptionRate,totalStakedLQTY:e.totalStakedLQTY,accountBalance:e.accountBalance,lusdBalance:e.lusdBalance,lqtyBalance:e.lqtyBalance}},ut=function(e){var t=e.filterStats,n=Object(Fe.useLiquitySelector)(ot),a=n.numberOfTroves,i=n.price,r=n.lusdInStabilityPool,s=n.total,o=n.borrowingRate,u=n.redemptionRate,c=n.totalStakedLQTY,d=n.accountBalance,p=n.lusdBalance,y=n.lqtyBalance,f=s.debt.nonZero&&new Ue.Percent(r.div(s.debt)),b=new Ue.Percent(s.collateralRatio(i)),m=new Ue.Percent(o),h=new Ue.Percent(u);return Object(g.jsx)(g.Fragment,{children:null===t||void 0===t?void 0:t.map((function(e){var t=function(e){switch(e){case"borrow-fee":return{name:"Borrowing Fee",tooltip:"The Borrowing Fee is a one-off fee charged as a percentage of the borrowed amount (in OUSD) and is part of a Trove's debt. The fee varies between 0.5% and 5% depending on OUSD redemption volumes.",body:m.toString(2)};case"redeem-fee":return{name:"Redemption fee",tooltip:"The Redemption Fee is a one-off fee charged as a percentage of the redeemed amount (in AUT). The fee varies from 0.5% depending on OUSD redemption volumes.",body:h.toString(2)};case"tvl":return{name:"TVL",tooltip:"The Total Value Locked (TVL) is the total value of AUT locked as collateral in the system, given in AUT and USD.",body:Object(g.jsxs)(g.Fragment,{children:[s.collateral.shorten()," ",Object(g.jsx)(l.o,{sx:{fontSize:2},children:"\xa0AUT"})]})};case"troves":return{name:"Opened Troves",tooltip:"The total number of active Troves in the system.",body:Ue.Decimal.from(a).prettify(0)};case"lusd-supply":return{name:"OUSD supply",tooltip:"The total OUSD minted by the Opal Protocol.",body:s.debt.shorten()};case"lusd-sp":return{name:"OUSD in Stability Pool",tooltip:"The total OUSD currently held in the Stability Pool, expressed as an amount and a fraction of the OUSD supply.",body:Object(g.jsxs)(g.Fragment,{children:[r.shorten(),Object(g.jsxs)(l.o,{sx:{fontSize:1},children:["\xa0(",null===f||void 0===f?void 0:f.toString(1),")"]})]})};case"staked-lqty":return{name:"Staked OPAL",tooltip:"The total amount of OPAL that is staked for earning fee revenue.",body:c.shorten()};case"tcr":return{name:"TCR",tooltip:"The ratio of the Dollar value of the entire system collateral at the current AUT:USD price, to the entire system debt.",body:b.prettify()};case"recovery":return{name:"Recovery Mode",tooltip:"Recovery Mode is activated when the Total Collateral Ratio (TCR) falls below 150%. When active, your Trove can be liquidated if its collateral ratio is below the TCR. The maximum collateral you can lose from liquidation is capped at 110% of your Trove's debt. Operations are also restricted that would negatively impact the TCR.",body:Object(g.jsx)(g.Fragment,{children:s.collateralRatioIsBelowCritical(i)?Object(g.jsx)(l.b,{color:"danger",children:"Yes"}):"No"})};case"aut-balance":return{name:"AUT",body:d.prettify(4)};case"lusd-balance":return{name:at,body:p.prettify()};case"lqty-balance":return{name:it,body:y.prettify()};case"aut-price":return{name:"AUT",body:Object(g.jsxs)(g.Fragment,{children:[i.prettify(),Object(g.jsx)(l.o,{sx:{fontSize:2},children:"\xa0USD"})]})};case"lqty-price":return{name:"OPAL",body:Object(g.jsxs)(g.Fragment,{children:["80.0",Object(g.jsx)(l.o,{sx:{fontSize:2},children:"\xa0USD"})]})};default:return{name:"Stat",body:Object(g.jsx)(g.Fragment,{})}}}(e);return Object(g.jsx)(st,{name:t.name,tooltip:t.tooltip,children:t.body})}))})},lt=function(e){var t=e.filterStats;return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(l.b,{sx:{display:"flex",flexFlow:"row wrap-reverse",justifyContent:"space-between",flexGrow:1,gap:2,py:3},children:Object(g.jsx)(ut,{filterStats:t})})})},ct=function(){return Object(g.jsxs)(l.e,{variant:"single",sx:{zIndex:99,maxWidth:["100%","36em"]},children:[Object(g.jsx)(lt,{filterStats:["aut-price","lqty-price"]}),Object(g.jsx)(Ke,{}),Object(g.jsx)(nt,{})]})},dt=function(e){return(t=e.account)&&"0x0000000000000000000000000000000000000000"!==t?Object(g.jsx)(l.c,{onClick:function(){return e.setSystemStatsOpen(!e.userModalOpen)},variant:"colors",sx:{px:3,py:2},children:Object(g.jsx)(l.f,{sx:{flexDirection:"column"},children:Object(g.jsx)(l.o,{as:"span",sx:{fontSize:1},children:e.account&&$e(e.account)})})}):Object(g.jsx)(l.c,{onClick:function(){return e.activate(v)},variant:"colors",sx:{px:3,py:2},children:Object(g.jsx)(l.f,{sx:{flexDirection:"column"},children:Object(g.jsx)(l.o,{as:"span",sx:{fontSize:[0,1]},children:"Connect Wallet"})})});var t},pt=function(){var e=Z().account,t=Object(a.useRef)(null),n=Object(a.useState)(!1),i=Object(d.a)(n,2),r=i[0],s=i[1],o=j().activate,c=function(){var e=Object(C.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&o(t,void 0,!0).catch((function(e){e instanceof u.a?o(t):console.error(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(l.b,{children:Object(g.jsx)(l.f,{sx:{mx:2,alignItems:"center"},children:Object(g.jsx)(dt,{account:e,setSystemStatsOpen:s,userModalOpen:r,activate:c})})}),r&&Object(g.jsxs)(l.e,{variant:"userOverlay",sx:{},ref:t,onClick:function(e){e.target===t.current&&s(!1)},children:[Object(g.jsx)(ct,{}),Object(g.jsx)(l.e,{variant:"blurFilter"})]})]})},yt=function(){return Object(g.jsx)(l.e,{variant:"header",children:Object(g.jsxs)(l.f,{sx:{alignItems:"center",justifyContent:"space-between",flex:1},children:[Object(g.jsx)(l.f,{sx:{flexBasis:["40%","25%"]},children:Object(g.jsx)(Be,{height:"40px"})}),Object(g.jsx)(Ye,{}),Object(g.jsxs)(l.f,{sx:{flexBasis:["60%","25%"],justifyContent:"flex-end"},children:[Object(g.jsx)(pt,{}),Object(g.jsx)(Qe,{})]})]})})},ft=function(e){var t=e.children;return Object(g.jsx)(l.b,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-around",mb:[2,3],p:3,border:1,borderRadius:16,borderColor:"accent",bg:"#F2F4FF"},children:Object(g.jsxs)(l.f,{sx:{alignItems:"center"},children:[Object(g.jsx)(te,{name:"info-circle",size:"lg"}),Object(g.jsx)(l.o,{sx:{ml:2},children:t})]})})},bt=function(e){var t=e.children;return Object(g.jsx)(l.o,{sx:{fontWeight:"bold",whiteSpace:"nowrap"},children:t})},mt=function(e){var t=e.sx,n=e.label,a=e.labelId,i=e.labelFor,r=e.children,s=e.infoIcon;return Object(g.jsxs)(l.f,{sx:Object(A.a)({alignItems:"stretch"},t),children:[Object(g.jsx)(l.j,{id:a,htmlFor:i,sx:{p:0,pl:3,pt:"12px",position:"absolute",fontSize:1,border:1,borderColor:"transparent"},children:Object(g.jsxs)(l.f,{sx:{alignItems:"center"},children:[n,s&&s]})}),r]})},ht=function(e){var t=e.sx,n=e.value;return Object(g.jsxs)(l.o,{sx:t,children:["(","++"===n?Object(g.jsx)(te,{name:"angle-double-up"}):"--"===n?Object(g.jsx)(te,{name:"angle-double-down"}):(null===n||void 0===n?void 0:n.startsWith("+"))?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(te,{name:"angle-up"})," ",n.substr(1)]}):(null===n||void 0===n?void 0:n.startsWith("-"))?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(te,{name:"angle-down"})," ",n.substr(1)]}):n,")"]})},vt=function(e){var t=e.sx,n=e.inputId,a=e.labelledBy,i=e.amount,r=e.unit,s=e.color,o=e.pendingAmount,u=e.pendingColor,c=e.onClick,d=e.children;return Object(g.jsxs)(l.f,{id:n,"aria-labelledby":a,onClick:c,sx:Object(A.a)(Object(A.a)(Object(A.a)({justifyContent:"space-between",alignItems:"center"},c?{cursor:"text"}:{}),Tt),t),children:[Object(g.jsxs)(l.f,{sx:{alignItems:"center"},children:[Object(g.jsx)(l.o,{sx:{color:s,fontWeight:"medium"},children:i}),r&&Object(g.jsxs)(g.Fragment,{children:["\xa0",Object(g.jsx)(l.o,{sx:{fontWeight:"light",opacity:.8},children:r})]}),o&&Object(g.jsxs)(g.Fragment,{children:["\xa0",Object(g.jsx)(ht,{sx:{color:u,opacity:.8,fontSize:"0.666em"},value:o})]})]}),d]})},Tt={flexGrow:1,mb:0,pl:3,pr:"11px",pb:0,pt:"28px",fontSize:3,border:1,borderColor:"transparent"},jt={flexGrow:1,mb:[2,3],pl:3,pr:"11px",pb:2,pt:"28px",fontSize:4,borderRadius:16,borderColor:"muted"},gt=function(e){var t=e.label,n=e.labelId,a=e.labelFor,i=e.infoIcon,r=Object(z.a)(e,["label","labelId","labelFor","infoIcon"]);return Object(g.jsx)(mt,{label:t,labelId:n,labelFor:a,infoIcon:i,sx:{mt:[-2,-3],pb:[2,3]},children:Object(g.jsx)(vt,Object(A.a)({},r))})},xt=function(e){var t=e.inputId,n=e.label,a=e.unit,i=e.amount,r=e.color,s=e.pendingAmount,o=e.pendingColor;return Object(g.jsx)(mt,{labelId:"".concat(t,"-label"),label:n,unit:a,children:Object(g.jsx)(vt,{sx:Object(A.a)(Object(A.a)({},jt),{},{boxShadow:0}),labelledBy:"".concat(t,"-label"),inputId:t,amount:i,unit:a,color:r,pendingAmount:s,pendingColor:o})})},wt=function(e){var t=e.label,n=e.inputId,i=e.unit,r=e.amount,s=e.color,o=e.pendingAmount,u=e.pendingColor,c=e.editingState,p=e.editedAmount,y=e.setEditedAmount,f=e.maxAmount,b=e.maxedOut,m=Object(d.a)(c,2),h=m[0],v=m[1],T=Object(a.useState)(!1),j=Object(d.a)(T,2),x=j[0],w=j[1];return h===n?Object(g.jsx)(mt,{label:t,labelFor:n,unit:i,children:Object(g.jsx)(l.i,{autoFocus:!0,id:n,type:"number",step:"any",defaultValue:p,invalid:x,onChange:function(e){try{y(e.target.value),w(!1)}catch(t){w(!0)}},onBlur:function(){v(void 0),w(!1)},variant:"editor",sx:Object(A.a)(Object(A.a)({},jt),{},{fontWeight:"medium",bg:x?"invalid":"background"})})}):Object(g.jsx)(mt,{labelId:"".concat(n,"-label"),label:t,unit:i,children:Object(g.jsx)(vt,{sx:Object(A.a)(Object(A.a)({},jt),{},{bg:x?"invalid":"background"}),labelledBy:"".concat(n,"-label"),onClick:function(){return v(n)},inputId:n,amount:r,unit:i,color:s,pendingAmount:o,pendingColor:u,invalid:x,children:f&&Object(g.jsx)(l.c,{sx:{fontSize:1,p:1,px:3},onClick:function(e){y(f),e.stopPropagation()},disabled:b,children:"max"})})})},Ot=function(){return Object(g.jsx)(l.e,{variant:"disabledOverlay",sx:{p:"14px",display:"flex",justifyContent:"flex-end"},children:Object(g.jsx)(l.n,{size:"28px",sx:{color:"text"}})})},_t=function(e){var t,n,a,i,r,s,o=e.value,u=e.liqPrice,c=e.change,d=new Ue.Percent(null!==o&&void 0!==o?o:{toString:function(){return"N/A"}}),p=c&&new Ue.Percent(c);return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(l.f,{children:[Object(g.jsx)(l.b,{sx:{mt:[2,0],ml:3,mr:-2,fontSize:"24px"},children:Object(g.jsx)(te,{name:"heartbeat"})}),Object(g.jsx)(gt,{label:"Collateral ratio",inputId:"trove-collateral-ratio",amount:d.prettify(),color:(null===o||void 0===o?void 0:o.gt(Ue.CRITICAL_COLLATERAL_RATIO))?"success":(null===o||void 0===o?void 0:o.gt(1.2))?"warning":(null===o||void 0===o?void 0:o.lte(1.2))?"danger":"muted",pendingAmount:(null===c||void 0===c||null===(t=c.positive)||void 0===t||null===(n=t.absoluteValue)||void 0===n?void 0:n.gt(10))?"++":(null===c||void 0===c||null===(a=c.negative)||void 0===a||null===(i=a.absoluteValue)||void 0===i?void 0:i.gt(10))?"--":null===p||void 0===p||null===(r=p.nonZeroish(2))||void 0===r?void 0:r.prettify(),pendingColor:(null===c||void 0===c?void 0:c.positive)?"success":"danger",infoIcon:Object(g.jsx)(et,{tooltip:Object(g.jsx)(l.d,{variant:"tooltip",sx:{width:"220px"},children:"The ratio between the dollar value of the collateral and the debt (in OUSD) you are depositing. While the Minimum Collateral Ratio is 110% during normal operation, it is recommended to keep the Collateral Ratio always above 150% to avoid liquidation under Recovery Mode. A Collateral Ratio above 200% or 250% is recommended for additional safety."})})})]}),Object(g.jsx)(gt,{label:"Liquidation price",inputId:"trove-liquidation-price",amount:null!==(s=null===u||void 0===u?void 0:u.prettify(2))&&void 0!==s?s:"N/A",color:u?"black":"muted",unit:"USD",infoIcon:Object(g.jsx)(et,{tooltip:Object(g.jsx)(l.d,{variant:"tooltip",sx:{width:"220px"},children:"The price of AUT under which your trove can be liquidated during normal operation."})})}),(null===o||void 0===o?void 0:o.lt(1.5))&&Object(g.jsx)(ft,{children:"Keeping your CR above 150% can help avoid liquidation under Recovery Mode."})]})},kt=function(e){return{price:e.price}},St=function(e){var t=e.children,n=e.original,a=e.edited,i=e.fee,r=e.borrowingRate,s=e.changePending,o=Object(Fe.useLiquitySelector)(kt).price,u=new Ue.Percent(r),c=n.isEmpty?void 0:n.collateralRatio(o),d=a.isEmpty?void 0:a.collateralRatio(o),p=Ue.Difference.between(d,c);return Object(g.jsxs)(l.d,{children:[Object(g.jsx)(l.g,{children:"Trove"}),Object(g.jsxs)(l.b,{sx:{p:[2,3]},children:[Object(g.jsx)(gt,{label:"Collateral",inputId:"trove-collateral",amount:a.collateral.prettify(4),unit:"AUT"}),Object(g.jsx)(gt,{label:"Debt",inputId:"trove-debt",amount:a.debt.prettify(),unit:at}),n.isEmpty&&Object(g.jsx)(gt,{label:"Liquidation Reserve",inputId:"trove-liquidation-reserve",amount:"".concat(Ue.LUSD_LIQUIDATION_RESERVE),unit:at,infoIcon:Object(g.jsx)(et,{tooltip:Object(g.jsx)(l.d,{variant:"tooltip",sx:{width:"200px"},children:"An amount set aside to cover the liquidator\u2019s gas costs if your Trove needs to be liquidated. The amount increases your debt and is refunded if you close your Trove by fully paying off its net debt."})})}),Object(g.jsx)(gt,{label:"Borrowing Fee",inputId:"trove-borrowing-fee",amount:i.toString(2),pendingAmount:u.toString(2),unit:at,infoIcon:Object(g.jsx)(et,{tooltip:Object(g.jsx)(l.d,{variant:"tooltip",sx:{width:"240px"},children:"This amount is deducted from the borrowed amount as a one-time fee. There are no recurring fees for borrowing, which is thus interest-free."})})}),Object(g.jsx)(_t,{value:d,change:p}),t]}),s&&Object(g.jsx)(Ot,{})]})},Dt=function(e){var t=e.children,n=e.transactionId,a=e.change,i=e.maxBorrowingRate,r=e.borrowingFeeDecayToleranceMinutes,s=Z().liquity,o=de(n,"creation"===a.type?s.send.openTrove.bind(s.send,a.params,{maxBorrowingRate:i,borrowingFeeDecayToleranceMinutes:r}):"closure"===a.type?s.send.closeTrove.bind(s.send):s.send.adjustTrove.bind(s.send,a.params,{maxBorrowingRate:i,borrowingFeeDecayToleranceMinutes:r})),u=Object(d.a)(o,1)[0];return Object(g.jsx)(l.c,{onClick:u,children:t})},Et=Object(a.createContext)(null),Ct=function(){var e=Object(a.useContext)(Et);if(null===e)throw new Error("You must add a <TroveViewProvider> into the React tree");return e},At=function(e){var t=e.children;return Object(g.jsx)(l.b,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-around",mb:[2,3],p:3,border:1,borderRadius:16,borderColor:"danger",boxShadow:1,bg:"rgba(220, 44, 16, 0.05)"},children:Object(g.jsxs)(l.f,{sx:{alignItems:"center"},children:[Object(g.jsx)(te,{name:"exclamation-triangle",size:"lg"}),Object(g.jsx)(l.o,{sx:{ml:2},children:t})]})})},Lt=new Ue.Percent(Ue.MINIMUM_COLLATERAL_RATIO).toString(0),Mt=new Ue.Percent(Ue.CRITICAL_COLLATERAL_RATIO).toString(0),Rt=function(e){var t=e.params;return Object(g.jsxs)(ft,{children:[t.depositCollateral&&t.borrowLUSD?Object(g.jsxs)(g.Fragment,{children:["You will deposit ",Object(g.jsxs)(bt,{children:[t.depositCollateral.prettify()," AUT"]})," and receive"," ",Object(g.jsxs)(bt,{children:[t.borrowLUSD.prettify()," ",at]})]}):t.repayLUSD&&t.withdrawCollateral?Object(g.jsxs)(g.Fragment,{children:["You will pay"," ",Object(g.jsxs)(bt,{children:[t.repayLUSD.prettify()," ",at]})," ","and receive ",Object(g.jsxs)(bt,{children:[t.withdrawCollateral.prettify()," AUT"]})]}):t.depositCollateral&&t.repayLUSD?Object(g.jsxs)(g.Fragment,{children:["You will deposit ",Object(g.jsxs)(bt,{children:[t.depositCollateral.prettify()," AUT"]})," and pay"," ",Object(g.jsxs)(bt,{children:[t.repayLUSD.prettify()," ",at]})]}):t.borrowLUSD&&t.withdrawCollateral?Object(g.jsxs)(g.Fragment,{children:["You will receive ",Object(g.jsxs)(bt,{children:[t.withdrawCollateral.prettify()," AUT"]})," and"," ",Object(g.jsxs)(bt,{children:[t.borrowLUSD.prettify()," ",at]})]}):t.depositCollateral?Object(g.jsxs)(g.Fragment,{children:["You will deposit ",Object(g.jsxs)(bt,{children:[t.depositCollateral.prettify()," AUT"]})]}):t.withdrawCollateral?Object(g.jsxs)(g.Fragment,{children:["You will receive ",Object(g.jsxs)(bt,{children:[t.withdrawCollateral.prettify()," AUT"]})]}):t.borrowLUSD?Object(g.jsxs)(g.Fragment,{children:["You will receive"," ",Object(g.jsxs)(bt,{children:[t.borrowLUSD.prettify()," ",at]})]}):Object(g.jsxs)(g.Fragment,{children:["You will pay"," ",Object(g.jsxs)(bt,{children:[t.repayLUSD.prettify()," ",at]})]}),"."]})},It=function(e){return{price:e.price,total:e.total,accountBalance:e.accountBalance,lusdBalance:e.lusdBalance,numberOfTroves:e.numberOfTroves}},Pt=function(e,t,n,a){var i=a.total,r=a.price,s=e.whatChanged(t,n);if(!s)return[void 0,void 0];var o=e.apply(s,n),u=i.collateralRatioIsBelowCritical(r),l=i.subtract(e).add(o).collateralRatioIsBelowCritical(r),c=Object(A.a)(Object(A.a)({},a),{},{originalTrove:e,resultingTrove:o,recoveryMode:u,wouldTriggerRecoveryMode:l});if("invalidCreation"===s.type)return[void 0,Object(g.jsxs)(At,{children:["Total debt must be at least"," ",Object(g.jsxs)(bt,{children:[Ue.LUSD_MINIMUM_DEBT.toString()," ",at]}),"."]})];var d="creation"===s.type?Ut(s.params,c):"closure"===s.type?Bt(s.params,c):Ft(s.params,c);return d?[void 0,d]:[s,Object(g.jsx)(Rt,{params:s.params})]},Ut=function(e,t){var n=e.depositCollateral,a=e.borrowLUSD,i=t.resultingTrove,r=t.recoveryMode,s=t.wouldTriggerRecoveryMode,o=t.accountBalance,u=t.price;if(a.lt(Ue.LUSD_MINIMUM_NET_DEBT))return Object(g.jsxs)(At,{children:["You must borrow at least"," ",Object(g.jsxs)(bt,{children:[Ue.LUSD_MINIMUM_NET_DEBT.toString()," ",at]}),"."]});if(r){if(!i.isOpenableInRecoveryMode(u))return Object(g.jsxs)(At,{children:["You're not allowed to open a Trove with less than ",Object(g.jsx)(bt,{children:Mt})," Collateral Ratio during recovery mode. Please increase your Trove's Collateral Ratio."]})}else{if(i.collateralRatioIsBelowMinimum(u))return Object(g.jsxs)(At,{children:["Collateral ratio must be at least ",Object(g.jsx)(bt,{children:Lt}),"."]});if(s)return Object(g.jsxs)(At,{children:["You're not allowed to open a Trove that would cause the Total Collateral Ratio to fall below ",Object(g.jsx)(bt,{children:Mt}),". Please increase your Trove's Collateral Ratio."]})}return n.gt(o)?Object(g.jsxs)(At,{children:["The amount you're trying to deposit exceeds your balance by"," ",Object(g.jsxs)(bt,{children:[n.sub(o).prettify()," AUT"]}),"."]}):null},Ft=function(e,t){var n=e.depositCollateral,a=e.withdrawCollateral,i=e.borrowLUSD,r=e.repayLUSD,s=t.originalTrove,o=t.resultingTrove,u=t.recoveryMode,l=t.wouldTriggerRecoveryMode,c=t.price,d=t.accountBalance,p=t.lusdBalance;if(u){if(a)return Object(g.jsx)(At,{children:"You're not allowed to withdraw collateral during recovery mode."});if(i){if(o.collateralRatioIsBelowCritical(c))return Object(g.jsxs)(At,{children:["Your collateral ratio must be at least ",Object(g.jsx)(bt,{children:Mt})," to borrow during recovery mode. Please improve your collateral ratio."]});if(o.collateralRatio(c).lt(s.collateralRatio(c)))return Object(g.jsx)(At,{children:"You're not allowed to decrease your collateral ratio during recovery mode."})}}else{if(o.collateralRatioIsBelowMinimum(c))return Object(g.jsxs)(At,{children:["Collateral ratio must be at least ",Object(g.jsx)(bt,{children:Lt}),"."]});if(l)return Object(g.jsxs)(At,{children:["The adjustment you're trying to make would cause the Total Collateral Ratio to fall below"," ",Object(g.jsx)(bt,{children:Mt}),". Please increase your Trove's Collateral Ratio."]})}if(r){if(o.debt.lt(Ue.LUSD_MINIMUM_DEBT))return Object(g.jsxs)(At,{children:["Total debt must be at least"," ",Object(g.jsxs)(bt,{children:[Ue.LUSD_MINIMUM_DEBT.toString()," ",at]}),"."]});if(r.gt(p))return Object(g.jsxs)(At,{children:["The amount you're trying to repay exceeds your balance by"," ",Object(g.jsxs)(bt,{children:[r.sub(p).prettify()," ",at]}),"."]})}return(null===n||void 0===n?void 0:n.gt(d))?Object(g.jsxs)(At,{children:["The amount you're trying to deposit exceeds your balance by"," ",Object(g.jsxs)(bt,{children:[n.sub(d).prettify()," AUT"]}),"."]}):null},Bt=function(e,t){var n=e.repayLUSD,a=t.recoveryMode,i=t.wouldTriggerRecoveryMode,r=t.numberOfTroves,s=t.lusdBalance;return 1===r?Object(g.jsx)(At,{children:"You're not allowed to close your Trove when there are no other Troves in the system."}):a?Object(g.jsx)(At,{children:"You're not allowed to close your Trove during recovery mode."}):(null===n||void 0===n?void 0:n.gt(s))?Object(g.jsxs)(At,{children:["You need"," ",Object(g.jsxs)(bt,{children:[n.sub(s).prettify()," ",at]})," ","more to close your Trove."]}):i?Object(g.jsxs)(At,{children:["You're not allowed to close a Trove if it would cause the Total Collateralization Ratio to fall below ",Object(g.jsx)(bt,{children:Mt}),". Please wait until the Total Collateral Ratio increases."]}):null},qt=function(e){var t=e.trove;return{original:t,edited:new Ue.Trove(t.collateral,t.debt),changePending:!1,debtDirty:!1,addedMinimumDebt:!1}},Nt=function(e){return function(t){return Vt(t,e)}},Yt=Nt({type:"addMinimumDebt"}),Qt=Nt({type:"removeMinimumDebt"}),Gt=Nt({type:"finishChange"}),Zt=Nt({type:"revert"}),Vt=function(e,t){var n=e.original,a=e.edited,i=e.changePending,r=e.debtDirty,s=e.addedMinimumDebt;switch(t.type){case"startChange":return console.log("starting change"),Object(A.a)(Object(A.a)({},e),{},{changePending:!0});case"finishChange":return Object(A.a)(Object(A.a)({},e),{},{changePending:!1});case"setCollateral":var o=Ue.Decimal.from(t.newValue),u=Object(A.a)(Object(A.a)({},e),{},{edited:a.setCollateral(o)});if(!r){if(a.isEmpty&&o.nonZero)return Yt(u);if(s&&o.isZero)return Qt(u)}return u;case"setDebt":return Object(A.a)(Object(A.a)({},e),{},{edited:a.setDebt(t.newValue),debtDirty:!0});case"addMinimumDebt":return Object(A.a)(Object(A.a)({},e),{},{edited:a.setDebt(Ue.LUSD_MINIMUM_DEBT),addedMinimumDebt:!0});case"removeMinimumDebt":return Object(A.a)(Object(A.a)({},e),{},{edited:a.setDebt(0),addedMinimumDebt:!1});case"revert":return Object(A.a)(Object(A.a)({},e),{},{edited:new Ue.Trove(n.collateral,n.debt),debtDirty:!1,addedMinimumDebt:!1});case"updateStore":var l=t.newState.trove,c=t.stateChange.troveBeforeRedistribution,d=Object(A.a)(Object(A.a)({},e),{},{original:l});if(i&&c)return Gt(Zt(d));var p=n.whatChanged(a,0);return"creation"===(null===p||void 0===p?void 0:p.type)&&!l.isEmpty||"closure"===(null===p||void 0===p?void 0:p.type)&&l.isEmpty?Zt(d):Object(A.a)(Object(A.a)({},d),{},{edited:l.apply(p,0)})}},Wt=function(e,t,n){var a=e.whatChanged(t,n);return a&&"invalidCreation"!==a.type&&a.params.borrowLUSD?a.params.borrowLUSD.mul(n):Ue.Decimal.ZERO},Ht=function(e){return{fees:e.fees,validationContext:It(e)}},zt="trove-",Jt=new RegExp("^".concat(zt)),Kt=function(e){var t=e.collateral,n=e.debt,i=Object(Fe.useLiquityReducer)(Vt,qt),r=Object(d.a)(i,2),s=r[0],o=s.original,u=s.edited,c=s.changePending,p=r[1],y=Object(Fe.useLiquitySelector)(Ht),f=y.fees,b=y.validationContext;Object(a.useEffect)((function(){void 0!==t&&p({type:"setCollateral",newValue:t}),void 0!==n&&p({type:"setDebt",newValue:n})}),[t,n,p]);var m=f.borrowingRate(),h=m.add(.005),v=Pt(o,u,m,b),T=Object(d.a)(v,2),j=T[0],x=T[1],w=Ct().dispatchEvent,O=Object(a.useCallback)((function(){w("CANCEL_ADJUST_TROVE_PRESSED")}),[w]),_=o.isEmpty,k=ce(Jt);return Object(a.useEffect)((function(){"waitingForApproval"===k.type||"waitingForConfirmation"===k.type?p({type:"startChange"}):"failed"===k.type||"cancelled"===k.type?p({type:"finishChange"}):"confirmedOneShot"===k.type&&(k.id==="".concat(zt,"closure")?w("TROVE_CLOSED"):w("TROVE_ADJUSTED"))}),[k,p,w]),Object(g.jsxs)(St,{original:o,edited:u,fee:Wt(o,u,m),borrowingRate:m,changePending:c,dispatch:p,children:[null!==x&&void 0!==x?x:_?Object(g.jsx)(ft,{children:"Start by entering the amount of AUT you'd like to deposit as collateral."}):Object(g.jsx)(ft,{children:"Adjust your Trove by modifying its collateral, debt, or both."}),Object(g.jsxs)(l.f,{variant:"layout.actions",children:[Object(g.jsx)(l.c,{variant:"cancel",onClick:O,children:"Cancel"}),j?Object(g.jsx)(Dt,{transactionId:"".concat(zt).concat(j.type),change:j,maxBorrowingRate:h,borrowingFeeDecayToleranceMinutes:60,children:"Confirm"}):Object(g.jsx)(l.c,{disabled:!0,children:"Confirm"})]})]})},$t=function(e){return{trove:e.trove,price:e.price}},Xt=function(){var e=Ct().dispatchEvent,t=Object(a.useCallback)((function(){e("ADJUST_TROVE_PRESSED")}),[e]),n=Object(a.useCallback)((function(){e("CLOSE_TROVE_PRESSED")}),[e]),i=Object(Fe.useLiquitySelector)($t),r=i.trove,s=i.price;return Object(g.jsxs)(l.d,{children:[Object(g.jsx)(l.g,{children:"Trove"}),Object(g.jsxs)(l.b,{sx:{p:[2,3]},children:[Object(g.jsxs)(l.b,{children:[Object(g.jsx)(xt,{label:"Collateral",inputId:"trove-collateral",amount:r.collateral.prettify(4),unit:"AUT"}),Object(g.jsx)(xt,{label:"Debt",inputId:"trove-debt",amount:r.debt.prettify(),unit:at}),Object(g.jsx)(_t,{value:r.collateralRatio(s),liqPrice:r.liquidationPrice()})]}),Object(g.jsxs)(l.f,{variant:"layout.actions",children:[Object(g.jsx)(l.c,{variant:"outline",onClick:n,children:"Close Trove"}),Object(g.jsxs)(l.c,{onClick:t,children:[Object(g.jsx)(te,{name:"pen",size:"sm"}),"\xa0Adjust"]})]})]})]})},en=function(e){var t=e.title,n=e.children,a=e.icon;return Object(g.jsxs)(l.b,{sx:{mx:1,mb:3},children:[Object(g.jsxs)(l.f,{sx:{alignItems:"center",mb:"10px"},children:[Object(g.jsx)(l.b,{sx:{mr:"12px",fontSize:"20px"},children:a||Object(g.jsx)(te,{name:"info-circle"})}),Object(g.jsx)(l.g,{as:"h3",children:t})]}),Object(g.jsx)(l.o,{sx:{fontSize:2},children:n})]})},tn=function(e){var t=Ct().dispatchEvent,n=Object(a.useCallback)((function(){t("OPEN_TROVE_PRESSED")}),[t]);return Object(g.jsxs)(l.d,{children:[Object(g.jsx)(l.g,{children:"Trove"}),Object(g.jsxs)(l.b,{sx:{p:[2,3]},children:[Object(g.jsx)(xt,{label:"Collateral",inputId:"trove-collateral",amount:"0.00",unit:"AUT"}),Object(g.jsx)(xt,{label:"Debt",inputId:"trove-debt",amount:"0.00",unit:at}),Object(g.jsx)(en,{title:"You haven't borrowed any OUSD yet.",children:"You can borrow OUSD by opening a Trove."}),Object(g.jsx)(l.f,{variant:"layout.actions",children:Object(g.jsx)(l.c,{onClick:n,children:"Open Trove"})})]})]})},nn=function(e,t){return e&&t?e.eq(t):!e&&!t},an=function(e){var t=Object(a.useState)(e),n=Object(d.a)(t,2),i=n[0],r=n[1];return Object(a.useEffect)((function(){var t,n;!!i!==!!e?r(e):!i||!e||(n=e,(t=i).type===n.type&&nn(t.params.borrowLUSD,n.params.borrowLUSD)&&nn(t.params.repayLUSD,n.params.repayLUSD)&&nn(t.params.depositCollateral,n.params.depositCollateral)&&nn(t.params.withdrawCollateral,n.params.withdrawCollateral))||r(e)}),[i,e]),i},rn=function(e){var t=e.troveChange,n=e.maxBorrowingRate,i=e.borrowingFeeDecayToleranceMinutes,r=e.gasEstimationState,s=e.setGasEstimationState,o=Z().liquity;return Object(a.useEffect)((function(){if(t&&"closure"!==t.type){s({type:"inProgress"});var e=!1,a=setTimeout(Object(C.a)(E.a.mark((function a(){var r;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,"creation"===t.type?o.populate.openTrove(t.params,{maxBorrowingRate:n,borrowingFeeDecayToleranceMinutes:i}):o.populate.adjustTrove(t.params,{maxBorrowingRate:n,borrowingFeeDecayToleranceMinutes:i});case 2:r=a.sent,e||(s({type:"complete",populatedTx:r}),console.log("Estimated TX cost: "+Ue.Decimal.from("".concat(r.rawPopulatedTransaction.gasLimit)).prettify(0)));case 4:case"end":return a.stop()}}),a)}))),333);return function(){clearTimeout(a),e=!0}}s({type:"idle"})}),[t]),t&&"complete"===r.type&&void 0!==r.populatedTx.gasHeadroom&&r.populatedTx.gasHeadroom>=2e5?"creation"===t.type?Object(g.jsx)(Me,{children:"The cost of opening a Trove in this collateral ratio range is rather high. To lower it, choose a slightly different collateral ratio."}):Object(g.jsx)(Me,{children:"The cost of adjusting a Trove into this collateral ratio range is rather high. To lower it, choose a slightly different collateral ratio."}):null},sn=function(e){return{fees:e.fees,price:e.price,accountBalance:e.accountBalance,validationContext:It(e)}},on=new Ue.Trove(Ue.Decimal.ZERO,Ue.Decimal.ZERO),un="trove-creation",ln=Ue.Decimal.from(.1),cn=function(){var e=Ct().dispatchEvent,t=Object(Fe.useLiquitySelector)(sn),n=t.fees,i=t.price,r=t.accountBalance,s=t.validationContext,o=n.borrowingRate(),u=Object(a.useState)(),c=Object(a.useState)(Ue.Decimal.ZERO),p=Object(d.a)(c,2),y=p[0],f=p[1],b=Object(a.useState)(Ue.Decimal.ZERO),m=Object(d.a)(b,2),h=m[0],v=m[1],T=o.add(.005),j=h.mul(o),x=new Ue.Percent(o),w=h.add(Ue.LUSD_LIQUIDATION_RESERVE).add(j),O=!y.isZero||!h.isZero,_=O?new Ue.Trove(y,w):on,k=r.gt(ln)?r.sub(ln):Ue.Decimal.ZERO,S=y.eq(k),D=y.isZero||h.isZero?void 0:_.collateralRatio(i),E=y.isZero||h.isZero?void 0:_.liquidationPrice(),C=Pt(on,_,o,s),A=Object(d.a)(C,2),L=A[0],M=A[1],R=an(L),I=Object(a.useState)({type:"idle"}),P=Object(d.a)(I,2),U=P[0],F=P[1],B=ce(un),q="waitingForApproval"===B.type||"waitingForConfirmation"===B.type,N=Object(a.useCallback)((function(){e("CANCEL_ADJUST_TROVE_PRESSED")}),[e]),Y=Object(a.useCallback)((function(){f(Ue.Decimal.ZERO),v(Ue.Decimal.ZERO)}),[]);return Object(a.useEffect)((function(){!y.isZero&&h.isZero&&v(Ue.LUSD_MINIMUM_NET_DEBT)}),[y,h]),Object(g.jsxs)(l.d,{children:[Object(g.jsxs)(l.g,{children:["Trove",O&&!q&&Object(g.jsx)(l.c,{variant:"titleIcon",sx:{":enabled:hover":{color:"danger"}},onClick:Y,children:Object(g.jsx)(te,{name:"history",size:"lg"})})]}),Object(g.jsxs)(l.b,{sx:{p:[2,3]},children:[Object(g.jsx)(wt,{label:"Collateral",inputId:"trove-collateral",amount:y.prettify(4),maxAmount:k.toString(),maxedOut:S,editingState:u,unit:"AUT",editedAmount:y.toString(4),setEditedAmount:function(e){return f(Ue.Decimal.from(e))}}),Object(g.jsx)(wt,{label:"Borrow",inputId:"trove-borrow-amount",amount:h.prettify(),unit:at,editingState:u,editedAmount:h.toString(2),setEditedAmount:function(e){return v(Ue.Decimal.from(e))}}),Object(g.jsx)(gt,{label:"Liquidation Reserve",inputId:"trove-liquidation-reserve",amount:"".concat(Ue.LUSD_LIQUIDATION_RESERVE),unit:at,infoIcon:Object(g.jsx)(et,{tooltip:Object(g.jsx)(l.d,{variant:"tooltip",sx:{width:"200px"},children:"An amount set aside to cover the liquidator\u2019s gas costs if your Trove needs to be liquidated. The amount increases your debt and is refunded if you close your Trove by fully paying off its net debt."})})}),Object(g.jsx)(gt,{label:"Borrowing Fee",inputId:"trove-borrowing-fee",amount:j.prettify(2),pendingAmount:x.toString(2),unit:at,infoIcon:Object(g.jsx)(et,{tooltip:Object(g.jsx)(l.d,{variant:"tooltip",sx:{width:"240px"},children:"This amount is deducted from the borrowed amount as a one-time fee. There are no recurring fees for borrowing, which is thus interest-free."})})}),Object(g.jsx)(gt,{label:"Total debt",inputId:"trove-total-debt",amount:w.prettify(2),unit:at,infoIcon:Object(g.jsx)(et,{tooltip:Object(g.jsxs)(l.d,{variant:"tooltip",sx:{width:"240px"},children:["The total amount of OUSD your Trove will hold."," ",O&&Object(g.jsxs)(g.Fragment,{children:["You will need to repay ",w.sub(Ue.LUSD_LIQUIDATION_RESERVE).prettify(2)," ","OUSD to reclaim your collateral (",Ue.LUSD_LIQUIDATION_RESERVE.toString()," LUSD Liquidation Reserve excluded)."]})]})})}),Object(g.jsx)(_t,{value:D,liqPrice:E}),null!==M&&void 0!==M?M:Object(g.jsx)(ft,{children:"Start by entering the amount of AUT you'd like to deposit as collateral."}),Object(g.jsx)(rn,{troveChange:R,maxBorrowingRate:T,borrowingFeeDecayToleranceMinutes:60,gasEstimationState:U,setGasEstimationState:F}),Object(g.jsxs)(l.f,{variant:"layout.actions",children:[Object(g.jsx)(l.c,{variant:"cancel",onClick:N,children:"Cancel"}),"inProgress"===U.type?Object(g.jsx)(l.c,{disabled:!0,children:Object(g.jsx)(l.n,{size:"24px",sx:{color:"background"}})}):R?Object(g.jsx)(Dt,{transactionId:un,change:R,maxBorrowingRate:T,borrowingFeeDecayToleranceMinutes:60,children:"Confirm"}):Object(g.jsx)(l.c,{disabled:!0,children:"Confirm"})]})]}),q&&Object(g.jsx)(Ot,{})]})},dn=function(e){return{trove:e.trove,fees:e.fees,price:e.price,accountBalance:e.accountBalance,validationContext:It(e)}},pn="trove-adjustment",yn=Ue.Decimal.from(.1),fn=function(){var e=Ct().dispatchEvent,t=Object(Fe.useLiquitySelector)(dn),n=t.trove,i=t.fees,r=t.price,s=t.accountBalance,o=t.validationContext,u=Object(a.useState)(),c=Object(a.useRef)(n),p=Object(a.useState)(n.collateral),y=Object(d.a)(p,2),f=y[0],b=y[1],m=Object(a.useState)(n.netDebt),h=Object(d.a)(m,2),v=h[0],T=h[1],j=ce(pn),x=i.borrowingRate();Object(a.useEffect)((function(){"confirmedOneShot"===j.type&&e("TROVE_ADJUSTED")}),[j.type,e]),Object(a.useEffect)((function(){if(!c.current.collateral.eq(n.collateral)){var e=function(e,t){return e.absoluteValue?e.positive?t.collateral.add(e.absoluteValue):e.negative&&e.absoluteValue.lt(t.collateral)?t.collateral.sub(e.absoluteValue):t.collateral:t.collateral}(Ue.Difference.between(f,c.current.collateral),n);b(e)}if(!c.current.netDebt.eq(n.netDebt)){var t=function(e,t){return e.absoluteValue?e.positive?t.netDebt.add(e.absoluteValue):e.negative&&e.absoluteValue.lt(t.netDebt)?t.netDebt.sub(e.absoluteValue):t.netDebt:t.netDebt}(Ue.Difference.between(v,c.current.netDebt),n);T(t)}c.current=n}),[n,f,v]);var w=Object(a.useCallback)((function(){e("CANCEL_ADJUST_TROVE_PRESSED")}),[e]),O=Object(a.useCallback)((function(){b(n.collateral),T(n.netDebt)}),[n.collateral,n.netDebt]),_=!f.eq(n.collateral)||!v.eq(n.netDebt),k=v.gt(n.netDebt),S=k?v.sub(n.netDebt):Ue.Decimal.ZERO,D=k?function(e,t,n){var a=e.whatChanged(t,n);return a&&"invalidCreation"!==a.type&&a.params.borrowLUSD?a.params.borrowLUSD.mul(n):Ue.Decimal.ZERO}(n,new Ue.Trove(n.collateral,n.debt.add(S)),x):Ue.Decimal.ZERO,E=v.add(Ue.LUSD_LIQUIDATION_RESERVE).add(D),C=x.add(.005),A=_?new Ue.Trove(f,E):n,L=new Ue.Percent(x),M=s.gt(yn)?s.sub(yn):Ue.Decimal.ZERO,R=n.collateral.add(M),I=f.eq(R),P=f.isZero||v.isZero?void 0:A.collateralRatio(r),U=f.isZero||v.isZero?void 0:A.liquidationPrice(),F=Ue.Difference.between(P,n.collateralRatio(r)),B=Pt(n,A,x,o),q=Object(d.a)(B,2),N=q[0],Y=q[1],Q=an(N),G=Object(a.useState)({type:"idle"}),Z=Object(d.a)(G,2),V=Z[0],W=Z[1],H="waitingForApproval"===j.type||"waitingForConfirmation"===j.type;return"open"!==n.status?null:Object(g.jsxs)(l.d,{children:[Object(g.jsxs)(l.g,{children:["Trove",_&&!H&&Object(g.jsx)(l.c,{variant:"titleIcon",sx:{":enabled:hover":{color:"danger"}},onClick:O,children:Object(g.jsx)(te,{name:"history",size:"lg"})})]}),Object(g.jsxs)(l.b,{sx:{p:[2,3]},children:[Object(g.jsx)(wt,{label:"Collateral",inputId:"trove-collateral",amount:f.prettify(4),maxAmount:R.toString(),maxedOut:I,editingState:u,unit:"AUT",editedAmount:f.toString(4),setEditedAmount:function(e){return b(Ue.Decimal.from(e))}}),Object(g.jsx)(wt,{label:"Net debt",inputId:"trove-net-debt-amount",amount:v.prettify(),unit:at,editingState:u,editedAmount:v.toString(2),setEditedAmount:function(e){return T(Ue.Decimal.from(e))}}),Object(g.jsx)(gt,{label:"Liquidation Reserve",inputId:"trove-liquidation-reserve",amount:"".concat(Ue.LUSD_LIQUIDATION_RESERVE),unit:at,infoIcon:Object(g.jsx)(et,{tooltip:Object(g.jsx)(l.d,{variant:"tooltip",sx:{width:"200px"},children:"An amount set aside to cover the liquidator\u2019s gas costs if your Trove needs to be liquidated. The amount increases your debt and is refunded if you close your Trove by fully paying off its net debt."})})}),Object(g.jsx)(gt,{label:"Borrowing Fee",inputId:"trove-borrowing-fee",amount:D.prettify(2),pendingAmount:L.toString(2),unit:at,infoIcon:Object(g.jsx)(et,{tooltip:Object(g.jsx)(l.d,{variant:"tooltip",sx:{width:"240px"},children:"This amount is deducted from the borrowed amount as a one-time fee. There are no recurring fees for borrowing, which is thus interest-free."})})}),Object(g.jsx)(gt,{label:"Total debt",inputId:"trove-total-debt",amount:E.prettify(2),unit:at,infoIcon:Object(g.jsx)(et,{tooltip:Object(g.jsxs)(l.d,{variant:"tooltip",sx:{width:"240px"},children:["The total amount of OUSD your Trove will hold."," ",_&&Object(g.jsxs)(g.Fragment,{children:["You will need to repay ",E.sub(Ue.LUSD_LIQUIDATION_RESERVE).prettify(2)," ","OUSD to reclaim your collateral (",Ue.LUSD_LIQUIDATION_RESERVE.toString()," LUSD Liquidation Reserve excluded)."]})]})})}),Object(g.jsx)(_t,{value:P,liqPrice:U,change:F}),null!==Y&&void 0!==Y?Y:Object(g.jsx)(ft,{children:"Adjust your Trove by modifying its collateral, debt, or both."}),Object(g.jsx)(rn,{troveChange:Q,maxBorrowingRate:C,borrowingFeeDecayToleranceMinutes:60,gasEstimationState:V,setGasEstimationState:W}),Object(g.jsxs)(l.f,{variant:"layout.actions",children:[Object(g.jsx)(l.c,{variant:"cancel",onClick:w,children:"Cancel"}),Q?Object(g.jsx)(Dt,{transactionId:pn,change:Q,maxBorrowingRate:C,borrowingFeeDecayToleranceMinutes:60,children:"Confirm"}):Object(g.jsx)(l.c,{disabled:!0,children:"Confirm"})]})]}),H&&Object(g.jsx)(Ot,{})]})},bn=function(e){return{collateralSurplusBalance:e.collateralSurplusBalance}},mn=function(){var e=Object(Fe.useLiquitySelector)(bn).collateralSurplusBalance,t=Z().liquity.send,n="claim-coll-surplus",i=ce(n),r=Ct().dispatchEvent;return Object(a.useEffect)((function(){"confirmedOneShot"===i.type&&r("TROVE_SURPLUS_COLLATERAL_CLAIMED")}),[i.type,r]),"waitingForApproval"===i.type?Object(g.jsx)(l.f,{variant:"layout.actions",children:Object(g.jsxs)(l.c,{disabled:!0,sx:{mx:2},children:[Object(g.jsx)(l.n,{sx:{mr:2,color:"white"},size:"20px"}),"Waiting for your approval"]})}):"waitingForConfirmation"!==i.type&&"confirmed"!==i.type?Object(g.jsx)(l.f,{variant:"layout.actions",children:Object(g.jsx)(pe,{id:n,send:t.claimCollateralSurplus.bind(t,void 0),children:Object(g.jsxs)(l.c,{sx:{mx:2},children:["Claim ",e.prettify()," AUT"]})})}):null},hn=function(e){return{hasSurplusCollateral:!e.collateralSurplusBalance.isZero}},vn=function(){var e=Object(Fe.useLiquitySelector)(hn).hasSurplusCollateral,t=Ct().dispatchEvent,n=Object(a.useCallback)((function(){t("OPEN_TROVE_PRESSED")}),[t]);return Object(g.jsxs)(l.d,{children:[Object(g.jsx)(l.g,{children:"Trove"}),Object(g.jsxs)(l.b,{sx:{p:[2,3]},children:[Object(g.jsx)(en,{title:"Your Trove has been redeemed.",children:e?"Please reclaim your remaining collateral before opening a new Trove.":"You can borrow OUSD by opening a Trove."}),Object(g.jsxs)(l.f,{variant:"layout.actions",children:[e&&Object(g.jsx)(mn,{}),!e&&Object(g.jsx)(l.c,{onClick:n,children:"Open Trove"})]})]})]})},Tn=function(e){return{hasSurplusCollateral:!e.collateralSurplusBalance.isZero}},jn=function(){var e=Object(Fe.useLiquitySelector)(Tn).hasSurplusCollateral,t=Ct().dispatchEvent,n=Object(a.useCallback)((function(){t("OPEN_TROVE_PRESSED")}),[t]);return Object(g.jsxs)(l.d,{children:[Object(g.jsx)(l.g,{children:"Trove"}),Object(g.jsxs)(l.b,{sx:{p:[2,3]},children:[Object(g.jsx)(en,{title:"Your Trove has been liquidated.",children:e?"Please reclaim your remaining collateral before opening a new Trove.":"You can borrow OUSD by opening a Trove."}),Object(g.jsxs)(l.f,{variant:"layout.actions",children:[e&&Object(g.jsx)(mn,{}),!e&&Object(g.jsx)(l.c,{onClick:n,children:"Open Trove"})]})]})]})},gn=function(e){switch(Ct().view){case"ACTIVE":return Object(g.jsx)(Xt,Object(A.a)({},e));case"ADJUSTING":return Object(g.jsx)(fn,Object(A.a)({},e));case"CLOSING":return Object(g.jsx)(Kt,Object(A.a)(Object(A.a)({},e),{},{collateral:Ue.Decimal.ZERO,debt:Ue.Decimal.ZERO}));case"OPENING":return Object(g.jsx)(cn,Object(A.a)({},e));case"LIQUIDATED":return Object(g.jsx)(jn,Object(A.a)({},e));case"REDEEMED":return Object(g.jsx)(vn,Object(A.a)({},e));case"NONE":return Object(g.jsx)(tn,Object(A.a)({},e))}},xn=function(e){var t=e.name,n=e.tooltip,a=e.children;return Object(g.jsxs)(l.f,{sx:{my:"10px"},children:[Object(g.jsxs)(l.f,{sx:{alignItems:"center",justifyContent:"flex-start",flex:1.2,fontWeight:200},children:[Object(g.jsx)(l.f,{children:t}),n&&Object(g.jsx)(et,{size:"xs",tooltip:Object(g.jsx)(l.d,{variant:"tooltip",children:n})})]}),Object(g.jsx)(l.f,{sx:{justifyContent:"flex-end",flex:.8,alignItems:"center"},children:a})]})},wn=function(e){return{accountBalance:e.accountBalance,lusdBalance:e.lusdBalance,lqtyBalance:e.lqtyBalance}},On=function(){var e=Object(Fe.useLiquitySelector)(wn),t=e.accountBalance,n=e.lusdBalance,a=e.lqtyBalance;return Object(g.jsxs)(l.b,{sx:{mb:3},children:[Object(g.jsx)(l.g,{children:"My Account Balances"}),Object(g.jsxs)(xn,{name:"AUT",children:[" ",t.prettify(4)]}),Object(g.jsxs)(xn,{name:at,children:[" ",n.prettify()]}),Object(g.jsx)(xn,{name:it,children:a.prettify()})]})},_n=function(e){return e.price},kn=function(){var e=Object(Fe.useLiquitySelector)(_n);return Object(g.jsxs)(l.b,{children:[Object(g.jsx)(l.g,{children:"Price feed"}),Object(g.jsxs)(xn,{name:"AUT",children:["$",e.prettify()]})]})},Sn=function(e){return{numberOfTroves:e.numberOfTroves,price:e.price,total:e.total,lusdInStabilityPool:e.lusdInStabilityPool,borrowingRate:e.borrowingRate,redemptionRate:e.redemptionRate,totalStakedLQTY:e.totalStakedLQTY}},Dn=function(e){var t=e.filterStats,n=Object(Fe.useLiquitySelector)(Sn),a=n.numberOfTroves,i=n.price,r=n.lusdInStabilityPool,s=n.total,o=n.borrowingRate,u=n.redemptionRate,c=n.totalStakedLQTY,d=s.debt.nonZero&&new Ue.Percent(r.div(s.debt)),p=new Ue.Percent(s.collateralRatio(i)),y=new Ue.Percent(o),f=new Ue.Percent(u),b=function(e){return!t||t.includes(e)};return Object(g.jsxs)(l.b,{sx:{mb:3},children:[Object(g.jsx)(l.g,{children:"Opal statistics"}),b("borrow-fee")&&Object(g.jsx)(xn,{name:"Borrowing Fee",tooltip:"The Borrowing Fee is a one-off fee charged as a percentage of the borrowed amount (in OUSD) and is part of a Trove's debt. The fee varies between 0.5% and 5% depending on OUSD redemption volumes.",children:y.toString(2)}),b("redeem-fee")&&Object(g.jsx)(xn,{name:"Redemption Fee",tooltip:"The Redemption Fee is a one-off fee charged as a percentage of the redeemed amount (in AUT). The fee varies from 0.5% depending on OUSD redemption volumes.",children:f.toString(2)}),b("tvl")&&Object(g.jsxs)(xn,{name:"TVL",tooltip:"The Total Value Locked (TVL) is the total value of AUT locked as collateral in the system, given in AUT and USD.",children:[s.collateral.shorten()," ",Object(g.jsx)(l.o,{sx:{fontSize:1},children:"\xa0AUT"}),Object(g.jsxs)(l.o,{sx:{fontSize:1},children:["\xa0($",Ue.Decimal.from(s.collateral.mul(i)).shorten(),")"]})]}),b("troves")&&Object(g.jsx)(xn,{name:"Troves",tooltip:"The total number of active Troves in the system.",children:Ue.Decimal.from(a).prettify(0)}),b("lusd-supply")&&Object(g.jsx)(xn,{name:"OUSD supply",tooltip:"The total OUSD minted by the Opal Protocol.",children:s.debt.shorten()}),b("lusd-sp")&&d&&Object(g.jsxs)(xn,{name:"OUSD in Stability Pool",tooltip:"The total OUSD currently held in the Stability Pool, expressed as an amount and a fraction of the OUSD supply. ",children:[r.shorten(),Object(g.jsxs)(l.o,{sx:{fontSize:1},children:["\xa0(",d.toString(1),")"]})]}),b("staked-lqty")&&Object(g.jsx)(xn,{name:"Staked OPAL",tooltip:"The total amount of OPAL that is staked for earning fee revenue.",children:c.shorten()}),b("tcr")&&Object(g.jsx)(xn,{name:"Total Collateral Ratio",tooltip:"The ratio of the Dollar value of the entire system collateral at the current AUT:USD price, to the entire system debt.",children:p.prettify()}),b("recovery")&&Object(g.jsx)(xn,{name:"Recovery Mode",tooltip:"Recovery Mode is activated when the Total Collateral Ratio (TCR) falls below 150%. When active, your Trove can be liquidated if its collateral ratio is below the TCR. The maximum collateral you can lose from liquidation is capped at 110% of your Trove's debt. Operations are also restricted that would negatively impact the TCR.",children:s.collateralRatioIsBelowCritical(i)?Object(g.jsx)(l.b,{color:"danger",children:"Yes"}):"No"})]})},En=function(e){var t=e.variant,n=void 0===t?"info":t,i=e.showBalances,r=e.showProtocol,s=e.showPriceFeed,o=e.filterStats,u=Object(a.useState)(!1),c=Object(d.a)(u,2),p=c[0],y=c[1];return Object(g.jsxs)(l.d,{variant:n,children:[Object(g.jsx)(l.b,{onClick:function(){y(!p)},sx:{display:"flex",justifyContent:"center",color:"accent",cursor:"pointer"},children:Object(g.jsx)(l.o,{children:"Toggle Stats"})}),p&&Object(g.jsxs)(g.Fragment,{children:[i&&Object(g.jsx)(On,{}),r&&Object(g.jsx)(Dn,{filterStats:o}),s&&Object(g.jsx)(kn,{})]})]})},Cn=function(e){var t=e.disabledDays,n=e.unlockDate;return Object(g.jsxs)(l.d,{children:[Object(g.jsx)(l.g,{children:"Redeem"}),Object(g.jsx)(l.b,{sx:{p:[2,3]},children:Object(g.jsxs)(en,{title:"Redemption is not enabled yet.",icon:Object(g.jsx)(l.b,{sx:{color:"warning"},children:Object(g.jsx)(te,{name:"exclamation-triangle"})}),children:[Object(g.jsxs)(l.m,{children:["OUSD redemption is disabled for the first ",t," days after launch."]}),Object(g.jsxs)(l.m,{sx:{mt:3},children:["It will be unlocked at"," ",Object(g.jsx)(l.o,{sx:{fontWeight:"medium"},children:n.toLocaleString()}),"."]})]})})]})},An=function(e){var t=e.transactionId,n=e.disabled,a=e.lusdAmount,i=e.maxRedemptionRate,r=Z().liquity.send,s=de(t,r.redeemLUSD.bind(r,a,i)),o=Object(d.a)(s,1)[0];return Object(g.jsx)(l.c,{disabled:n,onClick:o,children:"Confirm"})},Ln=new Ue.Percent(Ue.MINIMUM_COLLATERAL_RATIO).toString(0),Mn=function(e){return{price:e.price,fees:e.fees,total:e.total,lusdBalance:e.lusdBalance}},Rn="redemption",In=function(){var e=Object(Fe.useLiquitySelector)(Mn),t=e.price,n=e.fees,i=e.total,r=e.lusdBalance,s=Object(a.useState)(Ue.Decimal.ZERO),o=Object(d.a)(s,2),u=o[0],c=o[1],p=Object(a.useState)(!1),y=Object(d.a)(p,2),f=y[0],b=y[1],m=Object(a.useState)(),h=!u.isZero,v=u.div(t),T=n.redemptionRate(u.div(i.debt)),j=new Ue.Percent(T),x=v.mul(T),w=T.add(.001),O=ce(Rn);Object(a.useEffect)((function(){"waitingForApproval"===O.type||"waitingForConfirmation"===O.type?b(!0):"failed"===O.type||"cancelled"===O.type?b(!1):"confirmed"===O.type&&(c(Ue.Decimal.ZERO),b(!1))}),[O.type,b,c]);var _=i.collateralRatioIsBelowMinimum(t)?[!1,Object(g.jsxs)(At,{children:["You can't redeem OUSD when the total collateral ratio is less than"," ",Object(g.jsx)(bt,{children:Ln}),". Please try again later."]})]:u.gt(r)?[!1,Object(g.jsxs)(At,{children:["The amount you're trying to redeem exceeds your balance by"," ",Object(g.jsxs)(bt,{children:[u.sub(r).prettify()," ",at]}),"."]})]:[!0,Object(g.jsxs)(ft,{children:["You will receive ",Object(g.jsxs)(bt,{children:[v.sub(x).prettify(4)," AUT"]})," in exchange for"," ",Object(g.jsxs)(bt,{children:[u.prettify()," ",at]}),"."]})],k=Object(d.a)(_,2),S=k[0],D=k[1];return Object(g.jsxs)(l.d,{children:[Object(g.jsxs)(l.g,{children:["Redeem",h&&!f&&Object(g.jsx)(l.c,{variant:"titleIcon",sx:{":enabled:hover":{color:"danger"}},onClick:function(){return c(Ue.Decimal.ZERO)},children:Object(g.jsx)(te,{name:"history",size:"lg"})})]}),Object(g.jsxs)(l.b,{sx:{p:[2,3]},children:[Object(g.jsx)(wt,{label:"Redeem",inputId:"redeem-lusd",amount:u.prettify(),maxAmount:r.toString(),maxedOut:u.eq(r),unit:at,editingState:m,editedAmount:u.toString(2),setEditedAmount:function(e){return c(Ue.Decimal.from(e))}}),Object(g.jsx)(gt,{label:"Redemption Fee",inputId:"redeem-fee",amount:x.toString(4),pendingAmount:j.toString(2),unit:"AUT",infoIcon:Object(g.jsx)(et,{tooltip:Object(g.jsx)(l.d,{variant:"tooltip",sx:{minWidth:"240px"},children:"The Redemption Fee is charged as a percentage of the redeemed AUT. The Redemption Fee depends on OUSD redemption volumes and is 0.5% at minimum."})})}),(h||!S)&&D||Object(g.jsxs)(ft,{children:["Enter the amount of ",at," you'd like to redeem."]}),Object(g.jsx)(l.f,{variant:"layout.actions",children:Object(g.jsx)(An,{transactionId:Rn,disabled:!h||!S,lusdAmount:u,maxRedemptionRate:w})})]}),f&&Object(g.jsx)(Ot,{})]})},Pn=function(e){return e.blockTimestamp},Un=function(){var e=Z().liquity.connection,t=e.deploymentDate,n=e.bootstrapPeriod,a=Object(Fe.useLiquitySelector)(Pn),i=Math.round(n/86400),r=t.getTime()/1e3+n,s=new Date(1e3*r);return a<r?Object(g.jsx)(Cn,{disabledDays:i,unlockDate:s}):Object(g.jsx)(In,{})},Fn=function(){return Object(g.jsx)(l.e,{variant:"columns",children:Object(g.jsxs)(l.e,{variant:"single",children:[Object(g.jsx)(lt,{filterStats:["tcr","lusd-supply","tvl"]}),Object(g.jsx)(gn,{}),Object(g.jsx)(Un,{}),Object(g.jsx)(En,{showProtocol:!0,showPriceFeed:!0})]})})},Bn=function(){var e=Z().config.frontendTag;return Object(g.jsxs)(l.b,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-around",m:3,p:3,maxWidth:"500px",border:1,borderRadius:"8px",borderColor:"warning",boxShadow:2},children:[Object(g.jsxs)(l.f,{sx:{alignItems:"center",mx:3,mb:2},children:[Object(g.jsx)(te,{name:"exclamation-triangle",size:"2x"}),Object(g.jsx)(l.g,{sx:{ml:3,fontSize:"18px"},children:"Frontend not yet registered"})]}),Object(g.jsxs)(l.m,{sx:{fontSize:2},children:["If you're the operator of this frontend, please select ",Object(g.jsx)("b",{children:$e(e)})," ","in your wallet to proceed with the registration."]})]})},qn=function(e){var t=e.kickbackRate,n=Z().liquity.send,a="register-frontend",i=ce(a);return"waitingForApproval"===i.type?Object(g.jsxs)(l.c,{disabled:!0,children:[Object(g.jsx)(l.n,{sx:{mr:2,color:"white"},size:"20px"}),"Waiting for your approval"]}):"waitingForConfirmation"!==i.type&&"confirmed"!==i.type?Object(g.jsx)(pe,{id:a,send:n.registerFrontend.bind(n,t),children:Object(g.jsx)(l.c,{children:"Register"})}):null},Nn=function(){var e=Z().account,t=Object(a.useState)(Ue.Decimal.from(.8)),n=Object(d.a)(t,2),i=n[0],r=n[1],s=Object(a.useState)(Ue.Decimal.from(.2)),o=Object(d.a)(s,2),u=o[0],c=o[1],p=Object(a.useState)("80"),y=Object(d.a)(p,2),f=y[0],b=y[1];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(l.d,{children:[Object(g.jsx)(l.g,{children:"Choose a kickback rate"}),Object(g.jsx)(l.b,{sx:{p:[2,3]},children:Object(g.jsxs)(l.f,{children:[Object(g.jsx)(l.j,{children:"Kickback rate"}),Object(g.jsx)(l.j,{variant:"unit",children:"%"}),Object(g.jsx)(l.i,{sx:{maxWidth:"200px"},type:"number",step:"any",value:f,onChange:function(e){b(e.target.value);try{var t=Ue.Decimal.from(e.target.value||0).div(100),n=Ue.Decimal.ONE.sub(t);r(t),c(n)}catch(a){}},onBlur:function(){b(i.mul(100).toString())}})]})})]}),Object(g.jsxs)(l.b,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-around",m:3,mt:[3,null,4],mb:4,p:3,maxWidth:"450px",border:1,borderRadius:"8px",borderColor:"danger",boxShadow:2},children:[Object(g.jsxs)(l.f,{sx:{alignItems:"center",mx:3,fontSize:4},children:[Object(g.jsx)(te,{name:"hand-paper"}),Object(g.jsx)(l.g,{sx:{ml:3,fontSize:"18px"},children:"Before you proceed"})]}),Object(g.jsxs)(l.m,{sx:{fontSize:1,mt:3},children:["You are about to register ",Object(g.jsx)("b",{children:e&&$e(e)})," to receive"," ",Object(g.jsxs)("b",{children:[u.mul(100).toString(),"%"]})," of the OPAL rewards earned through this frontend."]}),Object(g.jsx)(l.m,{sx:{fontSize:1,mt:3,fontWeight:"bold"},children:"You will not be able to change the kickback rate for this address later."}),Object(g.jsx)(l.m,{sx:{fontSize:1,mt:3},children:"If you'd like to use a different kickback rate in the future, you will need to repeat this registration with a different address."})]}),Object(g.jsx)(qn,{kickbackRate:i})]})},Yn=function(e){var t=e.onDismiss;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(l.b,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-around",m:3,mt:4,mb:4,p:4,maxWidth:"500px",bg:"rgba(40, 192, 129, 0.05)",color:"success",border:1,borderRadius:"8px",borderColor:"success",boxShadow:2},children:[Object(g.jsxs)(l.f,{sx:{alignItems:"center",mx:3,mb:4,fontSize:5},children:[Object(g.jsx)(te,{name:"check"}),Object(g.jsx)(l.g,{sx:{ml:3,fontSize:4},children:"Success!"})]}),Object(g.jsx)(l.m,{sx:{fontSize:2},children:"Your frontend is now ready to receive OPAL rewards."})]}),Object(g.jsx)(l.c,{onClick:t,children:"Go to Dashboard"})]})},Qn=function(e){return e.frontend},Gn=function(){var e=Z(),t=e.account,n=e.config.frontendTag,i=Object(Fe.useLiquitySelector)(Qn),r=n!==L.a&&"unregistered"===i.status,s=Object(a.useState)(!1),o=Object(d.a)(s,2),u=o[0],l=o[1];return Object(a.useEffect)((function(){r&&l(!0)}),[r]),u||r?"registered"===i.status?Object(g.jsx)(Yn,{onDismiss:function(){return l(!1)}}):t===n?Object(g.jsx)(Nn,{}):Object(g.jsx)(Bn,{}):Object(g.jsx)(Fn,{})},Zn=Object(a.createContext)(null),Vn=function(){var e=Object(a.useContext)(Zn);if(null===e)throw new Error("You must add a <FarmViewProvider> into the React tree");return e},Wn=function(e){return{remainingLiquidityMiningLQTYReward:e.remainingLiquidityMiningLQTYReward}},Hn=function(){var e=Object(Fe.useLiquitySelector)(Wn).remainingLiquidityMiningLQTYReward;return Object(g.jsxs)(l.f,{sx:{mr:2,fontSize:2,fontWeight:"medium"},children:[e.prettify(0)," OPAL remaining"]})},zn=function(e,t){return'{\n  token(id: "'.concat(e.toLowerCase(),'") {\n    derivedETH\n  },\n  bundle(id: 1) {\n    ethPrice\n  },\n  pair(id: "').concat(t.toLowerCase(),'") {\n    totalSupply\n    reserveUSD\n  }\n}')};function Jn(e,t){return Kn.apply(this,arguments)}function Kn(){return(Kn=Object(C.a)(E.a.mark((function e(t,n){var a,i,r,s,o,u,l,c,d,p,y;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch("https://api.thegraph.com/subgraphs/name/uniswap/uniswap-v2",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({query:zn(t,n),variables:null})});case 2:if((o=e.sent).ok){e.next=5;break}return e.abrupt("return",Promise.reject("Network error connecting to Uniswap subgraph"));case 5:return e.next=7,o.json();case 7:if(u=e.sent,l=u.data,!(c=u.errors)){e.next=12;break}return e.abrupt("return",Promise.reject(c));case 12:if("string"!==typeof(null===l||void 0===l||null===(a=l.token)||void 0===a?void 0:a.derivedETH)||"string"!==typeof(null===l||void 0===l||null===(i=l.pair)||void 0===i?void 0:i.reserveUSD)||"string"!==typeof(null===l||void 0===l||null===(r=l.pair)||void 0===r?void 0:r.totalSupply)||"string"!==typeof(null===l||void 0===l||null===(s=l.bundle)||void 0===s?void 0:s.ethPrice)){e.next=17;break}return d=Ue.Decimal.from(l.bundle.ethPrice),p=Ue.Decimal.from(l.token.derivedETH).mul(d),y=Ue.Decimal.from(l.pair.reserveUSD).div(Ue.Decimal.from(l.pair.totalSupply)),e.abrupt("return",{lqtyPriceUSD:p,uniLpPriceUSD:y});case 17:return e.abrupt("return",Promise.reject("Uniswap doesn't have the required data to calculate yield"));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $n,Xn=function(e){return{remainingLiquidityMiningLQTYReward:e.remainingLiquidityMiningLQTYReward,totalStakedUniTokens:e.totalStakedUniTokens}},ea=function(){var e=Z().liquity.connection,t=e.addresses,n=e.liquidityMiningLQTYRewardRate,i=Object(Fe.useLiquitySelector)(Xn),r=i.remainingLiquidityMiningLQTYReward,s=i.totalStakedUniTokens,o=Object(a.useState)(void 0),u=Object(d.a)(o,2),c=u[0],p=u[1],y=Object(a.useState)(void 0),f=Object(d.a)(y,2),b=f[0],m=f[1],h=r.isZero||s.isZero,v=t.lqtyToken,T=t.uniToken,j=r.div(n).div(86400);if(Object(a.useEffect)((function(){Object(C.a)(E.a.mark((function e(){var t,n,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jn(v,T);case 3:t=e.sent,n=t.lqtyPriceUSD,a=t.uniLpPriceUSD,p(n),m(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()}),[v,T]),h||void 0===c||void 0===b)return null;var x=r.mul(c),w=s.mul(b),O=x.div(w).mul(100);return O.isZero?null:Object(g.jsxs)(l.a,{variant:"muted",children:[Object(g.jsxs)(l.o,{children:[null===j||void 0===j?void 0:j.prettify(0)," day yield ",O.toString(2),"%"]}),Object(g.jsx)(et,{tooltip:Object(g.jsxs)(l.d,{variant:"tooltip",sx:{minWidth:["auto","352px"]},children:[Object(g.jsxs)(l.m,{children:["An ",Object(g.jsx)(l.o,{sx:{fontWeight:"bold"},children:"estimate"})," of the OPAL return on staked UNI LP tokens. The farm runs for 6-weeks, and the return is relative to the time remaining."]}),Object(g.jsxs)(l.m,{sx:{fontSize:"12px",fontFamily:"monospace",mt:2},children:["($OPAL_REWARDS / $STAKED_UNI_LP) * 100 ="," ",Object(g.jsx)(l.o,{sx:{fontWeight:"bold"},children:" Yield"})]}),Object(g.jsxs)(l.m,{sx:{fontSize:"12px",fontFamily:"monospace"},children:["($",x.shorten()," / $",w.shorten(),") * 100 =",Object(g.jsxs)(l.o,{sx:{fontWeight:"bold"},children:[" ",O.toString(2),"%"]})]})]})})]})},ta=function(){var e,t=Vn().dispatchEvent,n=Z().liquity.connection.addresses,i=Object(a.useCallback)((function(){t("STAKE_PRESSED")}),[t]);return Object(g.jsxs)(l.d,{children:[Object(g.jsxs)(l.g,{children:["Uniswap Opal Farm",Object(g.jsx)(l.f,{sx:{justifyContent:"flex-end"},children:Object(g.jsx)(Hn,{})})]}),Object(g.jsxs)(l.b,{sx:{p:[2,3]},children:[Object(g.jsxs)(en,{title:"You aren't farming OPAL.",children:[Object(g.jsx)(l.m,{children:"You can farm OPAL by staking your Uniswap AUT/OUSD LP tokens."}),Object(g.jsxs)(l.m,{sx:{mt:2},children:["You can obtain LP tokens by adding liquidity to the"," ",Object(g.jsxs)(l.k,{href:(e=n.lusdToken,"https://app.uniswap.org/#/add/ETH/".concat(e)),target:"_blank",children:["AUT/OUSD pool on Uniswap. ",Object(g.jsx)(te,{name:"external-link-alt",size:"xs"})]})]})]}),Object(g.jsxs)(l.f,{variant:"layout.actions",children:[Object(g.jsx)(l.f,{sx:{justifyContent:"flex-start",alignItems:"center",flex:1},children:Object(g.jsx)(ea,{})}),Object(g.jsx)(l.c,{onClick:i,children:"Stake"})]})]})]})},na=function(e){return{uniTokenBalance:e.uniTokenBalance,uniTokenAllowance:e.uniTokenAllowance,liquidityMiningStake:e.liquidityMiningStake}},aa=function(e){var t=Object(Fe.useLiquitySelector)(na),n=t.uniTokenBalance,a=t.uniTokenAllowance,i=t.liquidityMiningStake,r=i.gt(e),s=r?i.sub(e):Ue.Decimal.from(e).sub(i),o=i.add(n),u=e.eq(o);if(r)return{isValid:!0,hasApproved:!0,hasEnoughUniToken:!0,isWithdrawing:r,amountChanged:s,maximumStake:o,hasSetMaximumStake:u};var l=!a.isZero&&a.gte(s),c=!n.isZero&&n.gte(s);return{isValid:l&&c,hasApproved:l,hasEnoughUniToken:c,isWithdrawing:r,amountChanged:s,maximumStake:o,hasSetMaximumStake:u}},ia="farm-confirm",ra=function(e){var t=e.amount,n=Vn().dispatchEvent,i=Z().liquity.send,r=ce(ia),s=aa(t),o=s.isValid,u=s.isWithdrawing,c=s.amountChanged,d=u?i.unstakeUniTokens.bind(i,c):i.stakeUniTokens.bind(i,c),p=c.isZero||!o;return Object(a.useEffect)((function(){"confirmedOneShot"===r.type&&n("STAKE_CONFIRMED")}),[r.type,n]),Object(g.jsx)(pe,{id:ia,send:d,showFailure:"asTooltip",tooltipPlacement:"bottom",children:Object(g.jsx)(l.c,{disabled:p,children:"Confirm"})})},sa="farm-stake",oa=function(e){var t=e.amount,n=Z().liquity.send,a=aa(t),i=a.isValid,r=a.hasApproved,s=a.isWithdrawing,o=a.amountChanged;return r?!i||o.isZero?null:Object(g.jsxs)(ft,{children:[s&&Object(g.jsx)(pe,{id:sa,send:n.unstakeUniTokens.bind(n,o),children:Object(g.jsxs)(l.o,{children:["You are unstaking ",o.prettify(4)," ",rt]})}),!s&&Object(g.jsx)(pe,{id:sa,send:n.stakeUniTokens.bind(n,o),children:Object(g.jsxs)(l.o,{children:["You are staking ",o.prettify(4)," ",rt]})})]}):Object(g.jsx)(ft,{children:Object(g.jsxs)(l.o,{children:["To stake your ",rt," tokens you need to allow Opal to stake them for you"]})})},ua="farm-approve",la=function(e){var t=e.amount,n=Vn().dispatchEvent,i=Z().liquity.send,r=aa(t).hasApproved,s=ce(ua);return Object(a.useEffect)((function(){"confirmedOneShot"===s.type&&n("STAKE_APPROVED")}),[s.type,n]),r?null:Object(g.jsx)(pe,{id:ua,send:i.approveUniTokens.bind(i,void 0),showFailure:"asTooltip",tooltipPlacement:"bottom",children:Object(g.jsx)(l.c,{sx:{width:"60%"},children:"Approve UNI LP"})})},ca=function(e){var t=e.amount,n=aa(t),a=n.isValid,i=n.hasApproved,r=n.hasEnoughUniToken;return a?null:i?r?null:Object(g.jsxs)(At,{children:["You don't have enough ",rt]}):Object(g.jsxs)(At,{children:["You haven't approved enough ",rt]})},da=/farm-/,pa=function(e){return{totalStakedUniTokens:e.totalStakedUniTokens}},ya=function(){var e=Vn().dispatchEvent,t=Object(Fe.useLiquitySelector)(pa).totalStakedUniTokens,n=Object(a.useState)(Ue.Decimal.from(0)),i=Object(d.a)(n,2),r=i[0],s=i[1],o=Object(a.useState)(),u=!r.isZero,c=aa(r),p=c.maximumStake,y=c.hasSetMaximumStake,f=ce(da),b="waitingForApproval"===f.type||"waitingForConfirmation"===f.type,m=Object(a.useCallback)((function(){e("CANCEL_PRESSED")}),[e]),h=t.add(r),v=r.mulDiv(100,h);return Object(g.jsxs)(l.d,{children:[Object(g.jsxs)(l.g,{children:["Uniswap Opal Farm",u&&!b&&Object(g.jsx)(l.c,{variant:"titleIcon",sx:{":enabled:hover":{color:"danger"}},onClick:function(){return s(Ue.Decimal.from(0))},children:Object(g.jsx)(te,{name:"history",size:"lg"})})]}),Object(g.jsxs)(l.b,{sx:{p:[2,3]},children:[Object(g.jsx)(wt,{label:"Stake",inputId:"amount-lp",amount:r.prettify(4),unit:rt,editingState:o,editedAmount:r.toString(4),setEditedAmount:function(e){return s(Ue.Decimal.from(e))},maxAmount:p.toString(),maxedOut:y}),v.infinite?Object(g.jsx)(gt,{label:"Pool share",inputId:"farm-share",amount:"N/A"}):Object(g.jsx)(gt,{label:"Pool share",inputId:"farm-share",amount:v.prettify(4),unit:"%"}),u&&Object(g.jsx)(ca,{amount:r}),Object(g.jsx)(oa,{amount:r}),Object(g.jsxs)(l.f,{variant:"layout.actions",children:[Object(g.jsx)(l.c,{variant:"cancel",onClick:m,children:"Cancel"}),Object(g.jsx)(la,{amount:r}),Object(g.jsx)(ra,{amount:r})]})]}),b&&Object(g.jsx)(Ot,{})]})},fa=function(e){return{liquidityMiningStake:e.liquidityMiningStake,liquidityMiningLQTYReward:e.liquidityMiningLQTYReward,uniTokenBalance:e.uniTokenBalance,totalStakedUniTokens:e.totalStakedUniTokens}},ba=/farm-/,ma=function(){var e=Vn().dispatchEvent,t=Object(Fe.useLiquitySelector)(fa),n=t.liquidityMiningStake,i=t.liquidityMiningLQTYReward,r=t.uniTokenBalance,s=t.totalStakedUniTokens,o=Object(a.useState)(n),u=Object(d.a)(o,2),c=u[0],p=u[1],y=Object(a.useState)(),f=ce(ba),b="waitingForApproval"===f.type||"waitingForConfirmation"===f.type,m=!c.eq(n),h=n.add(r),v=c.eq(h),T=Object(a.useCallback)((function(){e("CANCEL_PRESSED")}),[e]),j=m?s.sub(n).add(c):s,x=n.mulDiv(100,s),w=c.mulDiv(100,j),O=n.nonZero&&Ue.Difference.between(w,x).nonZero;return Object(g.jsxs)(l.d,{children:[Object(g.jsxs)(l.g,{children:["Uniswap Liquidity Farm",m&&!b&&Object(g.jsx)(l.c,{variant:"titleIcon",sx:{":enabled:hover":{color:"danger"}},onClick:function(){return p(n)},children:Object(g.jsx)(te,{name:"history",size:"lg"})})]}),Object(g.jsxs)(l.b,{sx:{p:[2,3]},children:[Object(g.jsx)(wt,{label:"Stake",inputId:"farm-stake-amount",amount:m?c.prettify(4):n.prettify(4),unit:rt,editingState:y,editedAmount:c.toString(4),setEditedAmount:function(e){return p(Ue.Decimal.from(e))},maxAmount:h.toString(),maxedOut:v}),w.infinite?Object(g.jsx)(gt,{label:"Pool share",inputId:"farm-share",amount:"N/A"}):Object(g.jsx)(gt,{label:"Pool share",inputId:"farm-share",amount:w.prettify(4),unit:"%",pendingAmount:null===O||void 0===O?void 0:O.prettify(4).concat("%"),pendingColor:(null===O||void 0===O?void 0:O.positive)?"success":"danger"}),Object(g.jsx)(gt,{label:"Reward",inputId:"farm-reward-amount",amount:i.prettify(4),color:i.nonZero&&"success",unit:it}),m&&Object(g.jsx)(ca,{amount:c}),m&&Object(g.jsx)(oa,{amount:c}),Object(g.jsxs)(l.f,{variant:"layout.actions",children:[Object(g.jsx)(l.c,{variant:"cancel",onClick:T,children:"Cancel"}),Object(g.jsx)(la,{amount:c}),Object(g.jsx)(ra,{amount:c})]})]}),b&&Object(g.jsx)(Ot,{})]})},ha="farm-claim-reward",va=function(){var e=Vn().dispatchEvent,t=Z().liquity.send,n=ce(ha);return Object(a.useEffect)((function(){"confirmedOneShot"===n.type&&e("CLAIM_REWARD_CONFIRMED")}),[n.type,e]),Object(g.jsx)(pe,{id:ha,send:t.withdrawLQTYRewardFromLiquidityMining.bind(t),showFailure:"asTooltip",tooltipPlacement:"bottom",children:Object(g.jsx)(l.c,{children:"Claim reward"})})},Ta="farm-unstake-and-claim",ja=function(){var e=Vn().dispatchEvent,t=Z().liquity.send,n=ce(Ta);return Object(a.useEffect)((function(){"confirmedOneShot"===n.type&&e("UNSTAKE_AND_CLAIM_CONFIRMED")}),[n.type,e]),Object(g.jsx)(pe,{id:Ta,send:t.exitLiquidityMining.bind(t),showFailure:"asTooltip",tooltipPlacement:"bottom",children:Object(g.jsx)(l.c,{variant:"outline",sx:{mt:3,width:"100%"},children:"Unstake and claim reward"})})},ga=function(e){return{liquidityMiningStake:e.liquidityMiningStake,liquidityMiningLQTYReward:e.liquidityMiningLQTYReward,totalStakedUniTokens:e.totalStakedUniTokens}},xa=/farm-/i,wa=function(){var e=Vn().dispatchEvent,t=Object(Fe.useLiquitySelector)(ga),n=t.liquidityMiningStake,i=t.liquidityMiningLQTYReward,r=t.totalStakedUniTokens,s=Object(a.useCallback)((function(){e("ADJUST_PRESSED")}),[e]),o=ce(xa),u="waitingForApproval"===o.type||"waitingForConfirmation"===o.type,c=n.mulDiv(100,r),d=!n.isZero&&!i.isZero;return Object(g.jsxs)(l.d,{children:[Object(g.jsxs)(l.g,{children:["Uniswap Liquidity Farm",!u&&Object(g.jsx)(l.f,{sx:{justifyContent:"flex-end"},children:Object(g.jsx)(Hn,{})})]}),Object(g.jsxs)(l.b,{sx:{p:[2,3]},children:[Object(g.jsxs)(l.b,{children:[Object(g.jsx)(xt,{label:"Stake",inputId:"farm-stake",amount:n.prettify(4),unit:rt}),c.infinite?Object(g.jsx)(gt,{label:"Pool share",inputId:"farm-share",amount:"N/A"}):Object(g.jsx)(gt,{label:"Pool share",inputId:"farm-share",amount:c.prettify(4),unit:"%"}),Object(g.jsxs)(l.f,{sx:{alignItems:"center"},children:[Object(g.jsx)(gt,{label:"Reward",inputId:"farm-reward",amount:i.prettify(4),color:i.nonZero&&"success",unit:it}),Object(g.jsx)(l.f,{sx:{justifyContent:"flex-end",flex:1},children:Object(g.jsx)(ea,{})})]})]}),Object(g.jsxs)(l.f,{variant:"layout.actions",children:[Object(g.jsxs)(l.c,{variant:i.isZero?"primary":"outline",onClick:s,children:[Object(g.jsx)(te,{name:"pen",size:"sm"}),"\xa0Adjust"]}),!i.isZero&&Object(g.jsx)(va,{})]}),Object(g.jsx)(l.f,{children:d&&Object(g.jsx)(ja,{})})]}),u&&Object(g.jsx)(Ot,{})]})},Oa=function(e){return{liquidityMiningStake:e.liquidityMiningStake,liquidityMiningLQTYReward:e.liquidityMiningLQTYReward}},_a=function(){var e=Object(Fe.useLiquitySelector)(Oa),t=e.liquidityMiningStake,n=e.liquidityMiningLQTYReward,a=!t.isZero;return Object(g.jsxs)(l.d,{children:[Object(g.jsxs)(l.g,{children:["Uniswap Opal Farm",Object(g.jsx)(l.f,{sx:{justifyContent:"flex-end"},children:Object(g.jsx)(Hn,{})})]}),Object(g.jsxs)(l.b,{sx:{p:[2,3]},children:[Object(g.jsx)(en,{title:"Opal farming period has finished",children:Object(g.jsx)(l.f,{children:"There are no more OPAL rewards left to farm"})}),a&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(l.b,{sx:{border:1,pt:3,borderRadius:3},children:[Object(g.jsx)(gt,{label:"Stake",inputId:"farm-deposit",amount:t.prettify(4),unit:rt}),Object(g.jsx)(gt,{label:"Reward",inputId:"farm-reward",amount:n.prettify(4),color:n.nonZero&&"success",unit:it})]}),Object(g.jsx)(ja,{})]})]})]})},ka=function(e){switch(Vn().view){case"INACTIVE":return Object(g.jsx)(ta,Object(A.a)({},e));case"STAKING":return Object(g.jsx)(ya,Object(A.a)({},e));case"ADJUSTING":return Object(g.jsx)(ma,Object(A.a)({},e));case"ACTIVE":return Object(g.jsx)(wa,Object(A.a)({},e));case"DISABLED":return Object(g.jsx)(_a,Object(A.a)({},e))}},Sa=Object(a.createContext)(null),Da=function(){var e=Object(a.useContext)(Sa);if(null===e)throw new Error("You must add a <TroveViewProvider> into the React tree");return e},Ea=function(e){return e.lqtyStake},Ca=function(){var e=Z().liquity,t=Object(Fe.useLiquitySelector)(Ea),n=t.collateralGain,a=t.lusdGain,i=de("stake",e.send.withdrawGainsFromStaking.bind(e.send)),r=Object(d.a)(i,1)[0];return Object(g.jsx)(l.c,{onClick:r,disabled:n.isZero&&a.isZero,children:"Claim gains"})},Aa=function(e){return{lqtyStake:e.lqtyStake,totalStakedLQTY:e.totalStakedLQTY}},La=function(){var e=Da(),t=e.changePending,n=e.dispatch,a=Object(Fe.useLiquitySelector)(Aa),i=a.lqtyStake,r=a.totalStakedLQTY,s=i.stakedLQTY.mulDiv(100,r);return Object(g.jsxs)(l.d,{children:[Object(g.jsx)(l.g,{children:"Staking"}),Object(g.jsxs)(l.b,{sx:{p:[2,3]},children:[Object(g.jsx)(xt,{label:"Stake",inputId:"stake-lqty",amount:i.stakedLQTY.prettify(),unit:it}),Object(g.jsx)(gt,{label:"Pool share",inputId:"stake-share",amount:s.prettify(4),unit:"%"}),Object(g.jsx)(gt,{label:"Redemption gain",inputId:"stake-gain-eth",amount:i.collateralGain.prettify(4),color:i.collateralGain.nonZero&&"success",unit:"AUT"}),Object(g.jsx)(gt,{label:"Issuance gain",inputId:"stake-gain-lusd",amount:i.lusdGain.prettify(),color:i.lusdGain.nonZero&&"success",unit:at}),Object(g.jsxs)(l.f,{variant:"layout.actions",children:[Object(g.jsxs)(l.c,{variant:"outline",onClick:function(){return n({type:"startAdjusting"})},children:[Object(g.jsx)(te,{name:"pen",size:"sm"}),"\xa0Adjust"]}),Object(g.jsx)(Ca,{})]})]}),t&&Object(g.jsx)(Ot,{})]})},Ma=function(e){return{lqtyBalance:e.lqtyBalance,totalStakedLQTY:e.totalStakedLQTY}},Ra=function(e){var t=e.children,n=e.title,i=e.originalStake,r=e.editedLQTY,s=e.dispatch,o=Object(Fe.useLiquitySelector)(Ma),u=o.lqtyBalance,c=o.totalStakedLQTY,d=Da().changePending,p=Object(a.useState)(),y=!r.eq(i.stakedLQTY),f=i.stakedLQTY.add(u),b=r.eq(f),m=c.sub(i.stakedLQTY).add(r),h=i.stakedLQTY.mulDiv(100,c),v=r.mulDiv(100,m),T=i.stakedLQTY.nonZero&&Ue.Difference.between(v,h).nonZero;return Object(g.jsxs)(l.d,{children:[Object(g.jsxs)(l.g,{children:[n,y&&!d&&Object(g.jsx)(l.c,{variant:"titleIcon",sx:{":enabled:hover":{color:"danger"}},onClick:function(){return s({type:"revert"})},children:Object(g.jsx)(te,{name:"history",size:"lg"})})]}),Object(g.jsxs)(l.b,{sx:{p:[2,3]},children:[Object(g.jsx)(wt,{label:"Stake",inputId:"stake-lqty",amount:r.prettify(),maxAmount:f.toString(),maxedOut:b,unit:it,editingState:p,editedAmount:r.toString(2),setEditedAmount:function(e){return s({type:"setStake",newValue:e})}}),v.infinite?Object(g.jsx)(gt,{label:"Pool share",inputId:"stake-share",amount:"N/A"}):Object(g.jsx)(gt,{label:"Pool share",inputId:"stake-share",amount:v.prettify(4),pendingAmount:null===T||void 0===T?void 0:T.prettify(4).concat("%"),pendingColor:(null===T||void 0===T?void 0:T.positive)?"success":"danger",unit:"%"}),!i.isEmpty&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(gt,{label:"Redemption gain",inputId:"stake-gain-eth",amount:i.collateralGain.prettify(4),color:i.collateralGain.nonZero&&"success",unit:"AUT"}),Object(g.jsx)(gt,{label:"Issuance gain",inputId:"stake-gain-lusd",amount:i.lusdGain.prettify(),color:i.lusdGain.nonZero&&"success",unit:at})]}),t]}),d&&Object(g.jsx)(Ot,{})]})},Ia=function(e){var t=e.change,n=e.children,a=Z().liquity,i=de("stake",t.stakeLQTY?a.send.stakeLQTY.bind(a.send,t.stakeLQTY):a.send.unstakeLQTY.bind(a.send,t.unstakeLQTY)),r=Object(d.a)(i,1)[0];return Object(g.jsx)(l.c,{onClick:r,children:n})},Pa=function(e){var t=e.lqtyStake;return{originalStake:t,editedLQTY:t.stakedLQTY}},Ua=function(e,t){var n=e.originalStake,a=e.editedLQTY;switch(t.type){case"setStake":return Object(A.a)(Object(A.a)({},e),{},{editedLQTY:Ue.Decimal.from(t.newValue)});case"revert":return Object(A.a)(Object(A.a)({},e),{},{editedLQTY:n.stakedLQTY});case"updateStore":var i=t.stateChange.lqtyStake;if(i)return{originalStake:i,editedLQTY:i.apply(n.whatChanged(a))}}return e},Fa=function(e){return e.lqtyBalance},Ba=function(e){var t,n,a,i,r=e.originalStake,s=e.change,o=null===(t=s.stakeLQTY)||void 0===t?void 0:t.prettify().concat(" ",it),u=null===(n=s.unstakeLQTY)||void 0===n?void 0:n.prettify().concat(" ",it),l=null===(a=r.collateralGain.nonZero)||void 0===a?void 0:a.prettify(4).concat(" AUT"),c=null===(i=r.lusdGain.nonZero)||void 0===i?void 0:i.prettify().concat(" ",at);return r.isEmpty&&o?Object(g.jsxs)(ft,{children:["You are staking ",Object(g.jsx)(bt,{children:o}),"."]}):Object(g.jsxs)(ft,{children:[o&&Object(g.jsxs)(g.Fragment,{children:["You are adding ",Object(g.jsx)(bt,{children:o})," to your stake"]}),u&&Object(g.jsxs)(g.Fragment,{children:["You are withdrawing ",Object(g.jsx)(bt,{children:u})," to your wallet"]}),(l||c)&&Object(g.jsxs)(g.Fragment,{children:[" ","and claiming"," ",l&&c?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(bt,{children:l})," and ",Object(g.jsx)(bt,{children:c})]}):Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(bt,{children:null!==l&&void 0!==l?l:c})})]}),"."]})},qa=function(){var e,t=Da().dispatch,n=Object(Fe.useLiquityReducer)(Ua,Pa),a=Object(d.a)(n,2),i=a[0],r=i.originalStake,s=i.editedLQTY,o=a[1],u=Object(Fe.useLiquitySelector)(Fa),c=r.whatChanged(s),p=c?(null===(e=c.stakeLQTY)||void 0===e?void 0:e.gt(u))?[void 0,Object(g.jsxs)(At,{children:["The amount you're trying to stake exceeds your balance by"," ",Object(g.jsxs)(bt,{children:[c.stakeLQTY.sub(u).prettify()," ",it]}),"."]})]:[c,Object(g.jsx)(Ba,{originalStake:r,change:c})]:[void 0,void 0],y=Object(d.a)(p,2),f=y[0],b=y[1],m=r.isEmpty;return Object(g.jsxs)(Ra,{title:"Staking",originalStake:r,editedLQTY:s,dispatch:o,children:[null!==b&&void 0!==b?b:m?Object(g.jsxs)(ft,{children:["Enter the amount of ",it," you'd like to stake."]}):Object(g.jsxs)(ft,{children:["Adjust the ",it," amount to stake or withdraw."]}),Object(g.jsxs)(l.f,{variant:"layout.actions",children:[Object(g.jsx)(l.c,{variant:"cancel",onClick:function(){return t({type:"cancelAdjusting"})},children:"Cancel"}),f?Object(g.jsx)(Ia,{change:f,children:"Confirm"}):Object(g.jsx)(l.c,{disabled:!0,children:"Confirm"})]})]})},Na=function(){var e=Da().dispatch;return Object(g.jsxs)(l.d,{children:[Object(g.jsx)(l.g,{children:"Staking"}),Object(g.jsxs)(l.b,{sx:{p:[2,3]},children:[Object(g.jsx)(xt,{label:"Stake",inputId:"stake-lqty",amount:"0.00",unit:it}),Object(g.jsxs)(en,{title:"You haven't staked ".concat(it," yet."),children:["Stake ",it," to earn a share of borrowing and redemption fees."]}),Object(g.jsx)(l.f,{variant:"layout.actions",children:Object(g.jsx)(l.c,{onClick:function(){return e({type:"startAdjusting"})},children:"Start staking"})})]})]})},Ya=function(){switch(Da().view){case"ACTIVE":return Object(g.jsx)(La,{});case"ADJUSTING":return Object(g.jsx)(qa,{});case"NONE":return Object(g.jsx)(Na,{})}},Qa=function(e){return{lusdBalance:e.lusdBalance,lusdInStabilityPool:e.lusdInStabilityPool}},Ga=function(e){var t=e.originalDeposit,n=e.editedLUSD,i=e.changePending,r=e.dispatch,s=e.children,o=Object(Fe.useLiquitySelector)(Qa),u=o.lusdBalance,c=o.lusdInStabilityPool,d=Object(a.useState)(),p=!n.eq(t.currentLUSD),y=t.currentLUSD.add(u),f=n.eq(y),b=c.sub(t.currentLUSD).add(n),m=t.currentLUSD.mulDiv(100,c),h=n.mulDiv(100,b),v=t.currentLUSD.nonZero&&Ue.Difference.between(h,m).nonZero;return Object(g.jsxs)(l.d,{children:[Object(g.jsxs)(l.g,{children:["Stability Pool",p&&!i&&Object(g.jsx)(l.c,{variant:"titleIcon",sx:{":enabled:hover":{color:"danger"}},onClick:function(){return r({type:"revert"})},children:Object(g.jsx)(te,{name:"history",size:"lg"})})]}),Object(g.jsxs)(l.b,{sx:{p:[2,3]},children:[Object(g.jsx)(wt,{label:"Deposit",inputId:"deposit-lqty",amount:n.prettify(),maxAmount:y.toString(),maxedOut:f,unit:at,editingState:d,editedAmount:n.toString(2),setEditedAmount:function(e){return r({type:"setDeposit",newValue:e})}}),h.infinite?Object(g.jsx)(gt,{label:"Pool share",inputId:"deposit-share",amount:"N/A"}):Object(g.jsx)(gt,{label:"Pool share",inputId:"deposit-share",amount:h.prettify(4),pendingAmount:null===v||void 0===v?void 0:v.prettify(4).concat("%"),pendingColor:(null===v||void 0===v?void 0:v.positive)?"success":"danger",unit:"%"}),!t.isEmpty&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(gt,{label:"Liquidation gain",inputId:"deposit-gain",amount:t.collateralGain.prettify(4),color:t.collateralGain.nonZero&&"success",unit:"AUT"}),Object(g.jsx)(gt,{label:"Reward",inputId:"deposit-reward",amount:t.lqtyReward.prettify(),color:t.lqtyReward.nonZero&&"success",unit:it,infoIcon:Object(g.jsx)(et,{tooltip:Object(g.jsx)(l.d,{variant:"tooltip",sx:{width:"240px"},children:"Although the OPAL rewards accrue every minute, the value on the UI only updates when a user transacts with the Stability Pool. Therefore you may receive more rewards than is displayed when you claim or adjust your deposit."})})})]}),s]}),i&&Object(g.jsx)(Ot,{})]})},Za=function(e){return"registered"===e.frontend.status},Va=function(e){var t=e.children,n=e.transactionId,a=e.change,i=Z(),r=i.config,s=i.liquity,o=Object(Fe.useLiquitySelector)(Za)?r.frontendTag:void 0,u=de(n,a.depositLUSD?s.send.depositLUSDInStabilityPool.bind(s.send,a.depositLUSD,o):s.send.withdrawLUSDFromStabilityPool.bind(s.send,a.withdrawLUSD)),c=Object(d.a)(u,1)[0];return Object(g.jsx)(l.c,{onClick:c,children:t})},Wa=Object(a.createContext)(null),Ha=function(){var e=Object(a.useContext)(Wa);if(null===e)throw new Error("You must add a <StabilityViewProvider> into the React tree");return e},za=function(e){var t,n,a=e.originalDeposit,i=e.change,r=null===(t=a.collateralGain.nonZero)||void 0===t?void 0:t.prettify(4).concat(" AUT"),s=null===(n=a.lqtyReward.nonZero)||void 0===n?void 0:n.prettify().concat(" ",it);return Object(g.jsxs)(ft,{children:[i.depositLUSD?Object(g.jsxs)(g.Fragment,{children:["You are depositing"," ",Object(g.jsxs)(bt,{children:[i.depositLUSD.prettify()," ",at]})," ","in the Stability Pool"]}):Object(g.jsxs)(g.Fragment,{children:["You are withdrawing"," ",Object(g.jsxs)(bt,{children:[i.withdrawLUSD.prettify()," ",at]})," ","to your wallet"]}),(r||s)&&Object(g.jsxs)(g.Fragment,{children:[" ","and claiming at least"," ",r&&s?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(bt,{children:r})," and ",Object(g.jsx)(bt,{children:s})]}):Object(g.jsx)(bt,{children:null!==r&&void 0!==r?r:s})]}),"."]})},Ja=function(e){var t=e.trove,n=e.lusdBalance,a=e.ownFrontend,i=e.haveUndercollateralizedTroves;return{trove:t,lusdBalance:n,haveOwnFrontend:"registered"===a.status,haveUndercollateralizedTroves:i}},Ka=function(e){var t=e.stabilityDeposit;return{originalDeposit:t,editedLUSD:t.currentLUSD,changePending:!1}},$a=function(e){return function(t){return ti(t,e)}},Xa=$a({type:"finishChange"}),ei=$a({type:"revert"}),ti=function(e,t){var n=e.originalDeposit,a=e.editedLUSD,i=e.changePending;switch(t.type){case"startChange":return console.log("changeStarted"),Object(A.a)(Object(A.a)({},e),{},{changePending:!0});case"finishChange":return Object(A.a)(Object(A.a)({},e),{},{changePending:!1});case"setDeposit":return Object(A.a)(Object(A.a)({},e),{},{editedLUSD:Ue.Decimal.from(t.newValue)});case"revert":return Object(A.a)(Object(A.a)({},e),{},{editedLUSD:n.currentLUSD});case"updateStore":var r=t.stateChange.stabilityDeposit;if(!r)return e;var s=Object(A.a)(Object(A.a)({},e),{},{originalDeposit:r}),o=!r.initialLUSD.eq(n.initialLUSD)||r.currentLUSD.gt(n.currentLUSD)||r.collateralGain.lt(n.collateralGain)||r.lqtyReward.lt(n.lqtyReward);return i&&o?Xa(ei(s)):Object(A.a)(Object(A.a)({},s),{},{editedLUSD:r.apply(n.whatChanged(a))})}},ni="stability-deposit",ai=function(){var e=Object(Fe.useLiquityReducer)(ti,Ka),t=Object(d.a)(e,2),n=t[0],i=n.originalDeposit,r=n.editedLUSD,s=n.changePending,o=t[1],u=Object(Fe.useLiquitySelector)(Ja),c=Ha().dispatchEvent,p=Object(a.useCallback)((function(){c("CANCEL_PRESSED")}),[c]),y=function(e,t,n){var a,i=n.lusdBalance,r=n.haveOwnFrontend,s=n.haveUndercollateralizedTroves,o=e.whatChanged(t);return r?[void 0,Object(g.jsx)(At,{children:"You can\u2019t deposit using a wallet address that is registered as a frontend."})]:o?(null===(a=o.depositLUSD)||void 0===a?void 0:a.gt(i))?[void 0,Object(g.jsxs)(At,{children:["The amount you're trying to deposit exceeds your balance by"," ",Object(g.jsxs)(bt,{children:[o.depositLUSD.sub(i).prettify()," ",at]}),"."]})]:o.withdrawLUSD&&s?[void 0,Object(g.jsx)(At,{children:"You're not allowed to withdraw OUSD from your Stability Deposit when there are undercollateralized Troves. Please liquidate those Troves or try again later."})]:[o,Object(g.jsx)(za,{originalDeposit:e,change:o})]:[void 0,void 0]}(i,r,u),f=Object(d.a)(y,2),b=f[0],m=f[1],h=i.isEmpty,v=ce(ni);return Object(a.useEffect)((function(){"waitingForApproval"===v.type||"waitingForConfirmation"===v.type?o({type:"startChange"}):"failed"===v.type||"cancelled"===v.type?o({type:"finishChange"}):"confirmedOneShot"===v.type&&c("DEPOSIT_CONFIRMED")}),[v.type,o,c]),Object(g.jsxs)(Ga,{originalDeposit:i,editedLUSD:r,changePending:s,dispatch:o,children:[null!==m&&void 0!==m?m:h?Object(g.jsxs)(ft,{children:["Enter the amount of ",at," you'd like to deposit."]}):Object(g.jsxs)(ft,{children:["Adjust the ",at," amount to deposit or withdraw."]}),Object(g.jsxs)(l.f,{variant:"layout.actions",children:[Object(g.jsx)(l.c,{variant:"cancel",onClick:p,children:"Cancel"}),b?Object(g.jsx)(Va,{transactionId:ni,change:b,children:"Confirm"}):Object(g.jsx)(l.c,{disabled:!0,children:"Confirm"})]})]})},ii=function(e){var t=e.disabled,n=e.children,a=Z().liquity,i=de("stability-deposit",a.send.transferCollateralGainToTrove.bind(a.send)),r=Object(d.a)(i,1)[0];return Object(g.jsx)(l.c,{variant:"outline",sx:{mt:3,width:"100%"},onClick:r,disabled:t,children:n})},ri=function(e){var t=e.disabled,n=e.children,a=Z().liquity,i=de("stability-deposit",a.send.withdrawGainsFromStabilityPool.bind(a.send)),r=Object(d.a)(i,1)[0];return Object(g.jsx)(l.c,{onClick:r,disabled:t,children:n})},si=function(e){return{remainingStabilityPoolLQTYReward:e.remainingStabilityPoolLQTYReward}},oi=function(){var e=Object(Fe.useLiquitySelector)(si).remainingStabilityPoolLQTYReward;return Object(g.jsxs)(l.f,{sx:{mr:2,fontSize:2,fontWeight:"medium"},children:[e.prettify(0)," OPAL remaining"]})},ui=n(131),li=function(e,t){return t in e},ci=function(e,t,n){if("object"!==typeof n||null===n)throw new Error("unexpected response from CoinGecko");var a,i=Object(ui.a)(e);try{for(i.s();!(a=i.n()).done;){var r=a.value;if(!li(n,r))throw new Error('coin "'.concat(r,'" missing from CoinGecko response'));var s,o=n[r],u=Object(ui.a)(t);try{for(u.s();!(s=u.n()).done;){var l=s.value;if(!li(o,l))throw new Error('currency "'.concat(l,'" missing from CoinGecko response'));if("number"!==typeof o[l])throw new Error('price of coin "'.concat(r,'" in currency "').concat(l,'" is not a number'))}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return n},di=function(){var e=Object(C.a)(E.a.mark((function e(t,n){var a,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://api.coingecko.com/api/v3/simple/price?"+new URLSearchParams({ids:t.join(","),vs_currencies:n.join(",")}),e.next=3,window.fetch(a,{headers:{accept:"application/json"}});case 3:if((i=e.sent).ok){e.next=6;break}throw new Error("couldn't fetch price from CoinGecko: got status ".concat(i.status));case 6:return e.t0=ci,e.t1=t,e.t2=n,e.next=11,i.json();case 11:return e.t3=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),pi=function(){var e=Object(C.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,di(["liquity"],["usd"]);case 2:return t=e.sent,e.abrupt("return",{lqtyPriceUSD:Ue.Decimal.from(t.liquity.usd)});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),yi=function(e){return{lusdInStabilityPool:e.lusdInStabilityPool,remainingStabilityPoolLQTYReward:e.remainingStabilityPoolLQTYReward}},fi=Ue.Decimal.from(1-Math.pow(.5,1/365)),bi=fi.mul(100),mi=function(){var e=Object(Fe.useLiquitySelector)(yi),t=e.lusdInStabilityPool,n=e.remainingStabilityPoolLQTYReward,i=Object(a.useState)(void 0),r=Object(d.a)(i,2),s=r[0],o=r[1],u=n.isZero||t.isZero;if(Object(a.useEffect)((function(){Object(C.a)(E.a.mark((function e(){var t,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pi();case 3:t=e.sent,n=t.lqtyPriceUSD,o(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}),[]),u||void 0===s)return null;var c=n.mul(fi).mul(s).mulDiv(36500,t),p=n.mul(s);return c.isZero?null:Object(g.jsxs)(l.a,{variant:"muted",children:[Object(g.jsxs)(l.o,{children:["OPAL APR ",c.toString(2),"%"]}),Object(g.jsx)(et,{placement:"top",tooltip:Object(g.jsxs)(l.d,{variant:"tooltip",sx:{width:["220px","518px"]},children:[Object(g.jsxs)(l.m,{children:["An ",Object(g.jsx)(l.o,{sx:{fontWeight:"bold"},children:"estimate"})," of the OPAL return on the OUSD deposited to the Stability Pool "]}),Object(g.jsx)(l.m,{children:"over the next year, not including your AUT gains from liquidations."}),Object(g.jsxs)(l.m,{sx:{fontSize:"12px",fontFamily:"monospace",mt:2},children:["($OPAL_REWARDS * DAILY_ISSUANCE% / DEPOSITED_OUSD) * 365 * 100 ="," ",Object(g.jsx)(l.o,{sx:{fontWeight:"bold"},children:" APR"})]}),Object(g.jsxs)(l.m,{sx:{fontSize:"12px",fontFamily:"monospace"},children:["($",p.shorten()," * ",bi.toString(4),"% / $",t.shorten(),") * 365 * 100 =",Object(g.jsxs)(l.o,{sx:{fontWeight:"bold"},children:[" ",c.toString(2),"%"]})]})]})})]})},hi=function(e){return{stabilityDeposit:e.stabilityDeposit,trove:e.trove,lusdInStabilityPool:e.lusdInStabilityPool}},vi=function(){var e=Ha().dispatchEvent,t=Object(Fe.useLiquitySelector)(hi),n=t.stabilityDeposit,i=t.trove,r=t.lusdInStabilityPool,s=n.currentLUSD.mulDiv(100,r),o=Object(a.useCallback)((function(){e("ADJUST_DEPOSIT_PRESSED")}),[e]),u=!n.lqtyReward.isZero,c=!n.collateralGain.isZero,d=!i.isEmpty,p=ce("stability-deposit"),y="waitingForApproval"===p.type||"waitingForConfirmation"===p.type;return Object(a.useEffect)((function(){"confirmedOneShot"===p.type&&e("REWARDS_CLAIMED")}),[p.type,e]),Object(g.jsxs)(l.d,{children:[Object(g.jsxs)(l.g,{children:["Stability Pool",!y&&Object(g.jsx)(l.f,{sx:{justifyContent:"flex-end"},children:Object(g.jsx)(oi,{})})]}),Object(g.jsxs)(l.b,{sx:{p:[2,3]},children:[Object(g.jsxs)(l.b,{children:[Object(g.jsx)(xt,{label:"Deposit",inputId:"deposit-lusd",amount:n.currentLUSD.prettify(),unit:at}),Object(g.jsx)(gt,{label:"Pool share",inputId:"deposit-share",amount:s.prettify(4),unit:"%"}),Object(g.jsx)(gt,{label:"Liquidation gain",inputId:"deposit-gain",amount:n.collateralGain.prettify(4),color:n.collateralGain.nonZero&&"success",unit:"AUT"}),Object(g.jsxs)(l.f,{sx:{alignItems:"center"},children:[Object(g.jsx)(gt,{label:"Reward",inputId:"deposit-reward",amount:n.lqtyReward.prettify(),color:n.lqtyReward.nonZero&&"success",unit:it,infoIcon:Object(g.jsx)(et,{tooltip:Object(g.jsx)(l.d,{variant:"tooltip",sx:{width:"240px"},children:"Although the OPAL rewards accrue every minute, the value on the UI only updates when a user transacts with the Stability Pool. Therefore you may receive more rewards than is displayed when you claim or adjust your deposit."})})}),Object(g.jsx)(l.f,{sx:{justifyContent:"flex-end",flex:1},children:Object(g.jsx)(mi,{})})]})]}),Object(g.jsxs)(l.f,{variant:"layout.actions",children:[Object(g.jsxs)(l.c,{variant:"outline",onClick:o,children:[Object(g.jsx)(te,{name:"pen",size:"sm"}),"\xa0Adjust"]}),Object(g.jsx)(ri,{disabled:!c&&!u,children:"Claim AUT and OPAL"})]}),d&&Object(g.jsx)(ii,{disabled:!c,children:"Claim OPAL and move AUT to Trove"})]}),y&&Object(g.jsx)(Ot,{})]})},Ti=function(e){var t=Ha().dispatchEvent,n=Object(a.useCallback)((function(){t("DEPOSIT_PRESSED")}),[t]);return Object(g.jsxs)(l.d,{children:[Object(g.jsxs)(l.g,{children:["Stability Pool",Object(g.jsx)(l.f,{sx:{justifyContent:"flex-end"},children:Object(g.jsx)(oi,{})})]}),Object(g.jsxs)(l.b,{sx:{p:[2,3]},children:[Object(g.jsx)(xt,{label:"Deposit",inputId:"deposit-lusd",amount:"0.00",unit:at}),Object(g.jsx)(en,{title:"You have no OUSD in the Stability Pool.",children:"You can earn AUT and LQTY rewards by depositing OUSD."}),Object(g.jsxs)(l.f,{variant:"layout.actions",children:[Object(g.jsx)(l.f,{sx:{justifyContent:"flex-start",flex:1,alignItems:"center"},children:Object(g.jsx)(mi,{})}),Object(g.jsx)(l.c,{onClick:n,children:"Deposit"})]})]})]})},ji=function(e){switch(Ha().view){case"NONE":return Object(g.jsx)(Ti,Object(A.a)({},e));case"DEPOSITING":case"ADJUSTING":return Object(g.jsx)(ai,Object(A.a)({},e));case"ACTIVE":return Object(g.jsx)(vi,Object(A.a)({},e))}},gi=["tvl","lusd-supply","lusd-sp","staked-lqty","tcr"],xi=function(){return Object(g.jsx)(l.e,{variant:"columns",sx:{justifyContent:"flex-start"},children:Object(g.jsxs)(l.e,{variant:"single",children:[Object(g.jsx)(lt,{filterStats:["lusd-sp","staked-lqty"]}),Object(g.jsx)(ji,{}),Object(g.jsx)(Ya,{}),Object(g.jsx)(ka,{}),Object(g.jsx)(En,{showProtocol:!0,filterStats:gi})]})})},wi=function(){var e=Z().liquity.send,t=Object(a.useState)("90"),n=Object(d.a)(t,2),i=n[0],r=n[1];return Object(g.jsx)(l.d,{sx:{mt:0},children:Object(g.jsx)(l.b,{sx:{p:[2,3]},children:Object(g.jsx)(l.f,{sx:{alignItems:"stretch"},children:Object(g.jsxs)(l.f,{sx:{ml:2,alignItems:"center"},children:[Object(g.jsx)(pe,{id:"batch-liquidate",tooltip:"Liquidate",tooltipPlacement:"bottom",send:function(t){if(!i)throw new Error("Invalid number");return e.liquidateUpTo(parseInt(i,10),t)},children:Object(g.jsx)(l.c,{variant:"danger",children:"Liquidate"})}),Object(g.jsx)(l.j,{children:"Up to"}),Object(g.jsx)(l.i,{type:"number",min:"1",step:"1",value:i,onChange:function(e){return r(e.target.value)}}),Object(g.jsx)(l.j,{children:"Troves"})]})})})})},Oi=n(167),_i=n.n(Oi),ki=function(e){var t=e.children,n=e.short,a=Object(z.a)(e,["children","short"]);return Object(g.jsxs)(l.b,Object(A.a)(Object(A.a)({as:"span"},a),{},{children:[Object(g.jsx)(l.b,{as:"span",sx:{display:["none","unset"]},children:t}),Object(g.jsx)(l.b,{as:"span",sx:{display:["unset","none"]},children:n})]}))},Si="40px",Di=function(e,t){return[e.collateralRatioIsBelowMinimum(t),"Collateral ratio not low enough"]},Ei=function(e,t,n,a){var i=e.collateralRatio(t);return i.gte(Ue.MINIMUM_COLLATERAL_RATIO)&&i.lt(n)?[e.debt.lte(a),"There's not enough OUSD in the Stability pool to cover the debt"]:Di(e,t)},Ci=function(e){var t=e.numberOfTroves,n=e.price,a=e.total,i=e.lusdInStabilityPool,r=e.blockTag;return{numberOfTroves:t,price:n,recoveryMode:a.collateralRatioIsBelowCritical(n),totalCollateralRatio:a.collateralRatio(n),lusdInStabilityPool:i,blockTag:r}},Ai=function(e){var t=e.pageSize,n=Object(Fe.useLiquitySelector)(Ci),i=n.blockTag,r=n.numberOfTroves,s=n.recoveryMode,o=n.totalCollateralRatio,u=n.lusdInStabilityPool,c=n.price,p=Z().liquity,y=Object(a.useState)(!0),f=Object(d.a)(y,2),b=f[0],m=f[1],h=Object(a.useState)(),v=Object(d.a)(h,2),T=v[0],j=v[1],x=Object(a.useState)({}),w=Object(d.a)(x,2),O=w[0],_=w[1],k=Object(a.useCallback)((function(){return _({})}),[]),S=Object(a.useState)(0),D=Object(d.a)(S,2),E=D[0],C=D[1],A=Math.ceil(r/t)||1,L=Math.min(E,A-1);Object(a.useEffect)((function(){E!==L&&C(L)}),[E,L]),Object(a.useEffect)((function(){var e=!0;return m(!0),p.getTroves({first:t,sortedBy:"ascendingCollateralRatio",startingAt:L*t},{blockTag:i}).then((function(t){e&&(j(t),m(!1))})),function(){e=!1}}),[p,L,t,O]),Object(a.useEffect)((function(){k()}),[k,r]);var M=Object(a.useState)(),R=Object(d.a)(M,2),I=R[0],P=R[1];return Object(a.useEffect)((function(){if(void 0!==I){var e=!1;return setTimeout((function(){e||P(void 0)}),2e3),function(){e=!0}}}),[I]),Object(g.jsxs)(l.d,{sx:{width:"100%"},children:[Object(g.jsxs)(l.g,{children:[Object(g.jsx)(ki,{short:"Troves",children:"Risky Troves"}),Object(g.jsxs)(l.f,{sx:{alignItems:"center"},children:[0!==r&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(ki,{short:"page ".concat(L+1," / ").concat(A),sx:{mr:[0,3],fontWeight:"body",fontSize:[1,2],letterSpacing:[-1,0]},children:[L*t+1,"-",Math.min((L+1)*t,r)," ","of ",r]}),Object(g.jsx)(l.c,{variant:"titleIcon",onClick:function(){L>0&&C(L-1)},disabled:L<=0,children:Object(g.jsx)(te,{name:"chevron-left",size:"lg"})}),Object(g.jsx)(l.c,{variant:"titleIcon",onClick:function(){L<A-1&&C(L+1)},disabled:L>=A-1,children:Object(g.jsx)(te,{name:"chevron-right",size:"lg"})})]}),Object(g.jsx)(l.c,{variant:"titleIcon",sx:{opacity:b?0:1,ml:[0,3]},onClick:k,children:Object(g.jsx)(te,{name:"redo",size:"lg"})})]})]}),T&&0!==T.length?Object(g.jsx)(l.b,{sx:{p:[2,3]},children:Object(g.jsxs)(l.b,{as:"table",sx:{mt:2,pl:[1,4],width:"100%",textAlign:"center",lineHeight:1.15},children:[Object(g.jsxs)("colgroup",{children:[Object(g.jsx)("col",{style:{width:"50px"}}),Object(g.jsx)("col",{}),Object(g.jsx)("col",{}),Object(g.jsx)("col",{}),Object(g.jsx)("col",{style:{width:Si}})]}),Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{children:"Owner"}),Object(g.jsxs)("th",{children:[Object(g.jsx)(ki,{short:"Coll.",children:"Collateral"}),Object(g.jsx)(l.b,{sx:{fontSize:[0,1],fontWeight:"body",opacity:.5},children:"AUT"})]}),Object(g.jsxs)("th",{children:["Debt",Object(g.jsx)(l.b,{sx:{fontSize:[0,1],fontWeight:"body",opacity:.5},children:at})]}),Object(g.jsxs)("th",{children:["Coll.",Object(g.jsx)("br",{}),"Ratio"]}),Object(g.jsx)("th",{})]})}),Object(g.jsx)("tbody",{children:T.map((function(e){return!e.isEmpty&&Object(g.jsxs)("tr",{children:[Object(g.jsxs)("td",{style:{display:"flex",alignItems:"center",height:Si},children:[Object(g.jsx)(ae,{message:e.ownerAddress,placement:"top",children:Object(g.jsxs)(l.o,{variant:"address",sx:{width:["73px","unset"],overflow:"hidden",position:"relative"},children:[$e(e.ownerAddress),Object(g.jsx)(l.b,{sx:{display:["block","none"],position:"absolute",top:0,right:0,width:"50px",height:"100%",background:"linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%)"}})]})}),Object(g.jsx)(_i.a,{text:e.ownerAddress,onCopy:function(){return P(e.ownerAddress)},children:Object(g.jsx)(l.c,{variant:"icon",sx:{width:"24px",height:"24px"},children:Object(g.jsx)(te,{name:I===e.ownerAddress?"clipboard-check":"clipboard",size:"sm"})})})]}),Object(g.jsx)("td",{children:Object(g.jsx)(ki,{short:e.collateral.shorten(),children:e.collateral.prettify(4)})}),Object(g.jsx)("td",{children:Object(g.jsx)(ki,{short:e.debt.shorten(),children:e.debt.prettify()})}),Object(g.jsx)("td",{children:(t=e.collateralRatio(c),Object(g.jsx)(l.o,{color:t.gt(Ue.CRITICAL_COLLATERAL_RATIO)?"success":t.gt(1.2)?"warning":"danger",children:new Ue.Percent(t).prettify()}))}),Object(g.jsx)("td",{children:Object(g.jsx)(pe,{id:"liquidate-".concat(e.ownerAddress),tooltip:"Liquidate",requires:[s?Ei(e,c,o,u):Di(e,c)],send:p.send.liquidate.bind(p.send,e.ownerAddress),children:Object(g.jsx)(l.c,{variant:"dangerIcon",children:Object(g.jsx)(te,{name:"trash"})})})})]},e.ownerAddress);var t}))})]})}):Object(g.jsx)(l.b,{sx:{p:[2,3]},children:Object(g.jsx)(l.b,{sx:{p:4,fontSize:3,textAlign:"center"},children:T?"There are no Troves yet":"Loading..."})}),b&&Object(g.jsx)(Ot,{})]})},Li=function(){return Object(g.jsxs)(l.e,{variant:"columns",children:[Object(g.jsx)(lt,{filterStats:["troves","tcr","lusd-sp"]}),Object(g.jsx)(Ai,{pageSize:10}),Object(g.jsx)(l.e,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:Object(g.jsx)(l.f,{sx:{width:["100%","50%"]},children:Object(g.jsx)(wi,{})})})]})},Mi={NONE:{OPEN_TROVE_PRESSED:"OPENING",TROVE_OPENED:"ACTIVE"},LIQUIDATED:{OPEN_TROVE_PRESSED:"OPENING",TROVE_SURPLUS_COLLATERAL_CLAIMED:"NONE",TROVE_OPENED:"ACTIVE"},REDEEMED:{OPEN_TROVE_PRESSED:"OPENING",TROVE_SURPLUS_COLLATERAL_CLAIMED:"NONE",TROVE_OPENED:"ACTIVE"},OPENING:{CANCEL_ADJUST_TROVE_PRESSED:"NONE",TROVE_OPENED:"ACTIVE"},ADJUSTING:{CANCEL_ADJUST_TROVE_PRESSED:"ACTIVE",TROVE_ADJUSTED:"ACTIVE",TROVE_CLOSED:"NONE",TROVE_LIQUIDATED:"LIQUIDATED",TROVE_REDEEMED:"REDEEMED"},CLOSING:{CANCEL_ADJUST_TROVE_PRESSED:"ACTIVE",TROVE_CLOSED:"NONE",TROVE_ADJUSTED:"ACTIVE",TROVE_LIQUIDATED:"LIQUIDATED",TROVE_REDEEMED:"REDEEMED"},ACTIVE:{ADJUST_TROVE_PRESSED:"ADJUSTING",CLOSE_TROVE_PRESSED:"CLOSING",TROVE_CLOSED:"NONE",TROVE_LIQUIDATED:"LIQUIDATED",TROVE_REDEEMED:"REDEEMED"}},Ri={open:"TROVE_OPENED",closedByOwner:"TROVE_CLOSED",closedByLiquidation:"TROVE_LIQUIDATED",closedByRedemption:"TROVE_REDEEMED"},Ii=function(e){return e.trove.status},Pi=function(e){var t=e.children,n=Object(Fe.useLiquitySelector)(Ii),i=Object(a.useState)(function(e){return"closedByLiquidation"===e?"LIQUIDATED":"closedByRedemption"===e?"REDEEMED":"open"===e?"ACTIVE":"NONE"}(n)),r=Object(d.a)(i,2),s=r[0],o=r[1],u=Object(a.useRef)(s),l=Object(a.useCallback)((function(e){var t=function(e,t){var n;return null!==(n=Mi[e][t])&&void 0!==n?n:e}(u.current,e);console.log("dispatchEvent() [current-view, event, next-view]",u.current,e,t),o(t)}),[]);Object(a.useEffect)((function(){u.current=s}),[s]),Object(a.useEffect)((function(){var e,t=null!==(e=Ri[n])&&void 0!==e?e:null;null!==t&&l(t)}),[n,l]);var c={view:s,dispatchEvent:l};return Object(g.jsx)(Et.Provider,{value:c,children:t})},Ui={NONE:{DEPOSIT_PRESSED:"DEPOSITING"},DEPOSITING:{CANCEL_PRESSED:"NONE",DEPOSIT_CONFIRMED:"ACTIVE"},ACTIVE:{REWARDS_CLAIMED:"ACTIVE",ADJUST_DEPOSIT_PRESSED:"ADJUSTING",DEPOSIT_EMPTIED:"NONE"},ADJUSTING:{CANCEL_PRESSED:"ACTIVE",DEPOSIT_CONFIRMED:"ACTIVE",DEPOSIT_EMPTIED:"NONE"}},Fi=function(e){return e.stabilityDeposit},Bi=function(e){var t=e.children,n=Object(Fe.useLiquitySelector)(Fi),i=Object(a.useState)(function(e){return e.isEmpty?"NONE":"ACTIVE"}(n)),r=Object(d.a)(i,2),s=r[0],o=r[1],u=Object(a.useRef)(s),l=Object(a.useCallback)((function(e){var t=function(e,t){var n;return null!==(n=Ui[e][t])&&void 0!==n?n:e}(u.current,e);console.log("dispatchEvent() [current-view, event, next-view]",u.current,e,t),o(t)}),[]);Object(a.useEffect)((function(){u.current=s}),[s]),Object(a.useEffect)((function(){n.isEmpty&&l("DEPOSIT_EMPTIED")}),[n.isEmpty,l]);var c={view:s,dispatchEvent:l};return Object(g.jsx)(Wa.Provider,{value:c,children:t})},qi=function(e){return{lqtyStake:e.lqtyStake,changePending:!1,adjusting:!1}},Ni=function(e,t){switch(t.type){case"startAdjusting":return Object(A.a)(Object(A.a)({},e),{},{adjusting:!0});case"cancelAdjusting":return Object(A.a)(Object(A.a)({},e),{},{adjusting:!1});case"startChange":return Object(A.a)(Object(A.a)({},e),{},{changePending:!0});case"abortChange":return Object(A.a)(Object(A.a)({},e),{},{changePending:!1});case"updateStore":var n=t.oldState.lqtyStake,a=t.stateChange.lqtyStake;if(a){var i=!a.stakedLQTY.eq(n.stakedLQTY)||a.collateralGain.lt(n.collateralGain)||a.lusdGain.lt(n.lusdGain);return Object(A.a)(Object(A.a)({},e),{},{lqtyStake:a,adjusting:!1,changePending:!i&&e.changePending})}}return e},Yi=function(e){var t=e.children,n=ce("stake"),i=Object(Fe.useLiquityReducer)(Ni,qi),r=Object(d.a)(i,2),s=r[0],o=s.adjusting,u=s.changePending,l=s.lqtyStake,c=r[1];return Object(a.useEffect)((function(){"waitingForApproval"===n.type||"waitingForConfirmation"===n.type?c({type:"startChange"}):"failed"!==n.type&&"cancelled"!==n.type||c({type:"abortChange"})}),[n.type,c]),Object(g.jsx)(Sa.Provider,{value:{view:o?"ADJUSTING":l.isEmpty?"NONE":"ACTIVE",changePending:u,dispatch:c},children:t})},Qi={INACTIVE:{STAKE_PRESSED:"STAKING"},STAKING:{CANCEL_PRESSED:"INACTIVE",STAKE_CONFIRMED:"ACTIVE",STAKE_APPROVED:"STAKING"},ACTIVE:{ADJUST_PRESSED:"ADJUSTING",CLAIM_REWARD_CONFIRMED:"ACTIVE",UNSTAKE_AND_CLAIM_CONFIRMED:"INACTIVE"},ADJUSTING:{CANCEL_PRESSED:"ACTIVE",STAKE_CONFIRMED:"ACTIVE",STAKE_APPROVED:"ADJUSTING",UNSTAKE_CONFIRMED:"ACTIVE"},DISABLED:{CLAIM_REWARD_CONFIRMED:"DISABLED",UNSTAKE_AND_CLAIM_CONFIRMED:"DISABLED"}},Gi=function(e){return{liquidityMiningStake:e.liquidityMiningStake,remainingLiquidityMiningLQTYReward:e.remainingLiquidityMiningLQTYReward,liquidityMiningLQTYReward:e.liquidityMiningLQTYReward}},Zi=function(e){var t=e.children,n=Object(Fe.useLiquitySelector)(Gi),i=n.liquidityMiningStake,r=n.remainingLiquidityMiningLQTYReward,s=n.liquidityMiningLQTYReward,o=Object(a.useState)(function(e,t,n){return t.isZero?"DISABLED":e.isZero&&n.isZero?"INACTIVE":"ACTIVE"}(i,r,s)),u=Object(d.a)(o,2),l=u[0],c=u[1],p=Object(a.useRef)(l),y=Object(a.useCallback)((function(e){var t=function(e,t){var n;return null!==(n=Qi[e][t])&&void 0!==n?n:e}(p.current,e);console.log("dispatchEvent() [current-view, event, next-view]",p.current,e,t),c(t)}),[]);Object(a.useEffect)((function(){p.current=l}),[l]),Object(a.useEffect)((function(){i.isZero&&s.isZero?y("UNSTAKE_AND_CLAIM_CONFIRMED"):i.isZero&&!s.isZero&&y("UNSTAKE_CONFIRMED")}),[i.isZero,s.isZero,y]);var f={view:l,dispatchEvent:y};return Object(g.jsx)(Zn.Provider,{value:f,children:t})},Vi=function(e){var t=e.loader,n=Z(),a=n.account,i=n.provider,r=n.liquity;return Object.assign(window,{account:a,provider:i,liquity:r,Trove:Ue.Trove,Decimal:Ue.Decimal,Difference:Ue.Difference,Wallet:Pe.a}),Object(g.jsxs)(Fe.LiquityStoreProvider,{loader:t,store:r.store,children:[Object(g.jsx)(Re.a,{children:Object(g.jsx)(Pi,{children:Object(g.jsx)(Bi,{children:Object(g.jsx)(Yi,{children:Object(g.jsx)(Zi,{children:Object(g.jsxs)(l.f,{sx:{flexDirection:"column",minHeight:"100%"},children:[Object(g.jsx)(yt,{}),Object(g.jsx)(l.e,{variant:"main",sx:{display:"flex",flexGrow:1,flexDirection:"column",alignItems:"center",justifyContent:"center"},children:Object(g.jsxs)(Ie.c,{children:[Object(g.jsx)(Ie.a,{path:"/",exact:!0,children:Object(g.jsx)(Gn,{})}),Object(g.jsx)(Ie.a,{path:"/farm",children:Object(g.jsx)(xi,{})}),Object(g.jsx)(Ie.a,{path:"/liquidate",children:Object(g.jsx)(Li,{})})]})})]})})})})})}),Object(g.jsx)(me,{})]})};B().then((function(e){Object.assign(window,{config:e})}));var Wi=Object(u.c)("NETWORK");function Hi(e){var t=new Le.a.providers.Web3Provider(e);return t.pollingInterval=1e4,t}var zi=function(){return Object(g.jsxs)(l.f,{sx:{flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",textAlign:"center"},children:[Object(g.jsxs)(l.g,{sx:{mb:3},children:[Object(g.jsx)(te,{name:"exclamation-triangle"})," This app is for testing purposes only."]}),Object(g.jsx)(l.m,{sx:{mb:3},children:"Please change your network to Ropsten, Rinkeby, Kovan, G\xf6rli or Kiln."}),Object(g.jsxs)(l.m,{children:["If you'd like to use the Liquity Protocol on mainnet, please pick a frontend"," ",Object(g.jsxs)(l.k,{href:"https://www.liquity.org/frontend",children:["here ",Object(g.jsx)(te,{name:"external-link-alt",size:"xs"})]}),"."]})]})},Ji=function(){var e=Object(g.jsxs)(l.f,{sx:{alignItems:"center",justifyContent:"center",height:"100vh"},children:[Object(g.jsx)(l.n,{sx:{m:2,color:"text"},size:"32px"}),Object(g.jsx)(l.g,{children:"Loading..."})]}),t=function(){return Object(g.jsx)(l.f,{sx:{flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",textAlign:"center"},children:Object(g.jsx)(Me,{children:"Opal is not yet deployed to this network. Please switch to Bakerloo."})})};return Object(g.jsxs)(c.a,{theme:Ae,children:[Object(g.jsx)(w.a,{styles:Object(w.b)($n||($n=Object(o.a)(['\n          @font-face {\n            font-family: "Visby CF";\n            src: url("./fonts/VisbyCF-Regular.woff2") format("woff2");\n            font-style: normal;\n            font-weight: 400;\n          }\n          @font-face {\n            font-family: "Visby CF";\n            src: url("./fonts/VisbyCF-Heavy.woff2") format("woff2");\n            font-style: normal;\n            font-weight: 600;\n          }\n          '])))}),Object(g.jsx)(u.b,{getLibrary:Hi,children:Object(g.jsx)(Wi,{getLibrary:Hi,children:Object(g.jsx)(x,{fallback:t,children:Object(g.jsx)(G,{loader:e,unsupportedNetworkFallback:t,unsupportedMainnetFallback:Object(g.jsx)(zi,{}),children:Object(g.jsx)(ue,{children:Object(g.jsx)(Vi,{loader:e})})})})})})]})};s.a.render(Object(g.jsx)(i.a.StrictMode,{children:Object(g.jsx)(Ji,{})}),document.getElementById("root"))}],[[269,1,2]]]);
//# sourceMappingURL=main.3bd08fc8.chunk.js.map